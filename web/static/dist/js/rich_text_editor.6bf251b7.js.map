{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tinymce/themes/silver/theme.js","webpack:///./node_modules/tinymce/plugins/table/index.js","webpack:///./node_modules/tinymce/themes/silver/index.js","webpack:///./frontend/libs/tinymce_extensions.js","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/tinymce/plugins/media/plugin.js","webpack:///./node_modules/tinymce/plugins/media/index.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/tinymce/plugins/noneditable/plugin.js","webpack:///./node_modules/tinymce/plugins/image/index.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./node_modules/tinymce/plugins/paste/plugin.js","webpack:///./node_modules/tinymce/plugins/lists/index.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/tinymce/plugins/paste/index.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js","webpack:///./node_modules/tinymce/plugins/noneditable/index.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./frontend/pages/rich_text_editor.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","domGlobals","noop","noarg","f","compose","fa","fb","args","_i","arguments","constant","identity","x","curry","fn","initialArgs","restArgs","all","concat","not","die","msg","Error","never","always","global$1","tinymce","util","Tools","resolve","__assign","assign","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","Array","k","a","jl","SimpleResultType","none","NONE","eq","isNone","thunk","id","me","fold","is","isSome","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","exists","forall","filter","equals","equals_","toArray","toString","freeze","some","constant_a","self","v","elementEq","b","from","Option","opt","mapError","_","onValue","toOption","isValue","isError","error","message","String","onError","fromOption","err","Result","typeOf","isPrototypeOf","constructor","isType","type","isString","isObject","isArray","isBoolean","isFunction","isNumber","isArrayOf","pred","len","nativeSlice","nativeIndexOf","nativePush","rawIndexOf","ts","xs","contains","range","num","chunk","array","size","eachr","partition","pass","fail","arr","foldr","acc","foldl","find","findIndex","flatten","output","reverse","difference","a1","a2","pure","sort","comparator","copy","head","last","from$1","keys","each$1","obj","props","map$1","tupleMap","tuple","mapToArray","find$1","values","has","generate","cases","constructors","adt","acase","count","keys$1","argLength","match","branches","branchKeys","join","allReqd","reqKey","target","log","label","console","params","Adt","hasOwnProperty$1","shallow","old","nu","deep","bothObjects","deepMerge","baseMerge","merger","objects","ret","curObject","merge","cached","called","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","fallback","mergeWith","base","exclude","fields","readOpt","readOr","readOptFrom","hasKey","wrap","wrapAll","keyvalues","kv","partition$1","bothErrors","firstError","secondError","bothValues","results","errors","exclude$1","readOpt$1","readOr$1","readOptFrom$1","wrap$1","wrapAll$1","mergeValues","mergeErrors","consolidate","objs","partitions","hasKey$1","res","stype","serror","svalue","partition$2","val","map$2","Value","bind$1","bindError","toResult","fromResult","SimpleResult","mergeValues$1","mergeErrors$1","consolidateObj","consolidateArr","ResultCombine","typeAdt","setOf","arrOf","objOf","itemOf","choiceOf","func","fieldAdt","field","state","formatObj","input","JSON","stringify","formatErrors","es","path","getErrorInfo","missingStrict","missingKey","missingBranch","branch","unsupportedFields","unsupported","custom","adt$1","strictAccess","fallbackAccess","fallbackThunk","optionAccess","optionDefaultedAccess","cExtractOne","strength","okey","presence","prop","bundle","av","extract","bundleAsOption","optValue","outcome","ov","baseThunk","instantiator","cExtract","valueThunk","getDelegate","toDsl","value$1","validator","getSetKeys","objOfOnly","delegate","fieldNames","extra","fieldStrings","validateKeys","validatedKeys","validKeys","schema","vk","anyValue","arrOfObj","chooseFrom","ch","vp","choose","choice","chosen","_anyValue","arrOfObj$1","objFields","arrOfVal","valueThunkOf","valueOf","setOf$1","errs","asRaw","extraction","errInfo","formatError","asRawOrDie","chooseProcessor","choose$1","anyValue$1","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","next","done","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictBoolean","strictFunction","forbid","strictObjOf","objSchema","strictArrayOfObj","strictArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","optionObjOfOnly","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedPostMsg","defaultedArrayOf","defaultedObjOf","state$1","Cell","initial","set","clone","fromHtml","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","fromDom","fromTag","tag","node","fromText","text","createTextNode","dom","fromPoint","docElm","y","elementFromPoint","Element","compareDocumentPosition","documentPositionPreceding","Node","DOCUMENT_POSITION_PRECEDING","documentPositionContainedBy","DOCUMENT_POSITION_CONTAINED_BY","firstMatch","regexes","test","find$2","agent","major","minor","group","Number","replace","nu$1","detect","versionRegexes","cleanedAgent","toLowerCase","unknown","Version","edge","chrome","ie","opera","firefox","safari","isBrowser","current","unknown$1","nu$2","version","info","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","ios","android","linux","osx","solaris","freebsd","isOS","unknown$2","nu$3","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","detect$1","candidates","candidate","search","detectBrowser","browsers","detectOs","oses","UaString","checkRange","str","substr","start","contains$1","endsWith","suffix","trim","normalVersionRegex","checkContains","uastring","PlatformInfo","detect$2","deviceType","PlatformDetection","query","matchMedia","matches","platform","navigator","detect$3","DOCUMENT","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","ELEMENT","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","TEXT","TEXT_NODE","ELEMENT$1","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","DOCUMENT$1","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","querySelectorAll","one","querySelector","e1","e2","regularContains","d1","d2","ieContains","contains$2","isSource","component","simulatedEvent","event","nu$4","parts","all$1","handlers","handler","any","read","can","abort","run","fuse","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitionend","selectstart","alloy","tap","focus","postBlur","postPaste","receive","execute","focusItem","tapOrClick","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","emit","dispatchWith","emitWith","properties","emitExecute","dispatch","getSystem","triggerEvent","dispatchEvent","ClosestOrAncestor","ancestor","isRoot","Function","nodeName","isType$1","isElement","isText","inBody","parentNode","ownerDocument","body","getBody","predicate","stop","el","closest","descendant","descend","child_1","closest$1","transform","derive","configs","preventDefault","prevent","runActionExtra","action","runOnName","runOnSourceName","redirectToUid","uid","getByUid","redirectee","redirectToPart","detail","partName","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","Immutable","struct","sort$1","reqMessage","required","unsuppMessage","validateStrArr","checkDupes","everything","sorted","dupe","MixedBag","optional","req","owner","documentElement","defaultView","parent","offsetParent","nextSibling","children","child","index","cs","firstChild","fromHtml$1","before","marker","parent$1","insertBefore","after","sibling","append","prepend","firstChild$1","appendChild","appendAt","before$1","elements","append$1","empty","textContent","rogue","remove","removeChild","unwrap","wrapper","children$1","get$1","content","owner$1","docDom","fragment","createDocumentFragment","contentElements","getOuter","container","cloneNode","rawSet","setAttribute","set$1","setAll","attrs","get$2","getAttribute","has$1","hasAttribute","remove$1","removeAttribute","original","isDeep","shallow$1","getHtml","isRecursive","originator","events","warn","DefaultEvents","unique","generate$1","prefix","date","Date","time","getTime","random","Math","floor","idAttr","prefix$1","idAttr$1","write","writeOnly","writable","read$1","generate$2","make","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","markAsBehaviourApi","apiName","apiFunction","endIndex","openBracketIndex","parameters","substring","split","toFunctionAnnotation","cleanParameters","markAsExtraApi","extraName","markAsSketchApi","premadeTag","premade","comp","getPremade","spec","makeApi","rest","getApis","NoState","init","nu$5","readState","generateFrom","validated","behaviours","list","optBlobThunk","optBlob","blob","config","getBehaviours","bData","getData","byInnerKey","indexKey","chain","nu$6","classes","attributes","styles","merge$1","defnA","mod","combine","baseMod","modsByBehaviour","behaviour","exhibit","nameAndMod","modification","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","sortKeys","keyName","order","sliced","aKey","bKey","aIndex","bIndex","uncurried","purpose","curried","cHandler","curryArgs","descHandler","extraArgs","getCurried","behaviourTuple","nameToHandlers","groupByEvents","behaviourEvents","combine$1","eventOrder","byEventName","combineGroups","assemble","rawHandler","missingOrderError","eventName","tuples","fuse$1","sortedTuples","combined","assembled","toInfo","toDefinition","domChildren","components","toModification","domModification","toEvents","read$2","attr","add","remove$2","supports","classList","get$3","add$1","clazz","remove$3","add$2","cleanClass","remove$4","has$2","add$3","remove$5","isSupported","style","getPropertyValue","internalSet","setProperty","internalRemove","removeProperty","set$2","setAll$1","css","setOptions","get$4","getComputedStyle","getUnsafeProperty","getRaw","raw","isValidValue","remove$6","reflow","offsetWidth","get$5","set$3","renderToDom","definition","subject","innerHtml","getBehaviours$1","generateFrom$1","generate$3","getDomDefinition","bList","infoModification","baseModification","getEvents","baseEvents","getMe","systemApi","bBlob","modDefinition","item","subcomponents","connect","newApi","disconnect","syncComponents","subs","hasConfigured","apis","behaviourName","buildSubcomponents","build$1","buildFromSpec","userSpec","_a","specEvents","completeSpec","external","extSpec","uids","userSpecWithUid","prebuilt","premade$1","Dimension","getOffset","h","parseFloat","aggregate","parseInt","isNaN","max","cumulativeInclusions","absoluteMax","EventConfiguration","api","getBoundingClientRect","height","offsetHeight","get$6","getOuter$1","setMax","inclusions","absMax","left","top","translate","Position","boxPosition","box","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","api$1","set$4","get$7","getOuter$2","setMax$1","get$8","_DOC","bounds","width","right","bottom","getBounds","_win","scroll","visualViewport","pageLeft","pageTop","clientWidth","clientHeight","walkUp","navigation","frame","view","pathTo","paths","frameElement","Navigation","find$3","frames","offset","loc","pointed","rect","bounds$1","xy","w","absolute$1","position","closest$2","ancestor$1","descendant$1","closest$3","find$4","queryElem","dependent","dep","manager","ariaId","link","unlink","isAriaPartOf","isPartOf","cat","sequence","findMap","lift2","oa","ob","lift3","oc","unknown$3","eventConfig","makeEventLogger","initialTarget","startTime","logEventCut","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","finishTime","processEvent","status","patterns","NORMAL","noLogger","LOGGING","logger","STOP","getTrace","stack","lines","line","ignoreEvent","monitorEvent","menuFields","itemFields","itemSchema","_initSize","itemMarkers","tieredMenuMarkers","markers","onPresenceHandler","fieldName","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","snapshot","initSize","nu$7","adt$2","southeast","southwest","northeast","northwest","south","north","east","west","cata","cataVertical","middle","cataHorizontal","eastX","anchor","middleX","westX","northY","southY","centreY","eastEdgeX","westEdgeX","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","west$1","all$2","allRtl","belowOrAbove","belowOrAboveRtl","executeEvent","bConfig","bState","executor","loadEvent","active","configSchema","schemaSchema","doCreate","createModes","modes","wrapApi","bName","revokeBehaviour","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$1","modeSchema","createModes$1","branchKey","chooseChannels","channels","universal","events$1","receiveConfig","channelMap","targetChannels","channelInfo","channelSchema","onReceive","ActiveReceiving","ReceivingSchema","Receiving","posConfig","useFixed","ActivePosition","focus$1","blur","hasFocus","activeElement","_doc","preserve","ownerDoc","refocus","focused","oldFocus","newFocus","allAlignments","nu$8","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","classesOn","classesOff","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","decision","adt$3","relative","fixed","positionWithDirection","posName","decisionX","decisionY","decisionWidth","decisionHeight","decisionRight","decisionBottom","direction","reposition","origin","toBox","rel","viewport$1","pos","removeScroll","outerScroll","cata$1","onNone","onRelative","onFixed","nu$9","onDirection","isLtr","isRtl","getDirection","schema$1","get$9","defaultLtr","defaultRtl","ltr","layouts","ls","onLtr","rtl","onRtl","placement","anchorInfo","hotspot","anchorBox","bubble","overrides","placer","HotspotAnchor","placement$1","MakeshiftAnchor","zeroWidth","create$2","SimRange","adt$4","on","cata$2","onBefore","onOn","onAfter","getStart","situ","before$2","after$1","Situ","adt$5","domRange","exact","exactFromRange","simRange","soffset","finish","foffset","getStart$1","selection","rng","startContainer","startSitu","finishSitu","relative$1","getWin","range$1","Selection","setStart","setStartBefore","setStartAfter","setFinish","setEndBefore","setEnd","setEndAfter","relativeToNative","createRange","exactToNative","toRect","getFirstRect","rects","getClientRects","adt$6","fromRange","startOffset","endContainer","endOffset","getRanges","doDiagnose","ranges","collapsed","reversed","rev","diagnose","asLtrRange","diagnosis","searchForPoint","rectForOffset","maxX","curDeltaX","abs","inRect","NodeValue","getOption","nodeValue","api$2","get$a","locateOffset","textnode","rangeForOffset","collapse","locate","selectNode","foundRect","searchInChildren","nodes","locateNode","locate$1","boundedX","min","boundedY","getEnd","NBSP","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","first","last$1","descendantRtl","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","search$1","caretPositionFromPoint","offsetNode","caretRangeFromPoint","searchTextNodes","searchFromPoint","descendants","makeRange","after$2","same","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","anchorOffset","focusOffset","getExact","getSelection","sel","getFirstRect$1","point","descendOnce","adt$7","screen","toFixed","toAbsolute","sum","points","sumAsFixed","positions","sumAsAbsolute","absolute$2","root","hasSameOwner","frameOwner","compOwner","getRootPoint","capRect","newLeft","newTop","newWidth","newHeight","calcNewAnchor","optBox","rootPoint","topLeft","layoutsLtr","showAbove","layoutsRtl","ContentAnchorCommon","point$1","descendOnce$1","getAnchorSelection","modStart","modFinish","placement$2","selectionBox","optRect","rawRect","targetElement","SelectionAnchor","placement$3","nodeBox","NodeAnchor","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","all$3","allRtl$1","placement$4","submenuInfo","SubmenuAnchor","AnchorSchema","submenu","makeshift","box$1","cycleBy","delta","cap","adt$8","fit","nofit","calcReposition","newX","newY","boundsX","boundsY","boundsWidth","boundsHeight","xInBounds","yInBounds","originInBounds","xFit","yFit","sizeInBounds","deltaW","deltaH","limitX","limitY","attempt","candidateX","candidateY","bubbleLeft","bubbleTop","boundsBottom","boundsRight","upAvailable","downAvailable","maxHeight","westAvailable","eastAvailable","maxWidth","off","candidateYforTest","attempts","elementBox","panelWidth","panelHeight","attemptBestFit","layout","attemptLayout","newReposition","newDeltaW","newDeltaH","improved","abc","bestNext","elementSize","options","preference","setClasses","classInfo","setHeight","maxHeightFunction","setWidth","maxWidthFunction","addPx","newPosition","setMaxHeight","anchored","available","expandable","reparteeOptions","defaultOr","dephault","simple","overrideOptions","go","getFixedOrigin","getRelativeOrigin","place","anchoring","placee","position$1","posState","positionWithin","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","doPlace","vis","getMode","pConfig","pState","PositionApis","PositionSchema","Positioning","fireDetaching","fireAttaching","attach","detachChildren","childComp","replaceChildren","newChildren","deleted","attach$1","attachWith","insertion","doDetach","detach","detachChildren$1","attachSystem","guiSystem","attachSystemWith","attachSystemAfter","inserter","detachSystem","rebuild","sandbox","sConfig","sState","getAttachPoint","built","open","newState","onOpen","setContent","openWhileCloaked","transaction","cloak","decloak","close","onClose","clear","isOpen","isPartOf$1","getState","store","cssKey","newValue","restore","oldValue","sink","cloakVisibilityAttr","hasPosition","SandboxApis","events$2","sandboxConfig","sandboxState","ActiveSandbox","SandboxSchema","contents","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$2","receivingChannel","rawSpec","isPart","isExtraPart","fireEventInstead","fe","schema$3","receivingChannel$1","doReposition","onLoad","repConfig","repState","onUnload","setValue","getValue","getState$1","RepresentApis","events$3","resetOnDom","se","ActiveRepresenting","memory","isNotSet","manual","dataset","dataByValue","dataByText","lookup","itemString","update","items","currentDataByValue","currentDataByText","newDataByValue","newDataByText","meta","init$1","RepresentState","setValue$1","onSetValue","getValue$1","getDataKey","getFallbackEntry","onLoad$1","initialValue","onUnload$1","DatasetStore","getValue$2","setValue$2","onLoad$2","ManualStore","setValue$3","getValue$3","onLoad$3","initVal","onUnload$2","MemoryStore","RepresentSchema","Representing","setValueFrom","source","field$1","forbidden","get$b","dump","augment","SketchBehaviours","_placeholder","adt$9","single","multiple","subPlaceholder","compSpec","placeholders","newSpec","scan","uiType","substitute","childSpecs","substituted","valuesThunk","preprocessor","preprocess","substituteAll","oneReplace","replacements","used","substitutePlaces","ps","ph","placeholder","adt$a","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","asCommon","convert","adtConstructor","partSchema","external$1","PartType","combine$2","partSpec","partValidated","defaults","internals","externals","pname","factory","_partSpec","_partValidated","units","u","generate$4","np","g","doGenerateOne","generateOne","schemas","names","substitutes","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","partSchemas","partUidsSchemas","asRawOrDie$1","baseS","single$1","specWithUid","supplyUid","composite","partUidsSchema","components$1","isSketchSpec","FocusInsideModes","singleSchema","compositeSchema","single$2","rawConfig","configFields","extraApis","partFields","composite$1","inside","getCurrent","composeConfig","composeState","ComposeApis","ComposeSchema","Composing","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","dehighlightAll","dehighlight$1","isHighlighted","highlight$1","onHighlight","highlightFirst","getFirst","firstComp","highlightLast","getLast","lastComp","highlightAt","getByIndex","highlightBy","getCandidates","targetComp","queryTarget","getHighlighted","itemClass","getDelta","selected","dest","getPrevious","getNext","HighlightApis","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","shiftKey","isControl","ctrlKey","isNotShift","rule","classification","choose$2","transitions","transition","reportFocusShifting","prevFocus","noChange","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","rules","onFocusHandler","focusInside","OnFocusMode","focusIn","tryGoInsideComponent","isEnterOrSpace","OnEnterOrSpaceMode","create$3","cyclicField","isVisible","tabbingConfig","visibilitySelector","findInitial","tabstops","visibles","firstTabstop","findCurrent","focusManager","isTabstop","useTabstopAt","goFromTabstop","stopIndex","cycle","cyclic","tabstop","optStopIndex","goBackwards","tabbingState","navigate","goForwards","onEnter","exit","onEscape","AcyclicType","CyclicType","doDefaultExecute","defaultExecute","stopEventForFirefox","schema$4","execute$1","executeConfig","executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","ExecutionType","flatgrid","dimensions","setGridSize","numRows","numColumns","getNumRows","getNumColumns","init$2","KeyingState","useH","movement","move","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","isHidden","indexInfo","locate$2","locateVisible","visible","findIndex$1","withGrid","numCols","oldRow","oldColumn","address","newIndex","row","column","cycleHorizontal","onLastRow","colsInRow","newColumn","cycleVertical","newRow","newCol","cycleRight","cycleLeft","cycleUp","cycleDown","schema$5","gridConfig","gridState","execute$2","doMove","identified","handleTab","captureTab","doEscape","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","isDisabledButton","tryCycle","schema$6","findCurrent$1","flowConfig","execute$3","focusIn$1","getInitial","moveLeft$1","moveRight$1","doMove$1","executeOnMove","doEscape$1","_flowState","getKeydownRules$2","_component","_se","westMovers","allowVertical","eastMovers","getKeyupRules$2","FlowType","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","cycleRight$1","cycleLeft$1","cycleUp$1","cycleDown$1","moveLeft$2","moveRight$2","moveUp","moveDown","schema$7","focusIn$2","matrixConfig","previousSelector","selectors","execute$4","toMatrix","rows","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$8","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","fireShiftTab","moveOnTab","fireTab","getKeydownRules$4","getKeyupRules$4","MenuType","schema$9","getKeydownRules$5","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","getKeyupRules$5","stopSpaceKeyup","SpecialType","acyclic","flow","flatgrid$1","execution","menu","special","KeyboardBranches","Keying","keyConfig","keyState","sendFocusIn","set$5","replaceConfig","replaceState","insert","childSpec","append$2","appendee","prepend$1","prependee","remove$7","removee","foundChild","replaceAt","replaceeIndex","replacer","replacee","replaceBy","replaceePred","ReplaceApis","Replacing","events$4","eventHandlers","focus$2","focusConfig","ignore","onFocus","blur$1","isFocused","FocusApis","exhibit$1","tabindex","events$5","stopMousedown","ActiveFocus","FocusSchema","Focusing","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","toggleClass","toggle","set$6","on$1","isOn","onLoad$4","ToggleApis","exhibit$2","events$6","load","toggleOnExecute","ActiveToggle","SetupBehaviourCellState","initialState","updatePressed","syncWithExpanded","updateExpanded","updateSelected","updateChecked","ToggleSchema","pressed","checked","expanded","Toggling","pointerEvents","events$7","optAction","executeHandler","hoverEvent","focusEvent","onHover","hover","focus$3","builder","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$a","builder$1","schema$b","owner$2","builder$2","focusWidget","widget","onHorizontalArrow","autofocus","setSource","widgetBehaviours","schema$c","itemSchema$1","separator","configureGrid","movementInfo","configureMatrix","rowSelector","configureMenu","parts$1","itemInfo","unit","fakeFocus","schema$d","grid","focus$4","make$1","menuBehaviours","selectedItem","role","Menu","transpose","trace","byItem","byMenu","triggerItem","triggerMenu","generate$5","menus","expansions","menuItems","menuPaths","_triggerItem","init$3","primary","directory","isClear","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","dir","sPaths","getTriggeringItem","menuValue","getTriggerData","getItemByValue","getPreparedMenu","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggeringPath","itemValue","extraPath","lookupItem","revPath","triggers","menuIndex","expand","refresh","lookupMenu","extractPreparedMenu","otherMenus","menuValues","getPrimary","getMenus","prep","LayeredState","make$2","rawUiSpec","ExpandHighlightDecision","submenuParentItems","buildMenus","primaryName","makeSketch","nbMenu","layeredState","setup","componentMap","toDirectory","getItemValue","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","getSubmenuParents","parentItems","itemComp","updateAriaExpansions","updateMenuPath","latestMenuName","menuPrep","activeMenu","buildIfRequired","expandRight","HighlightSubmenu","activeMenuPrep","onOpenSubmenu","collapseLeft","onCollapseMenu","updateView","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","HighlightParent","getActiveItem","collapseMenuApi","currentItem","highlightPrimary","extractMenuFromContainer","repositionMenus","maybeActivePrimary","allMenus","preparedMenus","primaryMenu","onRepositionMenu","collapseMenu","tmenuBehaviours","keyInfo","selectedMenu","collapseItem","tieredData","singleData","collapseItem$1","tieredMenu","tmenu","makeMenu","menuSandbox","menuSpec","lazySink","isFirstTierSubmenu","triggeringPaths","getSubmenuLayouts","submenuTriggers","st","submenuLayouts","isPartOfRelated","related","getRelated","thing","showAt","showWithin","showWithinBounds","showMenuAt","showMenuWithinBounds","hide","getContent","inlineBehaviours","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","InlineView","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","factory$1","lookupAttr","getModAttributes","roleAttrs","buttonBehaviours","Button","record","anyInSystem","getOpt","asSpec","defaultIcon","icons","get$c","getFirst$1","notificationIconMap","success","warning","factory$2","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","icon","level","iconProvider","onAction","Notification","global$2","NotificationManagerImpl","editor","extras","uiMothership","backstage","getLayoutDirection","prePositionNotifications","notifications","notification","moveTo","positionNotifications","firstItem","moveRel","getEl","settings","closeCallback","notificationWrapper","progressBar","shared","providers","getSink","timeout","setTimeout","layoutDirection_1","nodeAnchor","anchors","nuText","getArgs","ItemResponse","first$1","rate","timer","cancel","clearTimeout","throttle","last$2","global$3","isText$1","isBoundary","isBlock","getContentEditable","outcome$1","aborted","phase","kontinue","repeat","process","walker","recent","terminate","recurse","repeatLeft","rootNode","getRoot","prev","autocompleteSelector","create$4","detect$4","getNode","getDoc","extractContents","insertNode","elm","normalize","setCursorLocation","isValidTextRange","whiteSpace","parse","minChars","char","charAt","getText","findStart","initRange","findTriggerCh","optOffset","newText","cloneRange","triggerChar","getContext","createRng","onKeypress","redirectKeyToItem","getItem","getView","isActive","cancelIfNecessary","isMenuOpen","stopImmediatePropagation","isProcessingAction","AutocompleterEditorEvents","global$4","point$2","isText$2","isElement$1","toLast","toLeaf","isStartOfWord","leaf","getTriggerContext","database","triggerChars","getDatabase","getRng","context","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","lookupData","ac","fetchResult","fetch","maxResults","then","matchText","columns","separatorMenuItemSchema","createSeparatorMenuItem","autocompleterItemSchema","autocompleterSchema","createSeparatorItem","createAutocompleterItem","createAutocompleter","stringArray","register","popups","ui","registry","getAll","popup","datasetValues","dv","commonMenuItemFields","menuItemSchema","createMenuItem","nestedMenuItemSchema","createNestedMenuItem","toggleMenuItemSchema","createToggleMenuItem","choiceMenuItemSchema","createChoiceMenuItem","fancyTypes","fancyMenuItemSchema","createFancyMenuItem","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","ceil","namedEvents","unnamedEvents","SimpleBehaviours","TooltippingSchema","init$4","getTooltip","setTooltip","clearTooltip","clearTimer","resetTimer","delay","isShowing","TooltippingState","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","tState","setComponents","specs","tooltip","TooltippingApis","events$8","tooltipConfig","show","tooltipDom","tooltipComponents","receivingData","ActiveTooltipping","Tooltipping","getAttrs","fromHtml$2","global$5","navClass","selectableClass","colorClass","presetClasses","normal","color","tickedClass","groupHeadingClass","iconClass","textClass","accessoryClass","caretClass","checkmarkClass","activeClass","iconClassRtl","classForPreset","presets","global$6","convertText","mac","alt","ctrl","access","other","shortcut","updated","segment","ConvertShortcut","renderIcon","iconHtml","renderText","renderHtml","renderStyledText","styleAttr","renderShortcut","renderCheckmark","renderSubmenuCaret","renderDownwardsCaret","renderColorStructure","itemText","iconSvg","providerBackstage","colorPickerCommand","removeColorCommand","getDom","common","title","optComponents","renderNormalItemStructure","renderIcons","textRender","rtlClass","leftIcon","checkMark","domTitle","ariaLabel","htmlContent","menuItem","shortcutContent","caret","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","fallbackIcon","getIconName","iconName","needRtlClass","iconContent","nativeDisabled","onLoad$5","disableConfig","disableState","disabled","disable","hasNative","useNative","nativeIsDisabled","nativeDisable","nativeEnable","ariaIsDisabled","ariaDisable","ariaEnable","disableClass","onDisabled","enable","onEnabled","isDisabled","set$7","DisableApis","exhibit$3","events$9","ActiveDisable","DisableSchema","Disabling","button","splitButton","toolbarButton","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","ItemResponse$1","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","structure","buildData","global$7","tooltipBehaviour","sharedBackstage","tooltipWorker","_tooltip","escapeRegExp","encodeText","DOM","encode","replaceText","translated","encoded","escapedMatchRegex","RegExp","renderAutocompleteItem","useText","onItemValueHandler","_api","renderChoiceItem","isSelected","setActive","setDisabled","parts$2","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","emitCellOver","makeCells","cells","selectCells","selectedRow","selectedColumn","makeComponents","cellRow","makeLabelText","renderInsertTableMenuItem","sizeLabelId","memLabel","hexColour","hexString","shorthandRegex","longformRegex","isHexString","hex","getLongForm","extractValues","longForm","splitForm","exec","toHex","fromRgba","rgbaColour","red","green","blue","round","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","redColour","global$8","storageName","ColorCache","storageString","localstorage","prune","diff","cache","unshift","pop","setItem","idx","choiceItem","defaultColors","colorCache","mapColors","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","bg","colorByteWithWhiteBg","toUpperCase","asHexColor","clearRect","fillStyle","fillRect","getImageData","getColorCols","defaultCols","getParam","hasCustomColors","getColorMap","getColors","unmapped","getCurrentColors","addColor","Settings","fireSkinLoaded","fire","fireResizeEditor","fireBeforeRenderUI","fireResizeContent","fireScrollContent","fireTextColorChange","Events","getCurrentColor","format","getParents","applyFormat","undoManager","transact","formatter","nodeChanged","removeFormat","registerCommands","addCommand","calcCols","sqrt","getColorCols$1","getAdditionalColors","hasCustom","applyColor","onChoice","dialog","colorPickerDialog","colorOpt","execCommand","getMenuColors","getFetch","callback","setIconColor","splitButtonApi","newColor","setIconFillAndStroke","pathId","setIconFill","setIconStroke","registerTextColorButton","lastColor","addSplitButton","select","optCurrentRgb","currentRgb","currentHex","onItemAction","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","getOnSubmit","colorpicker","details","initialData","submit","windowManager","buttons","onSubmit","onCancel","register$1","lastForeColor","lastBackColor","ColorSwatch","chunk$1","rowDom","chunks","forSwatch","forToolbar","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","forHorizontalCollection","forMenu","hasIcons","markers$1","menuClasses","dom$1","hasIcon","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","createPartialMenuWithAlloyItems","createPartialChoiceMenu","presetItemTypes","alloyItems","createChoiceItems","itemPresets","deriveMenuMovement","menuMarkers","rowClass","deriveCollectionMovement","renderColorSwatchItem","colorinput","widgetSpec","FocusMode","fancyMenuItems","inserttable","colorswatch","valueOpt","renderFancyMenuItem","render","renderNormalItem","renderNestedItem","downwardsCaret","renderSeparatorItem","renderToggleMenuItem","autocomplete","nested","toggle$1","fancy","hasIcon$1","menuHasIcons$1","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createAutocompleteItems","createPartialMenu","itemHasIcon","createItem","createPartial","createTieredDataFrom","partialMenu","createMenuFrom","focusMode","ContentFocus","register$2","activeAutocompleter","processingAction","hideIfNecessary","lastElement","getAutocompleters","getCombinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","commenceIfNecessary","matchLength","display","ld","doLookup","newContext","lookupInfo","combinedItems","autocompleterUiApi","Autocompleter","mkEvent","kill","fromRawEvent","rawEvent","stopPropagation","clientX","clientY","handle","binder","useCapture","wrapped","addEventListener","unbind","bind$2","capture","removeEventListener","filter$1","bind$3","capture$1","fromRawEvent$1","closest$4","DelayedFunction","fun","ref","schedule","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","touches","isFarEnough","touch","distX","distY","monitor","startData","longpressFired","longpress$1","handleTouchstart","handleTouchmove","handleTouchend","isSame","fireIfReady","isDangerous","keyEv","settingsSchema","bindFocus","bindBlur","setup$1","rawSettings","tapEvent","simpleEvents","tapStopped","stopped","pasteTimeout","onPaste","onKeydown","stopBackspace","onFocusIn","focusoutTimeout","onFocusOut","derive$2","rawTarget","getTarget","fromSource","isStopped","isCut","fromExternal","adt$b","resume","complete","doTriggerHandler","eventType","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerHandler","listeners","listener","triggerUntilStopped","triggerOnUntilStopped","broadcastHandler","EventRegistry","registerId","findHandler","reader","filterByType","isAboveRoot","readType","unregisterId","handlersById","Registry","readOrTag","failOnDuplicate","tagId","conflict","unregister","getById","ToolbarDrawer","factory$3","domWithoutAttributes","containerBehaviours","Container","takeover","domEvents","_alloyId","broadcast$1","destroy","broadcastData","receivers","receiver","global$9","getSkinUrl","skin","skinUrl","skin_url","skinName","documentBaseURI","baseURL","isReadOnly","isSkinDisabled","getHeightSetting","getElement","getWidthSetting","getStyle","getMinWidthSetting","min_width","getMinHeightSetting","min_height","getMaxWidthSetting","getMaxHeightSetting","getUserStyleFormats","isMergeStyleFormats","getRemovedMenuItems","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbarKeys","toolbars","toolbarArray","getToolbarDrawer","fixedContainerSelector","fixedContainerElement","inline","useFixedContainer","getUiContainer","fixedContainer","isDistractionFree","isStickyToolbar","isDraggableModal","SIGNIFICANT_MOVE$1","LONGPRESS_DELAY$1","getTouch$1","isFarEnough$1","setup$2","debounceLongpress","isEqualNode","isDefaultPrevented","TouchEvents","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderAlertBanner","iconTooltip","url","renderBar","interpreter","schema$e","parts$3","excludeFactory","factory$4","fieldBehaviours","descriptor","descriptorId","getField","getLabel","FormField","schema$f","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","dom$2","inputAttributes","inputStyles","inputClasses","factory$5","Input","exports$1","define","require","amd","global","EphoxContactWrapper","code","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","runClearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","thisArg","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","_unhandledRejectionFn","Handler","reason","ex","prom","remaining","race","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","Global","boltExport","HighlightOnOpen","nu$a","baseFn","callbacks","nCallback","isReady","cbs","pure$1","LazyValue","errorReporter","make$3","fab","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","nu$b","pure$2","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","validatorInfo","validate","run$1","onValidate","valid","isInvalid","InvalidateApis","events$a","onEvent","validateOnLoad","ActiveInvalidate","InvalidateSchema","Invalidating","validation","exhibit$4","tabConfig","tabAttr","ActiveTabstopping","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormField","renderFormFieldDomWith","renderFormFieldDom","renderLabel","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingApis","CouplingSchema","init$5","coupled","CouplingState","Coupling","partType","getAnchor","getHotspot","getAnchorOverrides","mapFetch","fetcher","openF","highlightOnOpen","futureData","getLazySink","tdata","HighlightFirst","open$1","onOpenSync","processed","close$1","_externals","_onOpenSync","_highlightOnOpen","togglePopup","showing","matchWidth","useMinWidth","buttonWidth","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","sandboxFields","schema$g","parts$4","factory$6","_spec","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","Dropdown","exhibit$5","unselectConfig","unselectable","events$b","ActiveUnselecting","Unselecting","renderPanelButton","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","colorPicker","colorButton","hsvColour","fromRgb","minRGB","maxRGB","calcHex","rgb","fieldsUpdate","sliderUpdate","paletteUpdate","platform$1","labelPart","edgePart","model","edgeActions","touchEvents","mouseEvents","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","modelDetail","getValueFromEvent","spectrum","SliderParts","isTouch$1","_sliderChangeEvent","sliderChangeEvent","getEventSource","evt","touchEvent","mouseEvent","r$1","minX","minY","min1X","min1Y","maxY","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange","setToTLEdgeXY","setToTEdge","setToTEdgeXY","setToTREdgeXY","setToREdge","setToREdgeXY","setToBREdgeXY","setToBEdge","setToBEdgeXY","setToBLEdgeXY","setToLEdge","setToLEdgeXY","reduceBy","increaseBy","capValue","snapValueOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","numSteps","findOffsetOf","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBounds$1","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","sliderVal","setToMin","setToMax","moveBy","handleMovement","findOffsetOfValue$1","minEdge","maxEdge","minOffset","findPositionOfValue","slider","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","HorizontalModel","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","setValueFrom$1","setToMin$1","setToMax$1","moveBy$1","handleMovement$1","getValueFromEvent$1","findOffsetOfValue$2","findPositionOfValue$1","setPositionFromValue$1","getTopEdge","getBottomEdge","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","fireSliderChange$3","sliderValue$2","setValueFrom$2","moveBy$2","isVerticalMovement","handleMovement$2","setToMin$2","mX","mY","setToMax$2","getValueFromEvent$2","setPositionFromValue$2","xPos","yPos","thumbXRadius","thumbYRadius","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","isTouch$2","SliderSchema","isTouch$3","getThumb","changeValue","onChange","resetToMin","resetToMax","_simulatedEvent","onDragStart","onDragEnd","uiEventsArr","sliderBehaviours","fireOnChoose","onChoose","wasDown","getInitialValue","onInit","Slider","sliderFactory","getClass","_thumb","HueSlider","owner$3","schema$h","getPartName","sketch$1","fSpec","fieldParts","make$4","toResult$1","formBehaviours","form","resPs","resPThunk","pName","Form","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","isValid","renderTextField","description","helptext","comps","concats","copyRgbToHex","hexField","copyRgbToForm","memPreview","updatePreview","preview","copyHexToRgb","setValueRgb","getValueRgb","onInvalidInput","onValidHex","onValidRgb","isHexInputEvent","onValidInput","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","rgbFormSketcher","RgbForm","paletteFactory","_translate","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","setSliderColour","_detail","_slider","saturationBrightnessPaletteSketcher","setRgba","_apis","SaturationBrightnessPalette","makeFactory","rgbForm","onInvalidHex","sbPalette","paletteRgba","memPalette","memRgb","updatePalette","palette","updateFields","runUpdates","updates","paletteUpdates","oldRgb","hsvColour$1","newHsvColour","nuHex","sliderUpdates","colourPickerSketcher","ColourPicker","self$1","memento","mem","childAt","ComposingConfigs","english","getEnglishText","translate$1","renderColorPicker","colourPickerFactory","memPicker","picker","optRgbForm","optHex","formValues","pattern","global$a","isOldCustomEditor","renderCustomEditor","editorApi","memReplaced","ta","scriptId","scriptUrl","ea","cvalue","ed","processors","memento$1","rawProcessors","rawValue","postprocess","withComp","optInitialValue","setter","withElement","domValue","domHtml","memory$1","RepresentingConfigs","extensionsAccepted","filterByExtension","files","re","file","renderDropZone","actions","onDrop","transferEvent","handleFiles","dataTransfer","onSelect","memInput","accept","renderField","inputComp","renderGrid","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","onFocus$1","isPseudoStop","NavigableObject","platformNeedsSandboxing","getDynamicSource","isSandbox","cachedValue","frameComponent","contentWindow","renderIFrame","sandboxed","sourcing","create$5","resize","clone$1","tCanvas","get2dContext","drawImage","getWidth","image","naturalWidth","getHeight","naturalHeight","asap","immediateFn","catch","values_1","Promise$1","blobToImage","blobUrl","URL","createObjectURL","Image","removeListeners","loaded","src","dataUriToBlobSync","uri","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlob","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","canvasToDataURL","blobToCanvas","revokeImageUrl","blobToDataUri","FileReader","onloadend","readAsDataURL","revokeObjectURL","create$6","getCanvas","initialType","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","dataurl","toCanvas","fromBlob","fromCanvas","blobToImageResult","clamp","parsedValue","identity$1","DELTA_INDEX","multiply","matrix1","matrix2","out","adjustContrast","adjustBrightness","adjustColors","adjustR","adjustG","adjustB","colorFilter","ir","applyColorFilter","applyMatrix","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","pixels","putImageData","convoluteFilter","applyConvoluteFilter","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","scy","innerOffset","wt","pixelsIn","pixelsOut","functionColorFilter","colorFn","filterImpl","applyLookup","complexAdjustableColorFilter","matrixAdjustFn","adjust","basicColorFilter","basicConvolutionFilter","kernel","invert","contrast","colorize","sharpen","gamma","pow","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","angle","applyRotate","translateX","translateY","PI","flip","axis","applyFlip","crop","applyCrop","resize$1","newCanvas","invert$1","sharpen$1","gamma$1","colorize$1","brightness$1","contrast$1","flip$1","crop$1","resize$2","rotate$1","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","onToolbarButtonExecute","itemApi","buttonApi","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","memDropdown","displayText","displayIcon","isMenuItemReference","isExpandingMenuItem","separator$1","unwrapReferences","realItems","getFromExpandingItem","submenuItems","newMenus","newExpansions","getFromItem","generateValueIfRequired","itemWithValue","newData","build$2","mainMenu","submenus","getMenuButtonApi","renderMenuButton","getFetch$1","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","isMenuFooterButtonSpec","isNormalFooterButtonSpec","renderFooterButton","memButton_1","menuButtonSpec","fixedSpec","renderDialogButton","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$5","locked","lockClass","factory$7","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","FormCoupledInputs","formatSize","unitDec","maxDecimal","numText","parseSize","sizeText","numPattern","convertUnit","inInch","supported","noSizeConversion","ratioSizeConversion","makeRatioConverter","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","newSize","optCurrent","optOther","value1","value2","undo","redo","zoom","back","swap","tempTransform","transformApply","internal","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","emitTempTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","createSpacer","createApplyButton","makeCropTransform","getRect","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","makeResizeTransform","resizePanelComponents","sizeInput","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","variableFilterPanelComponents","createVariableFilterPanel","filterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","cropPanelUpdate","_anyInSystem","showCrop","resizePanelUpdate","measurements","getMeasurements","sharpenTransform","invertTransform","buttonPanelComponents","getApplyButton","global$b","global$c","global$d","global$e","global$f","getDocumentSize","scrollWidth","scrollHeight","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","drag","startX","startY","handleElement","getElementById","handleElm","cursor","docSize","screenX","screenY","runtimeStyle","zIndex","opacity","appendTo","deltaX","deltaY","create$7","currentRect","viewPortRect","clampRect","containerElm","instance","dragHelpers","blockers","handles","xMul","yMul","getAbsoluteRect","outerRect","relativeRect","getRelativeRect","innerRect","getInnerRect","moveRect","startRect","setInnerRect","createDragHelper","blocker","repaint","activeHandle","moveAndBlock","keyCode","SPACEBAR","toggleVisibility","updateElementRect","setRect","setViewPortRect","setClampRect","helper","extend","CropRect","loadImage","renderImagePanel","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","img","panelW","panelH","cRect","zoomFit","updateSrc","aImg","lastViewRect","viewRect","inflate","currentZoom","newZoom","newRect","setButtonEnabled","enabled","renderSideBar","updateButtonUndoStates","undoEnabled","redoEnabled","memUndo","memRedo","UndoStack","removed","canUndo","canRedo","Delimiter","makeState","blobState","tempState","undoStack","getBlobState","setBlobState","getTempState","temp","updateTempState","newTempState","createState","destroyTempState","destroyState","destroyStates","states","addBlobState","addTempState","applyTempState","postApply","currentState","getHistoryStates","renderImageTools","historyStates","sideBar","disableUndoRedo","oImg","unblock","imageResultToBlob","block","editPanel","applyButton","blobManipulate","manipulate","tempManipulate","manipulateApply","currentUrl","factory$8","initialValues","selectClasses","selectAttributes","selectBehaviours","found","HtmlSelect","renderSelectBox","translatedOptions","chevron","selectWrap","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","flex","extraClasses2","maximized","renderInput","renderTextarea","events$c","streamConfig","streamState","streams","stream","processor","cancelEvent","ActiveStreaming","_config","setTimer","init$6","StreamingState","setup$3","streamInfo","sInfo","throttler","onStream","stopEvent","StreamingSchema","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","setSelectionToEnd","attemptSelectOver","selectsOver","inputDisplay_1","getDisplayText","itemDisplay","itemExecute","make$5","navigateList","highlighter","previewing","focusBehaviours$1","responseTime","focusInInput","previousValue_1","_sandbox","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeahead","typeaheadBehaviours","schema$j","parts$6","populateFromBrowse","Typeahead","wrap$2","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$c","worker","value$2","error$1","fromResult$1","fromFuture","future","fromPromise","completer","FutureResult","separator$2","toMenuItem","staticMenuItem","toMenuItems","targets","filterLinkTargets","filteredTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","historyTargets","history","joinMenuLists","bothEmpty","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","getHistory","errorId","renderUrlInput","updateHistory","urlEntry","addToHistory","filetype","memUrlBox","getValidationHandler","memInvalidIcon","invalidComp","_menu","_entry","makeIcon","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","controlHWrapper","openUrlPicker","urlData","chosenData","renderCheckbox","repBehaviour","toggleCheckboxHandler","className","memIcons","renderHtmlPanel","renderLabel$2","backstageShared","renderCollection","runOnItem","escapeAttribute","htmlLines","mapItemName","collectionEvents","tgt","currentActive","renderTable","renderTh","renderHeader","header","renderTd","renderTr","renderRows","renderPanel","make$6","makeIframe","iframeSpec","factories","bar","collection","alertbanner","textarea","iframe","checkbox","dropzone","selectbox","sizeinput","urlinput","customeditor","htmlpanel","imagetools","table","noFormParts","_name","interpretInForm","oldBackstage","newBackstage","interpretParts","interpretWithoutForm","expandable$1","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getToolbarAnchor","bodyElement","lazyAnchorbar","useFixedToolbarContainer","fixedToolbarAnchor","standardAnchor","getBannerAnchor","getToolbarOverflowAnchor","lazyMoreButton","getCursorAnchor","getNodeAnchor","getAnchors","toolbarOverflow","Anchors","hasCustomColors$1","getColors$1","getColorCols$2","ColorInputBackstage","isDraggableModal$1","DialogBackstage","defaultStyleFormats","isNestedFormat","isBlockFormat","isInlineFormat","isSelectorFormat","mapFormats","userFormats","fmt","customFormats","formats","formatName","registerCustomFormats","registerFormats","getStyleFormats","registeredUserFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$3","enrichSupported","enrichMenu","submenuSpec","enrichCustom","customSpec","newItem","doEnrich","newItems_1","getStyleItems","init$7","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","trim$1","hasContentEditableState","contentEditable","isContentEditableTrue","isContentEditableFalse","create$8","isChildOfContentEditableTrue","getElementText","innerText","getOrGenerateId","isAnchor","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","elms","getAnchorTargets","getTargetElements","hasTitle","find$5","LinkTargets","STORAGE_KEY","HISTORY_LENGTH","isHttpUrl","isArrayOfUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","localStorage","SyntaxError","setAllHistory","itemsWithoutUrl","hasOwnProperty$2","isTruthy","makeMap","getTextSetting","defaultValue","getPicker","file_picker_callback","getPickerTypes","optFileTypes","file_picker_types","optLegacyTypes","file_browser_callback_types","optTypes","_picker","types","getPickerSetting","pickerTypes","entry","typeahead_urls","optValidator","file_picker_validator_handler","filepicker_validator_handler","UrlInputBackstage","init$8","contextMenuState","styleselect","isContextMenuOpen","setContextMenuState","showContextToolbarEvent","hideContextToolbarEvent","schema$k","enhanceGroups","parts$7","factory$9","setGroups","groups","getGroupContainer","shell","toolbarBehaviours","Toolbar","generate$6","output$1","apportion","total","parray","within","withinWidth","toUnit","fitLast","fits","overflow","overflower","fitAll","tryFit","divide","partition$3","setStoredGroups","storedGroups","bGroups","findFocusedComp","overflowButton","overf","focusedElm","overflowGroup","focusedComp","builtGroups","overflows","schema$l","parts$8","factory$a","tgroupBehaviours","itemSelector","ToolbarGroup","schema$m","toolbarToggleEvent","doSetGroups","getMoreButton","splitToolbarBehaviours","coupling","_button","schema$n","parts$9","overflowToggledClass","toggleToolbar","isOpen$1","over","position$2","getOverflowBounds","bounder","refresh$1","reposition$1","makeSandbox$1","factory$b","spec$1","getOverflow","SplitFloatingToolbar","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","shrinker","doStartGrow","wasShrinking","beforeSize","fullSize","startPartialGrow","startCompleteGrow","setStartSize","setExpanded","onStartGrow","refresh$2","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isGrowing","isShrinking","isTransitioning","toggleGrow","SlidingApis","exhibit$6","events$d","propertyName","onGrown","ActiveSliding","SlidingSchema","init$9","SlidingState","Sliding","schema$o","parts$a","onClosed","onOpened","toggleToolbar$1","refresh$3","isOpen$2","factory$c","SplitSlidingToolbar","toolbarHeightChange","ReadOnlyChannel","ReadOnlyDataSchema","setDisabledAll","forEach","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","toggleToReadOnly","setupReadonlyModeSwitch","setMode","createReadonlyReceivingForOverflow","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","overflowXOffset","headerElem","moreDrawerData","lazyHeader","headerBounds","docElem","docBounds","renderSlidingMoreToolbar","renderToolbar","scrolling","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","createSplitButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","createContextToolbar","createContextForm","getState$2","reflectState","ReflectingApis","events$e","reflectingConfig","reflectingState","updateState","renderComponents","newComponents","channel","rawData","ActiveReflecting","init$a","optS","ReflectingState","ReflectingSchema","Reflecting","schema$p","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$b","factory$d","openMenu","executeOnButton","buttonEvents","ariaDescriptor","splitDropdownBehaviours","SplitDropdown","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","needsRtlClass","renderCommonToolbarButton","specialisation","toolbarButtonBehaviours","renderToolbarButton","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButton","renderToolbarToggleButtonWith","fetchChoices","renderSplitButton","displayChannel","underlinePath","buttonComp","getFormApi","runOnExecute$1","formApi","renderContextButton","bridged","renderContextToggleButton","generateOne$1","generate$7","mementos","asSpecs","findPrimary","compInSystem","renderContextForm","toolbarType","commands","ContextForm","getHorizontalBounds","contentAreaBox","viewportBounds","contentBoxWidth","maxViewportWidth","getIframeBounds","containerBox","headerBox","contentBoxHeight","maxViewportHeight","getInlineBounds","vpHeight","vpTop","getDistractionFreeBounds","_editor","getContextToolbarBounds","toolbarOrMenubarEnabled","getContentAreaContainer","ancestor$2","transformed","matchTargetWith","toolbarApi","lookup$1","scopes","startNode","inNodeScope","inEditorScope","ToolbarLookup","categorise","contextToolbars","forms","formNavigators","lookupTable","registerForm","contextForm","launch","registerToolbar","contextToolbar","ToolbarScopes","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","renderContextToolbar","currentWidth","newContents","oldContents","forwardContents","onSetupFormatToggle","unbindCell","formatChanged","initialized","onActionToggleFormat","rawItem","generateSelectItems","generateItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","setInitialValue","nodeChangeHandler","rawFormats","buildBasicStaticDataset","ResizeTypes","delimiter","SemiColon","buildBasicSettingsDataset","settingName","alignMenuItems","getSpec","getMatchingValue","_format","updateSelectMenuIcon","alignment","canApply","createAlignSelect","alignSelectMenu","defaultFontsFormats","systemStackFonts","splitFonts","fontFamily","fonts","font","isSystemFontStack","matchesSystemStack","getSpec$1","getFirstFont","queryCommandValue","matchOpt","updateSelectMenuText","createFontSelect","fontSelectMenu","defaultFontsizeFormats","legacyFontSizes","round$1","precision","factor","toPt","fontSize","toLegacy","getSpec$2","px","_loop_1","pt","legacy","Space","createFontsizeSelect","fontsizeSelectMenu","findNearest","getStyles","parents","matchNode","getCurrentSelectionParents","currentNode","defaultBlocks","getSpec$3","nodeChangeEvent","detectedFormat","createFormatSelect","formatSelectMenu","getSpec$4","getFormatItems","flattenedItems","createStyleSelect","styleSelectMenu","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","styleSelectButton","fontsizeSelectButton","fontSelectButton","formatButton","alignMenuButton","extractFrom","bespokeButtons","fontsizeselect","fontselect","formatselect","align","removeUnusedDefaults","filteredItemGroups","subItem","convertStringToolbar","strToolbar","groupsStrings","isToolbarGroupSettingArray","createToolbar","toolbarConfig","lookupButton","toolbarItem","prefixes","identifyButtons","toolbarGroups","bubbleSize","bubbleAlignments$1","anchorOverrides","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","getAnchorLayout","register$4","registryContextToolbars","contextbar","isRangeOverlapping","aTop","aBottom","bTop","bBottom","getLastElementVerticalBound","nodeBounds","ele","diffTop","shouldContextToolbarHide","lastElementBounds","contextToolbarBounds","forceHide","hideOrRepositionIfNecessary","lastAnchor","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","default","allButtons","toolbarKey","launchContext","sElem","launchContextToolbar","setEditorTimeout","ContextToolbar","setup$4","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onWindowScroll","onWindowResize","onEditorResize","Events$1","parts$c","partType$1","schema$q","customListDetail","itemsPart","parts$d","name$2","factory$e","setItems","getListContainer","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","listBehaviours","CustomList","getOrigin","isFixed","offsetParent$1","adt$c","subtract","add$4","transform$1","changes","asFixed","coord","asAbsolute","asOffset","withinRange","coord1","coord2","getDeltas","toStyles","translate$2","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","absolute$3","fixed$1","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isPartiallyVisible","isTopCompletelyVisible","isBottomCompletelyVisible","isVisibleForModes","getAttr","getPrior","dockInfo","leftAttr","topAttr","setPrior","absLeft","absTop","positionAttr","clearPrior","revertToOriginal","morphToOriginal","morphToFixed","lazyOrigin","asFixed$1","viewportPt","fixedViewport","fixedY","getMorph","isDocked","getMorphToOriginal","morphToStatic","onUndocked","morphToCoord","morph","method","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","setVisible","refreshInternal","lazyViewport","setDocked","resetInternal","refresh$4","reset","DockingApis","events$f","dockState","onShown","onHidden","ActiveDocking","DockingSchema","init$b","docked","DockingState","Docking","visibility","editorStickyOnClass","editorStickyOffClass","updateIframeContentFlow","parentElem","parentWidth","headerHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","restoreFocus","focusedElem","activeElm","findFocusedElem","rootElm","setup$5","isDocked$1","getIframeBehaviours","getBehaviours$2","runOnSinkElement","onDockingSwitch","additionalBehaviours","boxHeight","StickyHeader","setup$6","isDocked$2","getBehaviours$3","StaticHeader","sticky","factory$f","setMenus","activeButton","hoveredButton","activeComp","hoveredComp","SilverMenubar","owner$4","schema$r","getPartName$1","sketch$2","sSpec","slot","make$7","getSlotNames","getSlot","onSlot","def","onSlots","doShowing","doShow","doHide","hideSlot","hideSlots","hideAllSlots","showSlot","slotBehaviours","slotApis","SlotContainer","sidebarSchema","createSidebar","setup$7","sidebars","addToggleButton","handleToggle","makePanels","panelConfigs","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","setSidebar","sidebar","optSlider","toggleSidebar","optSlotContainer","whichSidebar","sidebarOpen","fixSize","autoSize","renderSidebar","renderSpinner","toggleThrobber","renderThrobber","setup$8","lazyThrobber","throbberState","timerId","factory$g","getSocket","getHeader","getToolbar","setToolbar","setToolbars","mToolbar","refreshToolbar","getThrobber","focusToolbar","optToolbar","setMenubar","menubar","focusMenubar","partMenubar","toolbarFactory","sliding","floating","partMultipleToolbar","tc","partToolbar","renderer","lazyToolbar","partHeader","partSocket","partSidebar","partThrobber","OuterContainer","grps","grp","renderedToolbars","defaultMenubar","defaultMenus","edit","tools","help","make$8","removedMenuItems","itemName","removedMenuItem","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","isNotSeparator","fireSkinLoaded$1","_skinLoaded","SkinLoaded","loadSkin","isInline","skinUiCss","contentCSS","styleSheetLoader","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","setupEvents","initialDocEle","lastWindowDimensions","innerWidth","innerHeight","lastDocumentDimensions","docEle","outer","inner","elementLoad","lastToolbarWidth","targetNode","socket","limit","addQueryValueHandler","drawer","refreshDrawer","iframeContainer","Iframe","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","Utils","getHeight$1","baseHeight","minHeight","getHeightWithFallback","getWidth$1","baseWidth","minWidth","getWidthWithFallback","render$1","floatContainer","isSticky","targetElm","editorMaxWidthOpt","splitSetting","updateChromePosition","tbar","location","bodyMargin","updateChromeUi","resetDocking","addClass","removeClass","uiContainer","hidden","Inline","register$5","alignToolbarButtons","cmd","alignNoneToolbarButton","addButton","AlignmentButtons","toggleFormat","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","registerButtons","registerMenuItems","addMenuItem","register$6","SimpleControls","toggleUndoRedoState","checkState","onUndoStateChange","registerMenuItems$1","registerButtons$1","register$7","UndoRedo","toggleVisualAidState","hasVisual","onVisualAid","registerMenuItems$2","addToggleMenuItem","registerToolbarButton","register$8","VisualAid","toggleOutdentState","queryCommandState","onNodeChange","registerButtons$2","register$9","IndentOutdent","register$a","ComplexControls","setup$9","FormatControls","nu$d","transpose$1","dx","dy","isTouchEvent","fromPageXY","pageX","pageY","fromClientXY","transposeContentAreaContainer","containerPos","getPos","getPointAnchor","getSelectionAnchor","getNodeAnchor$1","getAnchorSpec","isTriggeredByKeyboardEvent","initAndShow","buildMenu","contextmenu","anchorSpec","bubbleSize$1","bubbleAlignments$2","isTouchWithinSelection","touch_1","rngRectOpt","rngRect","getAnchorSpec$1","setupiOSOverrides","originalSelection","selectionReset","setRng","unbindEventListeners","preventMousedown","clearSelectionReset","initAndShow$1","openiOS_1","patchPipeConfig","shouldNeverUseNative","contextmenu_never_use_native","getMenuItems","defaultItems","contextMenus","isContextMenuDisabled","getContextMenu","Settings$1","isSeparator$1","separator$3","makeContextItem","addContextMenuGroup","groupItems","lastMenuItem","generateContextMenu","selectedElement","sections","allItems","isNativeOverrideKeyEvent","setup$a","hideContextMenu","_e","showContextMenu","isLongpress","initAndShow$2","hideEvents","initialAttribute","resetZIndex","initZIndex","changeZIndex","zindex","instigate","anyComponent","discard","createComponent","blockerClass","blockerEvents","get$d","snapsInfo","set$8","getCoords","snapInfo","moveOrSnap","newCoord","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","stopDrag","findMatchingSnap","snaps","sensor","inRange","getSnapPoints","matchSnap","bestSnap","deltas","bestDeltas","currAvg","bestAvg","snapTo","getCurrentCoord","clampCoords","coords","absoluteCoord","newCoords","offset$1","calcNewCoord","optSnaps","currentCoord","snapping","onSensor","dragBy","dragConfig","repositionTarget","onDrag","calcStartData","move$1","dragState","dragMode","dragStartData","getStartData","dlt","SnapSchema","init$c","dragApi","forceDrop","drop","delayDrop","getData$1","getDelta$1","MouseData","updateStartState","setStartData","stop$1","schema$s","init$d","getDataFrom","getData$2","getDelta$2","TouchData","handlers$1","blockerCell","schema$t","mouse","DraggingBranches","init$e","previous","calculateDelta","dragEvent","nuData","DragState","snapTo$1","snapPin","DraggingApis","Dragging","dragger","platform$2","snapWidth","snapOffset","calcSnap","selectorOpt","td","selectorHandle","sensorLeft","sensorTop","sensorWidth","sensorHeight","getSnapsConfig","isSameCell","cellOpt","currentTd","createSelector","setup$b","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getTopLeftSnaps","getBottomRightSnap","memBottomRight","getBottomRightSnaps","topLeftSnaps","bottomRightSnaps","bottomRight","showOrHideHandle","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","getSnapConfig","snapTopLeft","snapLastTopLeft","snapBottomRight","snapLastBottomRight","otherCells","upOrLeftCells","downOrRightCells","TableSelectorHandles","getDimensions","resizeType","originalHeight","originalWidth","Both","resize$3","dim","isHidden$1","renderElementPath","getDataPath","newPathElements","divider","newAcc","updatePath","newPath","isPropagationStopped","ElementPath","renderWordCount","replaceCountText","words","characters","currentVal","newMode","wordCount","renderStatusbar","renderResizeHandlerIcon","renderBranding","linkHtml","getResizeType","plugins","None","Vertical","getTextComponents","getComponents","setup$c","lazyOuterContainer","platformClasses","touchPlatformClass","deviceClasses","dirAttributes","memAnchorBar","lazyAnchorBar","toolbarDrawer","throbber","sb","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","getPartToolbar","editorComponents","containerComponents","border","getUi","broadcastAll","setEditorSize","parsedHeight","parsedWidth","renderUI","toolbarOpt","Render","describedBy","describedElement","describeElement","describeId","AriaLabel","labelledBy","labelledElement","labelElement","schema$u","basic","parts$e","dragBlockClass","getDragBounds","factory$h","dialogBusyEvent","dialogIdleEvent","busyBehaviours","showDialog","busyComp","externalBlocker","bc","getBusySpec","busySpec","busy","hideDialog","blockerDom","getDialogBody","getDialogFooter","setBusy","setIdle","modalEventsId","getFooter","modalBehaviours","ModalDialog","alertBannerFields","alertBannerSchema","createBarFields","itemsField","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","colorInputFields","colorInputSchema","colorInputDataProcessor","colorPickerFields","colorPickerSchema","colorPickerDataProcessor","dropZoneFields","dropZoneSchema","dropZoneDataProcessor","createGridFields","iframeFields","iframeSchema","iframeDataProcessor","inputFields","inputSchema","inputDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","htmlPanelFields","htmlPanelSchema","imageToolsFields","imageToolsSchema","collectionFields","collectionSchema","collectionDataProcessor","createLabelFields","tableFields","tableSchema","createItemsField","itemSchema$2","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseButtonFields","dialogButtonFields","normalButtonFields","menuButtonFields","dialogButtonSchema","dialogButtonFields$1","dialogButtonSchema$1","dialogSchema","tabpanel","createDialog","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","getDataProcessor","getNamedItems","createDataValidator","namedItems","urlDialogButtonSchema","urlDialogSchema","createUrlDialog","extract$1","internalDialog","dataValidator","DialogManager","openUrl","redial","value$3","isSet","toValidValues","renderBodyPanel","memForm","formValue","vals","factory$i","tabButtonBehaviours","TabButton","schema$v","tabsPart","barDetail","tabSpec","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$f","factory$j","tabbarBehaviours","selectedClass","tab","Tabbar","factory$k","tabviewBehaviours","Tabview","schema$w","barPart","tabs","viewPart","parts$g","factory$l","tabValue","tabview","tabWithValue","tabData","onChangeTab","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","onDismissTab","getViewItems","showTab","tabKey","getTabIfNotActive","optTab","TabSection","measureHeights","allTabs","tabviewComp","getMaxHeight","heights","getMaxTabviewHeight","tablist","documentElement$1","tabviewHeight","isTabListBeside","currentTabHeight","dialogTopMargin","dialogBottomMargin","dialogHeight","chromeHeight","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","getTabview","smartTabHeight","extraEvents","maxTabHeightOpt","requestAnimationFrame","oldHeight","naiveTabHeight","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","_comp","isTabPanel","ariaAttributes","renderInlineBody","contentId","renderModalBody","bodySpec","renderIframeBody","initCommonEvents","fireApiEvent","_event","onUnblock","onBlock","initUrlDialog","getInstanceApi","withSpec","_c","currentDialog","initDialog","currentDialogInit","onTabChange","newTabName","oldTabName","SilverDialogEvents","makeButton","lookup$2","footerButtons","buttonName","memButton","_data","buttonGroups","makeGroup","startButtons","endButtons","renderFooter","initSpec","lookupByName","renderInlineFooter","renderModalFooter","footer","getCompByName","form_1","getFormWrapper","footerState","validateData","dialogState","getDialogApi","doRedial","menuItemStates","withRoot","valueComp","representedValues","menuItemCurrentState","setData","prevData","instanceApi","mergedData","newInternalData","bodyState","tabSection","dialogInit","isTouch$4","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","pFooterGroup","renderDialog","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","renderInlineHeader","titleId","renderModalHeader","pTitle","pHandle","draghandle","draggable","getEventExtras","lazyDialog","closeWindow","blockEvent","bs","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","menuButton","innerAcc","renderDialog$1","storagedMenuButtons","objOfCells","dialogSize","modalAccess","getForm","outerForm","renderInlineDialog","_b","dialogLabelId","dialogContentId","memHeader","memBody","memFooter","global$g","getUrlDialogApi","sendMessage","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","isCustomMessage","handleMessage","insertContent","renderUrlDialog","iframeUri","base_uri","href","iframeDomain","protocol","host","port","messageHandlerUnbinder","isSameOrigin","onMessage","unbinder","iframeEle","iframeWin","postMessage","setup$d","closeDialog","alertDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$e","confirmDialog","memFooterYes","footerNo","footerYesButton","validateData$1","inlineAdditionalBehaviours","setup$f","isStickyToolbar$1","openInlineDialog","openModalDialog","openModalUrlDialog","internalInitialData","config$1","inlineDialog","refreshDocking","dialogUi","inlineDialogComp","confirm","alert","WindowManager","Theme","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","defaultDescription","handleImageUpload","blobInfo","failure","onUploadProgress","FormData","filename","Axios","post","firstInaccessibleImage","images","getElementsByTagName","ii","checkAllyShip","tinymceEditor","handleChange","inaccessible","dirtyWatcher","changeWatcher","imageAltContextForm","isImage","addContextForm","arg","setDirty","installFootnotes","isFootnote","getFootnoteNodePair","refNode","bodyNode","footnoteIntegrity","$","refs","bodies","getFootnoteId","mark","getElementsByClassName","refsById","groupBy","mapValues","bodiesById","orphanedRefs","differenceBy","orphanedBodies","unset","bodyMark","bodyDom","labelDom","createFragment","labelsDom","labels","parentElement","parentText","space","lastElementChild","footnoteDiv","class","createFootnote","uuid","refHTML","footnote","updateFootnote","bodyContent","getFootnoteData","redundantMark","htmlID","openDialog","isEditingNode","nextFootnote","Dialog","getInitConfig","enhanced","semanticStyles","extend_valid_elements","image_class_list","content_style","branding","image_uploadtab","images_upload_handler","images_upload_credentials","image_dimensions","automatic_uploads","paste_auto_cleanup_on_paste","paste_remove_styles","paste_remove_styles_if_webkit","paste_strip_class_attributes","media_dimensions","extended_valid_elements","v1","v4","byteToHex","bytesToUuid","buf","bth","wasType","is$1","fromElements","lastChild","fireListEvent","unsafe","actual","Global$1","htmlElement","HTMLElement","isTextNode","isListNode","isOlUlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isLastChild","isTextBlock","getTextBlockElements","blockElements","isBogusBr","previousSibling","isEmpty","keepBookmarks","isChildOfBody","isChildOf","NodeType","getParentList","selectionStart","getParent","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","grep","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","listItemsElms","parentLi","getSelectedListItems","getSelectedDlItems","parentTableCell","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","isList","createTextBlock","contentNode","textBlock","blockName","hasContentNode","getBlockElements","forced_root_block","tagName","setAttribs","forced_root_block_attrs","shallowAs","mutate","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","createSegments","populateSegments","listAttributes","itemAttributes","normalizeSegment","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList$1","hasFirstChildList","hasLastChildList","isIndented","cloneItemContent","li","createEntry","indentEntry","indentation","cloneListProperties","previousSiblingEntry","normalizeEntries","matchingEntry","parseItem","itemSelection","selectionState","currentItemEntry","childListEntries","parseList","parser","newDepth","parseLists","initialDepth","sourceList","outdentedComposer","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listIndentation","entrySets","entrySet","composedLists","composedList","splitList","ul","tmpRng","bookmarks","newBlock","removeAndKeepBookmarks","insertAfter","SplitList","outdentDlItem","dl","indentDlItem","dlIndentation","dlItems","getNormalizedPoint","normalizeRange","outRng","rangeStart","rangeEnd","Range","selectionIndentation","isHandled","bookmark","getBookmark","moveToBookmark","indentListSelection","outdentListSelection","flattenListSelection","DOM$1","createBookmark","setupEndPoint","resolveBookmark","restoreEndPoint","nodeIndex","Bookmark","isCustomList","listToggleActionFromListName","listName","updateListStyle","setStyle","updateListAttrs","updateListWithDetails","removeStyles","getEndPointNode","getSelectedTextBlocks","textBlocks","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","detailStyle","applyList","listItemName","listBlock","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","shouldMerge","updateList","newList","toggleMultipleLists","hasListStyleDetail","toggleSingleList","toggleList","selectedSubLists","ToggleList","DOM$2","normalizeList","normalizeLists","NormalizeLists","findNextCaretContainer","isForward","nonEmptyBlocks","getNonEmptyElements","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","mergeLiElements","listNode","nestedLists","mergeIntoEmptyLi","fromLi","toLi","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","selectionStartElm","rng_1","otherLi_1","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_2","backspaceDeleteCaret","backspaceDeleteRange","startListParent","backspaceDelete","DELETE","Delete","Api","queryListCommandState","command","addQueryStateHandler","Commands","shouldIndentOnTab","setupTabKey","metaKeyPressed","Keyboard","listState","tableCellIndex","hasPlugin","plugin","inArray","Buttons","Plugin","getScripts","getAudioTemplateCallback","getVideoTemplateCallback","hasLiveEmbeds","shouldFilterHtml","getUrlResolver","hasAltSource","hasPoster","hasDimensions","trimPx","getSize","setSize","Size","getMaxWidth","setMaxWidth","getVideoScriptMatch","getEphoxEmbedIri","getAttrib","isEphoxEmbed","htmlToDataSax","allow_conditional_comments","source1","movie","videoScript","source2","poster","ephoxEmbedHtmlToData","htmlToData","guess","mimes","mp3","m4a","wav","mp4","webm","ogg","swf","fileEnd","mime","Mime","setAttributes","updatedAttrs","normalizeHtml","writer","updateHtmlSax","updateAll","hasImage","sourceCount","comment","cdata","imgAttrs","isEphoxEmbed$1","updateEphoxEmbed","outerHTML","updateHtml","UpdateHtml","urlPatterns","regex","allowFullscreen","getUrl","newUrl","matchPattern","getIframeHtml","getFlashHtml","getAudioHtml","audioTemplateCallback","source2mime","getVideoHtml","videoTemplateCallback","source1mime","getScriptHtml","dataToHtml","dataIn","embed","convertURL","embedPromise","rej","wrappedResolve","defaultPromise","loadedData","getEmbedHtml","embedHandler","isCached","Service","unwrapped","errorMessage","notificationManager","snippetToData","embedSnippet","isMediaElement","getEditorData","snippet","serializer","serialize","addEmbedHtml","snippetData","selectPlaceholder","beforeObjects","afterObjects","handleInsert","submitForm","editorData","getSourceData","handleSource1","serviceData","handleEmbed","dataFromEmbed","handleUpdate","mediaInput","generalTab","embedTextarea","embedTab","advancedFormItems","advancedTab","sanitize","blocked","serializeStyle","parseStyle","Sanitize","createPlaceholderNode","placeHolder","shortEnded","retainAttributesAndInnerHtml","transparentSrc","createPreviewIframeNode","previewWrapper","previewNode","shimNode","allowfullscreen","frameborder","sourceNode","attrName","attrValue","attribs","ai","escape","isPageEmbedWrapper","nodeClass","isWithinEmbedWrapper","placeHolderConverter","ceFalse","Nodes","specialElements","getSpecialElements","boolAttrs","getBoolAttrs","addNodeFilter","addAttributeFilter","realElm","innerNode","realElmName","unescape","$elm","FilterContent","ResolveName","selectedNode","hasClass","objectType","stateSelectorAdapter","selectorChangedWithUnbind","getNonEditableClass","getEditableClass","getNonEditableRegExps","nonEditableRegExps","checkClassName","replaceMatchWithSpan","cls","prevChar","findStartTagIndex","lastIndexOf","tagHtml","convertRegExpsToNonEditable","editClass","nonEditClass","contentEditableAttrName","hasEditClass","hasNonEditClass","hasProPlugin","DetectProPlugin","clipboard","quirks","firePastePreProcess","isWordHtml","wordContent","firePastePostProcess","firePastePlainTextToggle","firePaste","ieFake","togglePlainTextPaste","pasteFormat","Actions","pasteHtml","pasteText","par","asyncValues","asyncValue","par$1","futures","traverse","internalMimeType","internalMark","unmark","isMarked","InternalHtml","internalHtmlMime","isPlainText","toBRs","openContainer","rootTag","rootAttrs","encodeAllRaw","toBlockElements","blocks","tagOpen","tagClose","paragraphs","stitch","Newlines","shouldBlockDrop","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","defaultValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","domParser","shortEndedElements","getShortEndedElements","ignoreElements","walk","trimHtml","trimSpaces","s1","s2","createIdGenerator","isMsEdge","isWordContent","isNumericList","isBulletList","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","txt","trimListStart","regExp","removeIgnoredNodes","_listIgnore","convertParagraphToLi","paragraphNode","_listLevel","nodeText","filterStyles","validStyles","styleValue","outputStyles","filterWordContent","retainStyleProperties","spaces","validElements","valid_elements","valid_children","attributesOrder","preProcess","WordFilter","preProcess$1","isRootContent","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","filteredContent","hasEventListeners","ProcessFilters","paste","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","SmartPaste","isCollapsibleWhitespace","isNewLineChar","isNewline","normalizeWhitespace","pcIsSpace","pasteHtml$1","internalFlag","encodedText","normalizedText","getDataTransferItems","mceInternalUrlPrefix","legacyText","contentType","getClipboardContent","clipboardEvent","clipboardData","hasContentType","clipboardContent","mimeType","hasHtmlOrText","getBase64FromUri","isValidDataUriImage","imgElm","images_dataimg_filter","extractFilename","uniqueId","pasteImage","imageItem","images_reuse_filename","blobCache","editorUpload","existingBlobInfo","findFirst","cachedBlobInfo","blobUri","isClipboardEvent","readBlobsAsDataUris","getAsFile","onload","getImagesFromDataTransfer","pasteImageData","paste_data_images","blobResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","registerEventHandlers","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","insertClipboardContent","isKeyBoardPaste","plainTextMode","isPlainTextHtml","isDefaultContent","removePasteBinOnKeyUp","webkit","getLastRng","registerEventsAndFilters","isPasteInsert","isWebKitFakeUrl","isDataUri","allow_html_data_urls","getPasteBinParent","isExternalPasteBin","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isDefault","lastRngCell","gecko","pasteBinClone","pasteBinClones","dirtyWrappers","cleanWrapper","copyAndRemove","isPasteBin","PasteBin","Clipboard","hasWorkingClipboardApi","iOS","setHtml5Clipboard","clearData","setClipboardData","markedHtml","contenteditable","setStyles","offscreenRange","selectNodeContents","isTableSelection","hasSelectedContent","CutCopy","getCaretRangeFromEvent","getCaretRangeFromPoint","isPlainTextFileUrl","plainTextContent","setFocusedRange","draggingInternallyState","dropContent","content_1","DragDrop","postProcess","PrePostProcess","addPreProcessFilter","filterFunc","addPostProcessFilter","removeExplorerBrElementsAfterBlocks","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","node_1","decode","removeUnderlineAndFontInAnchor","Quirks","makeSetupHandler","pastePlainTextToggleHandler","invalidTypeMessage","incorrect","COMMENT","isComment","startsWith","sourceDom","targetDom","cssText","rawParent","prevSibling","detailnew","extended","rowdata","elementnew","rowdatanew","rowcells","rowdetails","ancestors","ancestors$1","children$2","child$1","child$2","firstLayer","filterFirstLayer","LayerSelector","tags","isRootOrUpperTable","notCell","neighbours","neighbourCells","neighbourRows","firstCell","grid$1","rowProp","colProp","rowsCount","cols","TableLookup","fromTable","parentSection","parentName","rowspan","colspan","fromPastedRows","example","DetailsList","getAt","warehouse","findItem","filtered","filterItems","maxRows","maxColumns","currentRow","cr","cc","newpos","justCells","Warehouse","statsStruct","findSelectedStats","house","totalColumns","totalRows","minRow","minCol","maxRow","maxCol","endRow","endCol","seenSelected","fillInGaps","stats","needCell","clean","emptyRows","selectedSelector","unselectedCells","CopySelected","copy$1","cloneChildren","createCell","replica","pasteReplace","cloneFormats","oldCell","newCell","firstText","formatSelector","clonedFormat","cellOperations","formatsToClone","docu","lastNode","gap","TableFill","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","finishRow","isWithin","isRectangular","isRect","detailIsWithin","CellBounds","detailA","detailB","getAnyBox","startCoords","finishCoords","sc","fc","getBox","CellGroup","intercepts","parentCell","innerCell","isContainedBy","c1","c2","CellFinder","deltaColumn","getWarehouse","intercepts$1","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","getBox$1","TablePositions","TagBoundaries","DomUniverse","isEmptyTag","comparePosition","copyAttributesTo","destination","as","up","down","copyTo","afterAll","appendAll","setText","leftRight","brokenPath","bisect","universe","ind","breakToRight","second","breakToLeft","prior","breakPath","isTop","breaker","splits","breakage","nextChild","look","oneAll","unsafeOne","commonElement","eq$1","unsafeSubset","ps1","ps2","finder","topDown","startIndex","sIndex","eIndex","ancestors$2","pruned1","pruned2","firstpath","secondpath","subset","ancs","SubsetFn","sharedOne","subset$1","ancestors$3","breakToLeft$1","breakToRight$1","breakPath$1","Parent","sharedOne$1","_universe","subset$2","ancestors$4","breakToLeft$2","breakToRight$2","breakPath$2","DomParent","Identified","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","lastSelectedSelector","getEdges","firstSelectedSelector","tbl","expandTo","shiftSelection","CellSelection","retrieve$1","retrieveBox","firstAncestor","lastAncestor","fA","lA","TableSelection","attributeSelector","firstSelected","lastSelected","Ephemera","type$1","onMultiple","onSingle","SelectionTypes","selections","unmergable","hasSpan","mergable","_env","CellOperations","noMenu","notCell$1","paste$1","pasteRows","generators","TableTargets","extractSelected","serializeElements","getTextContent","registerEvents","cellSelection","multiCellContext","domCell","pasteCells","needManualCalc","toNumber","getProp","getCalculatedHeight","paddingTop","paddingBottom","borderTop","borderBottom","boxSizing","borders","RuntimeSize","genericSizeRegex","percentageBasedSizeRegex","pixelBasedSizeRegex","setPixelWidth","amount","setPercentageWidth","getHeightValue","normalizePixelSize","getTotalHeight","getSpan","getRawWidth","cssWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","choosePercentageSize","percentMatch","intWidth","getPercentageWidth","normalizePixelWidth","choosePixelSize","pixelMatch","floatWidth","getPixelWidth","getGenericWidth","setGenericWidth","Sizes","halve","main","CellMutations","rowInfo","colInfo","rtlEdge","ltrEdge","getTop","findPositions","getInnerEdge","getOuterEdge","cellOption","lastLine","negate","optElements","BarPositions","ResizeDirection","TableDirection","directionAt","auto","getGridSize","TableGridSize","setIfNot","newRows","newCells","renderSection","gridSection","sectionName","tb","isNew","tr","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","copy$2","clonedCell","Redraw","repititions","deduce","aa","rowsArr","getBlock","isSingle","getFallback","decide","inBlock","singleInBlock","detailOption","rows$1","Blocks","namespace","dashNamespace","Styles","row$1","Bar","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","wire","drawBar","cpOption","cp","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","tableWidth","rowBar","refreshGrid","hdirection","vdirection","each$2","bars","isRowBar","isColBar","Bars","addCell","gridRow","setCells","mutateCell","mapCells","getCell","getCellElement","cellLength","GridRow","getColumn","getRow","findDiff","subgrid","restOfRow","endColIndex","restOfColumn","endRowIndex","TableGrid","toDetails","seen","ri","ci","updateSeen","toGrid","rowCells","Transitions","fromWarehouse","deriveRows","rendered","findRow","rowOfCells","toDetailList","findInWarehouse","postAction","genWrappers","newElements","onCell","onPasteRows","lc","onMergable","_warehouse","onUnmergable","onCells","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","fill","generator","rowFill","_row","colFill","tailor","fillCols","fillRows","modifiedCols","tailoredGrid","Fitment","substitution","unmerge","isToReplace","uniqueCells","currentCell","splitRows","rowPrevCells","replacement","_loop_2","sub","MergingOperations","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","fittedGrid","fittedNewGrid","secondDelta","fittedOldGrid","TableMerge","insertRowAt","between","withinSpan","insertColumnAt","splitCellIntoColumns","exampleRow","exampleCol","isTargetCell","splitCellIntoRows","deleteColumnsAt","deleteRowsAt","ModificationOperations","replaceIn","isTarget","notStartRow","notStartColumn","replaceColumn","alreadyAdded","replaceRow","targetRow","TransformOperations","only","ColumnContext","neighbours$1","determine","zero","onOnly","singleColumnWidth","newNext","minCellWidth","newThis","diffx","onMiddle","_prev","Deltas","getSpan$1","hasColspan","hasRowspan","getInt","CellUtils","getRaw$1","getRawW","getRawH","getWidthFrom","backups","columnCell","deduced","getDeduced","getRawWidths","getPercentageWidths","getPixelWidths","getHeightFrom","rowCell","getPixelHeights","getRawHeights","ColumnSizes","measures","recalculateWidth","widths","recalculateHeight","matchRowHeight","Recalculations","percentageSize","getCellDelta","_delta","setTableWidth","_newWidths","ratio","getWidths","setElementWidth","pixelSize","newWidths","chooseSize","fallbackWidth","getTableSize","TableSize","getWarehouse$1","sumUp","getTableWarehouse","adjustWidth","newSizes","adjustHeight","newHeights","newCellSizes","newRowSizes","adjustWidthTo","Adjustments","handleUnsupported","baseWith","invalidKeys","handleExact","exactly","verifyGenerators","elementToData","toData","nuFrom","getOrInit","makeNew","replaceOrInit","merging","Generators","blockList","isFormatting","isHeading","isContainer","isFrame","Structure","universe$1","isBlock$1","isFormatting$1","isHeading$1","isContainer$1","isEmptyTag$1","isFrame$1","isInline$1","DomStructure","merge$2","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","TableContent","elementFromGrid","findIn","uniqueRows","currentDetail","uniqueColumns","insertRowBefore","targetIndex","newGrid","insertRowsBefore","newG","insertRowAfter","insertRowsAfter","insertColumnBefore","insertColumnsBefore","insertColumnAfter","insertColumnsAfter","makeRowHeader","makeColumnHeader","unmakeRowHeader","unmakeColumnHeader","splitCellIntoColumns$1","splitCellIntoRows$1","eraseColumns","_comparator","_genWrappers","eraseRows","mergeCells","unmergeCells","pasteDetails","gridify","wh","mergedGrid","nuGrid","gridifyRows","pasteRowsBefore","pasteRowsAfter","TableOperations","getBody$1","getPixelWidth$1","getPixelHeight","removePxSuffix","addSizeSuffix","removeDataStyle","dataStyleCells","ltr$1","rtl$1","Direction","defaultTableToolbar","defaultStyles","defaultAttributes","getDefaultAttributes","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","isPercentagesForced","isPixelsForced","getCloneElements","cloneElements","hasObjectResizing","objectResizing","fireNewRow","fireNewCell","fireObjectResizeStart","fireObjectResized","fireTableSelectionChange","fireTableSelectionClear","TableActions","lazyWire","isTableBody","lastRowGuard","lastColumnGuard","guard","deleteRow","deleteColumn","copyRows","selectedCells","slicedGrid","slicedDetails","CopyRows","getTDTHOverallStyle","firstChildStyle","checkChildren","currentStyle","applyAlign","applyVAlign","unApplyAlign","unApplyVAlign","Styles$1","buildListItems","inputList","itemCallback","startItems","appendItems","extractAdvancedStyles","rgbToHex","borderWidth","borderStyle","borderColor","bgColor","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemKey","comparisonValue","getAdvancedTab","dialogName","advTabItems","getAlignment","alignments","dataName","alignmentData","getHAlignment","getVAlignment","extractDataFromSettings","hasAdvTableTab","extractAdvancedStyleData","defaultData","cellspacing","cellpadding","caption","getBorder","advStyle","getCellPaddingCellSpacing","spacing","padding","extractDataFromTableElement","optBorderWidth","extractDataFromRowElement","extractDataFromCellElement","celltype","Helpers","getClassList","rowClassList","textStyle","children$3","classlist","CellDialogGeneralTab","setAttrib","ifTruthy","DomModifier","updateSimpleProps","modifiers","updateAdvancedProps","applyToSingle","cellElm","halign","valign","applyToMultiple","onSubmitCellForm","applicator","cellsData","dialogTabPanel","dialogPanel","CellDialog","getClassList$1","formChildren","getItems$1","RowDialogGeneralTab","switchRowType","rowElm","toType","tableElm","oldParentElm","parentElm","updateAdvancedProps$1","modifier","onSubmitRowForm","oldData","createModifier","rowsData","RowDialog","merge$3","DefaultRenderOptions","percentages","makeTable","tableBody","tableRow","tableHeaderCell","tableCell","rowHeaders","columnHeaders","renderOpts","tbody","trs","placeCaretInCell","selectFirstCellInTable","fireEvents","isPercentage","insert$1","InsertTable","getItems$2","hasClasses","insertNewTable","rowColCountItems","alwaysItems","appearanceItems","alignmentItem","classListItem","TableDialogGeneralTab","styleTDTH","applyDataToElement","onSubmitTableForm","captionElm","addVisual","open$2","generalPanel","nonAdvancedForm","advancedForm","TableDialog","getSelectionStartFromSelector","getSelectionStartCell","getSelectionStartCellOrCaption","each$3","clipboardRows","eraseTable","cellOrCaption","tableOpt","getTableFromCell","resizeChange","oldSize","actOnSelection","copyRowSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutRow","mceTableCopyRow","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","mceInsertTable","mceTableProps","mceTableRowProps","mceTableCellProps","detached","editable","body$1","ResizeWire","Event","trigger","typeDefs","styles$1","Styles$2","Blocker","layerClass","DragMode","DragSink","DragApi","compare","mutation","mdown","mup","mmove","mout","MouseDrag","InDrag","dataOption","NoDrag","Movement","noDragState","inDragState","throttledDrop","runIfActive","Dragger","Mutation","BarMutation","findClosestContentEditable","resizeBarDragging","BarManager","resizing","hoverTable","getResizer","_dataRow","_dataCol","currentCol","oldX","startAdjust","findClosestEditableTable","hideBars","showBars","beforeResize","afterResize","startDrag","TableResize","createContainer","TableWire","calculatePercentageWidth","enforcePercentage","rawTable","tablePercentage","enforcePixels","getResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","sz","rawWire","tableHasPercentage","percentW","targetPercentW","newCellSizes_1","newCellSize","none$1","CellLocation","CellNavigation","selectNodeContentsUsing","availableSearch","fromPoint$1","beforeSpecial","preprocessRelative","preprocessExact","after$3","doSetNativeRange","removeAllRanges","addRange","doSetRange","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","setToElement","getAtPoint","forward","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","handle$1","body_1","isRoot_1","TabContext","Response","Situs","convertToRange","makeSitus","Util","sync","selectRange","detect$5","cellSel","annotations","updateSelection","newSels","clearBeforeUpdate","KeySelection","backtrack","_direction","sidestep","advance","successors","go$1","ruleOpt","succ","Walkers","hone","left$1","right$1","isLeaf","before$3","seekLeft","after$4","seekRight","universe$2","before$4","after$5","seekLeft$1","seekRight$1","failedUp","failedDown","isOverlapping","bridge","beforeBounds","afterBounds","isRow","verify","beforeOffset","afterOffset","afterCell","beforeCell","_sharedRow","onSuccess","onFailedUp","onFailedDown","BeforeAfter","inParent","indexInParent","gatherer","cand","gather","handleBr","findBr","handleParent","br","adjacent","tryBr","analysis","BrTags","moveBottomTo","moveTopTo","getTop$1","getBottom","Carets","getPartialBox","getRangedRect","toCaret","getElemBox","getBoxAt","getEntireBox","Rectangles","JUMP_SIZE","NUM_RETRIES","retry","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","adjustUp","higherCaret","upMovement","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","situsFromPoint","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","getInnerHeight","moved","scrollBy","Retries","tryUp","tryDown","getJumpSize","MAX_RETRIES","findSpot","brNeighbour","fromSitus","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","handle$2","spot","TableKeys","inSameTable","simulate","precheck","firstUpCheck","lastOffset","lastDownCheck","VerticalMovement","findCell","MouseSelection","clearState","selectContents","KeyDirection","isKey","keycode","isUp","isDown","isNavigation","SelectionKeys","isBackward","toRaw","sr","Rect","by","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","getScrollY","rc","keyboard","clearToNavigate","realEvent","InputHandlers","removeClasses","byClass","ephemera","addSelectionClass","removeSelectionClasses","byAttr","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","SelectionAnnotation","getUpOrLeftCells","upGrid","upDetails","slicedCells","getDownOrRightCells","downGrid","downDetails","getOtherCells","OtherCells","hasInternalTarget","CellSelection$1","selectionTargets","handlerStruct","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","wrappedEvent","wrapEvent","isMouseEvent","isLeftMouse","isLeftButtonPressed","mouseDown","mouseOver","mouseUp","getDoubleTap","lastTarget","lastTimeStamp","touchEnd","lT","lTS","timeStamp","doubleTap","Selections","getSelectionTargets","changeHandlers","findTargets","resetTargets","onSetupTable","onSetupCellOrRow","onSetupMergeable","onSetupUnmergeable","addButtons","addMenuButton","addToolbars","addContextToolbar","addMenuItems","insertTableAction","tableProperties","deleteTable","rowItems","columnItems","cellItems","addContextMenu","MenuItems","getClipboardRows","setClipboardRows","sugarRows","resizeHandler","insertTable","addTempAttr","Plugin$1","assumeExternalTargets","externalTargets","hasContextToolbar","getLinkList","getDefaultLinkTarget","getTargetList","getRelList","getLinkClassList","shouldShowLinkTitle","allowUnsafeLinkTarget","useQuickLink","appendClickRemove","createEvent","initMouseEvent","OpenUrl","hasProtocol","getHref","applyRelTargetRules","isUnsafe","rels","addTargetRules","removeTargetRules","newRels","trimCaretContainers","getAnchorElement","selectedElm","isImageFigure","getAnchorText","anchorElm","isLink","hasLinks","isOnlyTextSelected","getLinkAttrs","handleExternalTargets","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","updateLink","linkImageFigure","createHTML","attachState","unlinkImageFigure","fig","sanitizeList","extractValue","sanitizeWith","extracter","createUi","ListOptions","findTextByValue","catalog","persistentText","hasPersistentText","findCatalog","catalogs","linkSettings","onUrlChange","urlText","onCatalogChange","DialogChanges","delayedConfirm","tryEmailTransform","suggestMailTo","tryProtocolTransform","suggestProtocol","DialogConfirms","anchorNodes","AnchorListOptions","ClassListOptions","parseJson","getLinks","extractor","linkList","send","optItems","LinkListOptions","getRels","isTargetBlank_1","enforceSafe","safeRelExtractor","sanitizer","RelOptions","fallbacks","getTargets","TargetOptions","nonEmptyAttr","extractFromAnchor","onlyText","linkClass","collect","linkNode","links","optNode","flags","titleEnabled","DialogInfo","handleSubmit","getChangedValue","changedData","pData","collectData","getInitialData","defaultTarget","makeDialog","urlInput","titleText","dialogDelta","getLink","getSelectedLink","hasOnlyAltModifier","altKey","metaKey","gotoLink","targetEl","scrollIntoView","gotoSelectedLink","leftClickedOnAHref","setupGotoLinks","toggleActiveState","toggleEnabledState","addShortcut","setupButtons","setupMenuItems","setupContextMenu","inLink","noLink","setupContextToolbars","collapseSelectionToEnd","onSetupLink","Controls","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","nsecs","dt","tl","tmh","rnds","makeItems","imageUrl","imageList","imageDescription","imageTitle","imageDimensions","hasDescription","hasImageTitle","hasImageCaption","makeTab","MainTab","hasAdvTab","hasUploadTab","getPrependUrl","getImageList","hasUploadUrl","getUploadUrl","hasUploadHandler","getUploadHandler","getUploadBasePath","getUploadCredentials","parseIntAndGetMax","val1","val2","getImageSize","onerror","removePixelSuffix","addPixelSuffix","mergeMargins","splitMargin","createImageList","waitLoadImage","selectImage","isPlaceholderImage","getHspace","marginLeft","marginRight","getVspace","marginTop","marginBottom","hasCaption","wrapInFigure","figureElm","removeFigure","toggleCaption","normalizeStyle","normalizeCss","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","hspace","vspace","getStyleValue","figure","updateProp","normalized","mergedCss","compressed","getSelectedImage","splitTextBlock","readImageDataFromSelection","insertImageAtCaret","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","insertOrUpdateImage","isGroup","findEntryDelegate","findEntry","optList","ListUtils","pathJoin","path1","path2","Uploader","defaultHandler","xhr","XMLHttpRequest","withCredentials","credentials","upload","onprogress","json","responseText","basePath","uploadBlob","isDefaultHandler","makeTab$1","AdvTab","urlListSanitizer","futureImageList","prependURL","preUrl","makeTab$2","UploadTab","prevImage","prevAlt","fromImageData","fileinput","toImageData","addPrependUrl2","srcURL","prependUrl","addPrependUrl","formFillFromMeta2","formFillFromMeta","calculateImageSize","helpers","imageSize","updateImagesDropdown","changeSrc","changeImages","updateAlt","calcVSpace","matchingTopBottom","calcHSpace","matchingLeftRight","calcBorderWidth","calcBorderStyle","calcStyle","changeStyle2","dataCopy","changeStyle","changeAStyle","changeFileInput","uploader","finalize","dataUrl","createBlobCache","alertErr","changeHandler","closeHandler","makeDialogBody","tabPanel","submitHandler","uploadImagesAuto","normalizeCss$1","stylesArg","hasImageClass","toggleContentEditableState","toggleContentEditable","getRandomValues","crypto","msCrypto","rnds8","source_view","Content","editorContent","ENHANCED","VERIFIED","SUP","initRichTextEditor","textArea"],"mappings":"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AChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEF,SAASC,GAASC,EAASC,GAIzB,IAHA,IAEIr/G,EAFAg6E,EAAM,GACNslC,EAAM,IAAIvrH,MAAM,IAEX/F,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAIkB,EAAI,EAAGA,EAAI,EAAGA,IACrB8qF,EAAI9qF,GAAKmwH,EAAQnwH,EAAQ,EAAJlB,GAEvB,IAASkB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B8Q,EAAM,EACN,IAAK,IAAIhM,EAAI,EAAGA,EAAI,EAAGA,IACrBgM,GAAOo/G,EAAQlwH,EAAQ,EAAJ8E,GAASgmF,EAAIhmF,GAElCsrH,EAAIpwH,EAAQ,EAAJlB,GAASgS,GAGrB,OAAOs/G,EAET,SAASC,GAAejyD,EAAQ/8D,GAC9B,IAAI4B,EAcJ,OAbA5B,EAAQwuH,GAAMxuH,GAAQ,EAAG,GACzBA,GAAS,IACLA,EAAQ,EACV4B,EAAI,IAAM5B,EAAQ,IAAM,KAExB4B,EAAI5B,EAAQ,EAEV4B,EADQ,IAANA,EACE+sH,GAAY3uH,GAEZ2uH,GAAY/+F,KAAKC,MAAM7vB,KAAW,EAAI4B,GAAK+sH,GAAY/+F,KAAKC,MAAM7vB,GAAS,GAAK4B,EAEtFA,EAAQ,IAAJA,EAAU,KAETgtH,GA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","file":"js/rich_text_editor.6bf251b7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"rich_text_editor\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/dist/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (pred(value[i]) !== true) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var readOpt = function (key) {\n      return function (obj) {\n        return has(obj, key) ? Option.from(obj[key]) : Option.none();\n      };\n    };\n    var readOr = function (key, fallback) {\n      return function (obj) {\n        return has(obj, key) ? obj[key] : fallback;\n      };\n    };\n    var readOptFrom = function (obj, key) {\n      return readOpt(key)(obj);\n    };\n    var hasKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var wrap = function (key, value) {\n      var r = {};\n      r[key] = value;\n      return r;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var readOpt$1 = function (key) {\n      return readOpt(key);\n    };\n    var readOr$1 = function (key, fallback) {\n      return readOr(key, fallback);\n    };\n    var readOptFrom$1 = function (obj, key) {\n      return readOptFrom(obj, key);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n    var hasKey$1 = function (obj, key) {\n      return hasKey(obj, key);\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$2 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$2,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var typeAdt = Adt.generate([\n      {\n        setOf: [\n          'validator',\n          'valueType'\n        ]\n      },\n      { arrOf: ['valueType'] },\n      { objOf: ['fields'] },\n      { itemOf: ['validator'] },\n      {\n        choiceOf: [\n          'key',\n          'branches'\n        ]\n      },\n      { thunk: ['description'] },\n      {\n        func: [\n          'args',\n          'outputSchema'\n        ]\n      }\n    ]);\n    var fieldAdt = Adt.generate([\n      {\n        field: [\n          'name',\n          'presence',\n          'type'\n        ]\n      },\n      { state: ['name'] }\n    ]);\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return readOptFrom(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = readOptFrom(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(readOptFrom(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = readOptFrom(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Option.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Option.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      var toDsl = function () {\n        return getDelegate().toDsl();\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      var toDsl = function () {\n        return typeAdt.itemOf(validator);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var getSetKeys = function (obj) {\n      var keys$1 = keys(obj);\n      return filter(keys$1, function (k) {\n        return hasKey$1(obj, k);\n      });\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasKey$1(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString,\n        toDsl: delegate.toDsl\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      var toDsl = function () {\n        return typeAdt.objOf(map(fields, function (f) {\n          return f.fold(function (key, okey, presence, prop) {\n            return fieldAdt.field(key, presence, prop);\n          }, function (okey, instantiator) {\n            return fieldAdt.state(okey);\n          });\n        }));\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      var toDsl = function () {\n        return typeAdt.arrOf(prop);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      var toDsl = function () {\n        return typeAdt.setOf(validator, prop);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = readOptFrom$1(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = readOptFrom$1(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      var toDsl = function () {\n        return typeAdt.choiceOf(key, branches);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors) + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$1(branches, objOf));\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = Cell(PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch));\n    var detect$3 = function () {\n      return platform.get();\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = detect$3().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element(), simulatedEvent.event().target());\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasKey$1(parts, 'can') && !hasKey$1(parts, 'abort') && !hasKey$1(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', constant(true)),\n        defaulted$1('abort', constant(false)),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: constant(true),\n        abort: constant(false),\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitionend = constant('transitionend');\n    var selectstart = constant('selectstart');\n\n    var alloy = { tap: constant('alloy.tap') };\n    var focus = constant('alloy.focus');\n    var postBlur = constant('alloy.blur.post');\n    var postPaste = constant('alloy.paste.post');\n    var receive = constant('alloy.receive');\n    var execute = constant('alloy.execute');\n    var focusItem = constant('alloy.focus.item');\n    var tap = alloy.tap;\n    var tapOrClick = function () {\n      return detect$3().deviceType.isTouch() ? alloy.tap() : click();\n    };\n    var longpress = constant('alloy.longpress');\n    var sandboxClose = constant('alloy.sandbox.close');\n    var typeaheadCancel = constant('alloy.typeahead.cancel');\n    var systemInit = constant('alloy.system.init');\n    var documentTouchmove = constant('alloy.system.touchmove');\n    var documentTouchend = constant('alloy.system.touchend');\n    var windowScroll = constant('alloy.system.scroll');\n    var windowResize = constant('alloy.system.resize');\n    var attachedToDom = constant('alloy.system.attached');\n    var detachedFromDom = constant('alloy.system.detached');\n    var dismissRequested = constant('alloy.system.dismissRequested');\n    var repositionRequested = constant('alloy.system.repositionRequested');\n    var focusShifted = constant('alloy.focusmanager.shifted');\n    var slotVisibility = constant('alloy.slotcontainer.visibility');\n    var changeTab = constant('alloy.change.tab');\n    var dismissTab = constant('alloy.dismiss.tab');\n    var highlight = constant('alloy.highlight');\n    var dehighlight = constant('alloy.dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element(), event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element(), event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, map$1(data, constant));\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event());\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n    var body = cached(function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    });\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var closest$1 = function (target, transform, isRoot) {\n      var delegate = closest(target, function (elem) {\n        return transform(elem).isSome();\n      }, isRoot);\n      return delegate.bind(transform);\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event().prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component) {\n            action.apply(undefined, [component].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element(), name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event();\n        var target = component.getSystem().getByDom(ev.target()).fold(function () {\n          var closest = closest$1(ev.target(), function (el) {\n            return component.getSystem().getByDom(el).toOption();\n          }, constant(false));\n          return closest.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort$1 = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort$1(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) {\n        throw new Error('You must specify at least one required or optional field.');\n      }\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        var unsupported = filter(keys$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) {\n          unsuppMessage(unsupported);\n        }\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var offsetParent = function (element) {\n      return Option.from(element.dom().offsetParent).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var get$1 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$1(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      var clone = shallow$1(element);\n      return getOuter(clone);\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element()) && !eq(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var originator = simulatedEvent.event().originator();\n        var target = simulatedEvent.event().target();\n        if (isRecursive(component, originator, target)) {\n          domGlobals.console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom(), idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom()[idAttr$1] : null;\n      return Option.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + '\\n' + element(getComp().element()) + ' is not in context.');\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: constant(false)\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return readOptFrom$1(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(undefined, [component.getApis()].concat([component].concat(rest)));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var optBlob = optBlobThunk;\n          var output = optBlob.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = readOr$1(indexKey, [])(r);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var nameAndMod = function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      };\n      var byAspect = byInnerKey(modsByBehaviour, nameAndMod);\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      var sliced = array.slice(0);\n      try {\n        var sorted = sliced.sort(function (a, b) {\n          var aKey = a[keyName]();\n          var bKey = b[keyName]();\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: constant(purpose)\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: constant(purpose)\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose());\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: constant(name),\n        handler: constant(handler)\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name();\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler();\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler()) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name() === o;\n            });\n          }).join(' > ') : tuples[0].name();\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith({\n          'alloy.execute': [\n            'disabling',\n            'alloy.base.behaviour',\n            'toggling',\n            'typeaheadevents'\n          ],\n          'alloy.focus': [\n            'alloy.base.behaviour',\n            'focusing',\n            'keying'\n          ],\n          'alloy.system.init': [\n            'alloy.base.behaviour',\n            'disabling',\n            'toggling',\n            'representing'\n          ],\n          'input': [\n            'alloy.base.behaviour',\n            'representing',\n            'streaming',\n            'invalidating'\n          ],\n          'alloy.system.detached': [\n            'alloy.base.behaviour',\n            'representing',\n            'item-events',\n            'tooltipping'\n          ],\n          'mousedown': [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events'\n          ],\n          'touchstart': [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events'\n          ],\n          'mouseover': [\n            'item-type-events',\n            'tooltipping'\n          ]\n        }), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element();\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$3 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$3(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$4 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = Element.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (has$1(element, 'style') && trim(get$2(element, 'style')) === '') {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom().offsetWidth;\n    };\n\n    var get$5 = function (element) {\n      return element.dom().value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom().value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = Element.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = readOr$1('behaviours', {})(spec);\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: constant(spec),\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: constant(item),\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: constant(events)\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = readOr$1('components', [])(spec);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = Element.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Option.none,\n        hasConfigured: constant(false),\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: constant(extSpec.element),\n        spec: constant(spec),\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: constant({})\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$4(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$4(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom()) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      api$1.set(element, h);\n    };\n    var get$7 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$1.max(element, value, inclusions);\n      set$2(element, 'max-width', absMax + 'px');\n    };\n\n    var isSafari = detect$3().browser.isSafari();\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n\n    var bounds = function (x, y, width, height) {\n      return {\n        x: constant(x),\n        y: constant(y),\n        width: constant(width),\n        height: constant(height),\n        right: constant(x + width),\n        bottom: constant(y + height)\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? domGlobals.window : _win;\n      var doc = win.document;\n      var scroll = get$8(Element.fromDom(doc));\n      var visualViewport = win['visualViewport'];\n      if (visualViewport !== undefined) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left()), Math.max(visualViewport.pageTop, scroll.top()), visualViewport.width, visualViewport.height);\n      } else {\n        var html = doc.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left(), scroll.top(), width, height);\n      }\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Option.some(paths);\n    };\n\n    var view = function (doc) {\n      var element = doc.dom() === domGlobals.document ? Option.none() : Option.from(doc.dom().defaultView.frameElement);\n      return element.map(Element.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = Element.fromDom(domGlobals.document);\n      var scroll = get$8(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left(),\n            top: b.top + loc.top()\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return Position(r.left + offset.left() + scroll.left(), r.top + offset.top() + scroll.top());\n      });\n    };\n\n    var pointed = Immutable('point', 'width', 'height');\n    var rect = Immutable('x', 'y', 'width', 'height');\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: constant(x),\n        y: constant(y),\n        width: constant(width),\n        height: constant(height),\n        right: constant(x + width),\n        bottom: constant(y + height)\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds$1(xy.left(), xy.top(), w, h);\n    };\n    var absolute$1 = function (element) {\n      var position = find$3(element);\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left(), position.top(), width, height);\n    };\n    var win = function () {\n      return getBounds(domGlobals.window);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var find$4 = function (queryElem) {\n      var dependent = closest(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$2(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$2(dep, 'id');\n        var doc = owner(dep);\n        return descendant$1(doc, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: constant(ariaId),\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$4(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element());\n      }, constant(false)) || isAriaPartOf(component, queryElem);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(r);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Option.none();\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          domGlobals.console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom(),\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = readOptFrom$1(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Option.some(eventConfig.get()[p]) : Option.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Option.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var nu$7 = Immutable('x', 'y', 'bubble', 'direction', 'label');\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var eastX = function (anchor) {\n      return anchor.x();\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x() + anchor.width() / 2 - element.width() / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x() + anchor.width() - element.width();\n    };\n    var northY = function (anchor, element) {\n      return anchor.y() - element.height();\n    };\n    var southY = function (anchor) {\n      return anchor.y() + anchor.height();\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y() + anchor.height() / 2 - element.height() / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x() + anchor.width();\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x() - element.width();\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), southY(anchor), bubbles.south(), south(), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1\n      ];\n    };\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasKey$1(info, name) ? info[name]() : Option.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: function () {\n          return schemaSchema;\n        },\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return readOptFrom$1(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: function () {\n          return name;\n        },\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = readOr$1('events', function (a, b) {\n              return {};\n            })(active);\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var chooseChannels = function (channels, message) {\n      return message.universal() ? channels : filter(channels, function (ch) {\n        return contains(message.channels(), ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var targetChannels = chooseChannels(channels, message);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element()), channelSchema, message.data());\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit\n    });\n\n    var focus$1 = function (element) {\n      element.dom().focus();\n    };\n    var blur = function (element) {\n      element.dom().blur();\n    };\n    var hasFocus = function (element) {\n      var doc = owner(element).dom();\n      return element.dom() === doc.activeElement;\n    };\n    var active = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : domGlobals.document;\n      return Option.from(doc.activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(owner(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var preserve = function (f, container) {\n      var ownerDoc = owner(container);\n      var refocus = active(ownerDoc).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Option.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(ownerDoc).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$8 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return readOptFrom$1(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: function () {\n            return Position(xDelta, yDelta);\n          },\n          classesOn: function () {\n            return bind(alignmentsOn, getClasses);\n          },\n          classesOff: function () {\n            return bind(alignmentsOff, getClasses);\n          }\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$8(0, 0, {});\n    };\n\n    var decision = MixedBag([\n      'x',\n      'y',\n      'width',\n      'height',\n      'maxHeight',\n      'maxWidth',\n      'direction',\n      'classes',\n      'label',\n      'candidateYforTest'\n    ], []);\n    var css = Immutable('position', 'left', 'top', 'right', 'bottom');\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x() - x;\n      var decisionY = decision.y() - y;\n      var decisionWidth = decision.width();\n      var decisionHeight = decision.height();\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Option.some(decisionX);\n      var top = Option.some(decisionY);\n      var right = Option.some(decisionRight);\n      var bottom = Option.some(decisionBottom);\n      var none = Option.none();\n      return cata(decision.direction(), function () {\n        return css(posName, left, top, none, none);\n      }, function () {\n        return css(posName, none, top, right, none);\n      }, function () {\n        return css(posName, left, none, none, bottom);\n      }, function () {\n        return css(posName, none, none, right, bottom);\n      }, function () {\n        return css(posName, left, top, none, none);\n      }, function () {\n        return css(posName, left, none, none, bottom);\n      }, function () {\n        return css(posName, left, top, none, none);\n      }, function () {\n        return css(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return css('absolute', Option.some(decision.x()), Option.some(decision.y()), Option.none(), Option.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$3, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$8();\n        return find$3(element).translate(-scroll.left(), -scroll.top());\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left(), position.top(), width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds$1);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds = b();\n          var pos = translate(origin, bounds.x(), bounds.y());\n          return bounds$1(pos.left(), pos.top(), bounds.width(), bounds.height());\n        });\n      });\n    };\n    var translate = function (origin, x, y) {\n      var pos = Position(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$8();\n        return pos.translate(-outerScroll.left(), -outerScroll.top());\n      };\n      return origin.fold(constant(pos), constant(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$4(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl')\n      ]);\n    };\n    var get$9 = function (elem, info, defaultLtr, defaultRtl) {\n      var ltr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      }).getOr(defaultLtr);\n      var rtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      }).getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element());\n      var layouts = get$9(component.element(), anchorInfo, belowOrAbove(), belowOrAboveRtl());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var pos = translate(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds$1(pos.left(), pos.top(), anchorInfo.width, anchorInfo.height);\n      var layouts = get$9(component.element(), anchorInfo, all$2(), allRtl());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var zeroWidth = function () {\n      return '\\uFEFF';\n    };\n\n    var create$2 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$2 };\n\n    var adt$4 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$4.before;\n    var on = adt$4.on;\n    var after$1 = adt$4.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative$1 = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$6 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$6.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$6.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$6.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$a(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var NBSP = '\\xA0';\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search$1 = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Option.none();\n        }\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return Element.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search$1(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$2(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = Immutable('element', 'offset');\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$a(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(function (point) {\n        return point;\n      }, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(function (point) {\n        return point;\n      }, function (point, scrollLeft, scrollTop) {\n        return point;\n      });\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left(), a.top());\n      }, Position(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$2 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom();\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element());\n        return eq(frameOwner, compOwner);\n      };\n      return Option.from(win.frameElement).map(Element.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element());\n      var outerScroll = get$8(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$2(offset, outerScroll.left(), outerScroll.top());\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(Position(newLeft, newTop));\n      return Option.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point()\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left(), topLeft.top(), box.width(), box.height());\n        var layoutsLtr = function () {\n          return anchorInfo.showAbove ? [\n            northeast$1,\n            northwest$1,\n            southeast$1,\n            southwest$1,\n            north$1,\n            south$1\n          ] : [\n            southeast$1,\n            southwest$1,\n            northeast$1,\n            northwest$1,\n            south$1,\n            south$1\n          ];\n        };\n        var layoutsRtl = function () {\n          return anchorInfo.showAbove ? [\n            northwest$1,\n            northeast$1,\n            southwest$1,\n            southeast$1,\n            north$1,\n            south$1\n          ] : [\n            southwest$1,\n            southeast$1,\n            northwest$1,\n            northeast$1,\n            south$1,\n            north$1\n          ];\n        };\n        var layouts = get$9(elem, anchorInfo, layoutsLtr(), layoutsRtl());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Option.none()\n        });\n      });\n    };\n    var ContentAnchorCommon = {\n      capRect: capRect,\n      calcNewAnchor: calcNewAnchor\n    };\n\n    var point$1 = Immutable('element', 'offset');\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point$1(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start(), sel.soffset());\n        var modFinish = descendOnce$1(sel.finish(), sel.foffset());\n        return Selection.range(modStart.element(), modStart.offset(), modFinish.element(), modFinish.offset());\n      });\n    };\n    var placement$2 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom();\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, Selection.exactFromRange(sel)).orThunk(function () {\n          var x = Element.fromText(zeroWidth());\n          before(sel.start(), x);\n          return getFirstRect$1(win, Selection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return ContentAnchorCommon.capRect(rawRect.left(), rawRect.top(), rawRect.width(), rawRect.height());\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start()) ? Option.some(sel.start()) : parent(sel.start());\n      });\n      var elem = targetElement.getOr(component.element());\n      return ContentAnchorCommon.calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.bind(function (target) {\n        var rect = target.dom().getBoundingClientRect();\n        var nodeBox = ContentAnchorCommon.capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element());\n        return ContentAnchorCommon.calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x() + anchor.width();\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x() - element.width();\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y() - element.height() + anchor.height();\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y();\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element());\n      var layouts = get$9(component.element(), submenuInfo, all$3(), allRtl$1());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var anchor = Immutable('anchorBox', 'origin');\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else {\n        return r < min ? max : r;\n      }\n    };\n    var cap = function (value, min, max) {\n      if (value <= min) {\n        return min;\n      } else {\n        return value >= max ? max : value;\n      }\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var calcReposition = function (newX, newY, width, height, bounds) {\n      var boundsX = bounds.x();\n      var boundsY = bounds.y();\n      var boundsWidth = bounds.width();\n      var boundsHeight = bounds.height();\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = Math.abs(Math.min(width, xInBounds ? boundsX + boundsWidth - newX : boundsX - (newX + width)));\n      var deltaH = Math.abs(Math.min(height, yInBounds ? boundsY + boundsHeight - newY : boundsY - (newY + height)));\n      var limitX = cap(newX, bounds.x(), bounds.right());\n      var limitY = cap(newY, bounds.y(), bounds.bottom());\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        limitX: limitX,\n        limitY: limitY,\n        deltaW: deltaW,\n        deltaH: deltaH\n      };\n    };\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x();\n      var candidateY = candidate.y();\n      var bubbleLeft = candidate.bubble().offset().left();\n      var bubbleTop = candidate.bubble().offset().top();\n      var boundsY = bounds.y();\n      var boundsBottom = bounds.bottom();\n      var boundsX = bounds.x();\n      var boundsRight = bounds.right();\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var _a = calcReposition(newX, newY, width, height, bounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, limitX = _a.limitX, limitY = _a.limitY, deltaW = _a.deltaW, deltaH = _a.deltaH;\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsBottom - limitY);\n      var maxHeight = cataVertical(candidate.direction(), downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant(limitX + deltaW - boundsX);\n      var eastAvailable = constant(boundsRight - limitX);\n      var maxWidth = cataHorizontal(candidate.direction(), eastAvailable, eastAvailable, westAvailable);\n      var reposition = decision({\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction(),\n        classes: {\n          on: candidate.bubble().classesOn(),\n          off: candidate.bubble().classesOff()\n        },\n        label: candidate.label(),\n        candidateYforTest: newY\n      });\n      return originInBounds && sizeInBounds ? adt$8.fit(reposition) : adt$8.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width();\n      var panelHeight = elementBox.height();\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$8.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$8.nofit(newReposition, newDeltaW, newDeltaH) : adt$8.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$8.fit, bestNext);\n      }, adt$8.nofit(decision({\n        x: anchorBox.x(),\n        y: anchorBox.y(),\n        width: elementBox.width(),\n        height: elementBox.height(),\n        maxHeight: elementBox.height(),\n        maxWidth: elementBox.width(),\n        direction: southeast(),\n        classes: {\n          on: [],\n          off: []\n        },\n        label: 'none',\n        candidateYforTest: anchorBox.y()\n      }), -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: constant(getOuter$2(p)),\n        height: constant(getOuter$1(p))\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(options.preference(), anchorBox, elementBox, bubbles, options.bounds());\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes();\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction();\n      maxHeightFunction(element, decision.maxHeight());\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction();\n      maxWidthFunction(element, decision.maxWidth());\n    };\n    var position = function (element, decision, options) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      var newPosition = reposition(options.origin(), decision);\n      setOptions(element, {\n        position: Option.some(newPosition.position()),\n        left: newPosition.left().map(addPx),\n        top: newPosition.top().map(addPx),\n        right: newPosition.right().map(addPx),\n        bottom: newPosition.bottom().map(addPx)\n      });\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var reparteeOptions = MixedBag([\n      'bounds',\n      'origin',\n      'preference',\n      'maxHeightFunction',\n      'maxWidthFunction'\n    ], []);\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox();\n      var origin = anchor.origin();\n      var options = reparteeOptions({\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction\n      });\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n    };\n\n    var getFixedOrigin = function () {\n      var html = domGlobals.document.documentElement;\n      return fixed(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element());\n      var bounds = component.element().dom().getBoundingClientRect();\n      return relative(position.left(), position.top(), bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element(), anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      positionWithin(component, posConfig, posState, anchor, placee, Option.none());\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      preserve(function () {\n        set$2(placee.element(), 'position', 'fixed');\n        var oldVisibility = getRaw(placee.element(), 'visibility');\n        set$2(placee.element(), 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          doPlace(component, origin, anchoring, getBounds, placee);\n        });\n        oldVisibility.fold(function () {\n          remove$6(placee.element(), 'visibility');\n        }, function (vis) {\n          set$2(placee.element(), 'visibility', vis);\n        });\n        if (getRaw(placee.element(), 'left').isNone() && getRaw(placee.element(), 'top').isNone() && getRaw(placee.element(), 'right').isNone() && getRaw(placee.element(), 'bottom').isNone() && getRaw(placee.element(), 'position').is('fixed')) {\n          remove$6(placee.element(), 'position');\n        }\n      }, placee.element());\n    };\n    var getMode = function (component, pConfig, pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', never),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      append(parent.element(), child.element());\n    };\n    var detachChildren = function (component) {\n      each(component.components(), function (childComp) {\n        return remove(childComp.element());\n      });\n      empty(component.element());\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren(component);\n      var deleted = difference(subs, newChildren);\n      each(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach(component, childComp);\n          if (inBody(component.element())) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach$1 = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element(), child.element());\n      if (inBody(parent.element())) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element());\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element()).bind(function (p) {\n        return component.getSystem().getByDom(p).toOption();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren$1 = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element());\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element());\n      var children$1 = children(guiSystem.element());\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element());\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element());\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach$1(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach$1(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (sandbox, sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (sandbox, sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element(), cssKey).fold(function () {\n        remove$1(sandbox.element(), attr);\n      }, function (v) {\n        set$1(sandbox.element(), attr, v);\n      });\n      set$2(sandbox.element(), cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      if (has$1(sandbox.element(), attr)) {\n        var oldValue = get$2(sandbox.element(), attr);\n        set$2(sandbox.element(), cssKey, oldValue);\n      } else {\n        remove$6(sandbox.element(), cssKey);\n      }\n    };\n    var cloak = function (sandbox, sConfig, sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element(), 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, sState) {\n      if (!hasPosition(sandbox.element())) {\n        remove$6(sandbox.element(), 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState,\n        setContent: setContent\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Option.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (c) {\n        contents.set(Option.some(c));\n      };\n      var get = function (c) {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Option.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var repositionPopups = constant('reposition.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', constant(false)),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([strict$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$3 = objOfOnly([\n      defaulted$1('isExtraPart', constant(false)),\n      optionObjOf('fireEventInstead', [defaulted$1('event', repositionRequested())]),\n      strictFunction('doReposition')\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Reposition', schema$3, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = function () {\n      };\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return readOptFrom$1(dataByValue.get(), itemString).orThunk(function () {\n          return readOptFrom$1(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          readOptFrom$1(item, 'meta').each(function (meta) {\n            readOptFrom$1(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$1\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$b = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, data.dump), derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$b\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return readOptFrom$1(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = valueThunk(detail, compSpec.config, compSpec.validated);\n        var childSpecs = readOptFrom$1(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n        var preprocessor = compSpec.validated.preprocess.getOr(identity);\n        return preprocessor(values);\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called === true) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Option.some, Option.none, Option.some, Option.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Option.none, Option.some, Option.none, Option.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Option.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOption();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var supplyUid = function (spec) {\n      return spec.hasOwnProperty('uid') ? spec : __assign(__assign({}, spec), { uid: generate$2('uid') });\n    };\n\n    function isSketchSpec(spec) {\n      return spec.uid !== undefined;\n    }\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: constant(config.name),\n        partFields: constant([]),\n        configFields: constant(config.configFields),\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: constant(config.name),\n        partFields: constant(config.partFields),\n        configFields: constant(config.configFields),\n        sketch: sketch,\n        parts: constant(parts)\n      }, apis), extraApis);\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$2(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element(), '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element() === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element(), hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element(), hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw new Error(err);\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element(), hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, hState) {\n      return descendant$1(component.element(), '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOption();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      return Option.from(items[index]).fold(function () {\n        return Result.error('No element found with index ' + index);\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, hState) {\n      return descendant$1(component.element(), '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOption();\n      });\n    };\n    var getLast = function (component, hConfig, hState) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Option.some(items[items.length - 1]) : Option.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOption();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOption();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, hState) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOption();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = function () {\n      return [8];\n    };\n    var TAB = function () {\n      return [9];\n    };\n    var ENTER = function () {\n      return [13];\n    };\n    var ESCAPE = function () {\n      return [27];\n    };\n    var SPACE = function () {\n      return [32];\n    };\n    var LEFT = function () {\n      return [37];\n    };\n    var UP = function () {\n      return [38];\n    };\n    var RIGHT = function () {\n      return [39];\n    };\n    var DOWN = function () {\n      return [40];\n    };\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw();\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw();\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw();\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search(component.element());\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element());\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element();\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event()).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Option.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE().concat(ENTER()))(simulatedEvent.event());\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        return derive(onFocusHandler.toArray().concat([\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ]));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', constant(true)),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$6(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element(), tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Option.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Option.some(true) : Option.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Option.some(true);\n        });\n      };\n      var go = function (component, simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element(), tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB())\n        ]), goBackwards),\n        rule(inSet(TAB()), goForwards),\n        rule(inSet(ESCAPE()), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER())\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Option.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', constant(false)));\n\n    var CyclicType = create$3(state$1('cyclic', constant(true)));\n\n    var doDefaultExecute = function (component, simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Option.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      return inside(focused) && inSet(SPACE())(simulatedEvent.event()) ? Option.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (component, simulatedEvent) {\n      return Option.some(true);\n    };\n\n    var schema$4 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element());\n    };\n    var getKeydownRules = function (component, simulatedEvent, executeConfig, executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element()) ? SPACE() : [];\n      var enterExec = executeConfig.useEnter ? ENTER() : [];\n      var downExec = executeConfig.useDown ? DOWN() : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER())\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, simulatedEvent, executeConfig, executeState) {\n      return executeConfig.useSpace && !inside(component.element()) ? [rule(inSet(SPACE()), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$4, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Option.none();\n    });\n\n    var flatgrid = function (spec) {\n      var dimensions = Cell(Option.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Option.some({\n          numRows: constant(numRows),\n          numColumns: constant(numColumns)\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows();\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns();\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: d.numRows(),\n              numColumns: d.numColumns()\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        flatgrid: flatgrid,\n        init: init$2\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element());\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element(), focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      var dom = element.dom();\n      return !isHidden(dom);\n    };\n\n    var indexInfo = MixedBag([\n      'index',\n      'candidates'\n    ], []);\n    var locate$2 = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return indexInfo({\n          index: index,\n          candidates: candidates\n        });\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = curry(eq, current);\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate$2(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row() * numCols + address.column();\n        return newIndex >= 0 && newIndex < values.length ? Option.some(values[newIndex]) : Option.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Option.some({\n          row: constant(oldRow),\n          column: constant(newColumn)\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = cap(oldColumn, 0, colsInRow - 1);\n        return Option.some({\n          row: constant(newRow),\n          column: constant(newCol)\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, gridState) {\n      descendant$1(component.element(), gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates(), identified.index(), gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (component, simulatedEvent, gridConfig, gridState) {\n      return gridConfig.captureTab ? Option.some(true) : Option.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig, gridState) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT()), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT()), east$2(moveLeft, moveRight)),\n      rule(inSet(UP()), north$2(moveNorth)),\n      rule(inSet(DOWN()), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB())\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB())\n      ]), handleTab),\n      rule(inSet(ESCAPE()), doEscape),\n      rule(inSet(SPACE().concat(ENTER())), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$5, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Option.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$2(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Option.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Option.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index();\n        var candidates = identified.candidates();\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$6 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Option.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element(), flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig) {\n        return movement(component, simulatedEvent, flowConfig).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Option.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig, _flowState) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT().concat(flowConfig.allowVertical ? UP() : []);\n      var eastMovers = RIGHT().concat(flowConfig.allowVertical ? DOWN() : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER()), execute$3),\n        rule(inSet(SPACE()), execute$3),\n        rule(inSet(ESCAPE()), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var FlowType = typical(schema$6, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Option.some(focusIn$1);\n    });\n\n    var outcome = MixedBag([\n      'rowIndex',\n      'columnIndex',\n      'cell'\n    ], []);\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Option.from(matrix[rowIndex]).bind(function (row) {\n        return Option.from(row[columnIndex]).map(function (cell) {\n          return outcome({\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          });\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = cap(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cap(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cap(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = cap(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$7 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Option.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element(), selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element()).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell();\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT()), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT()), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP()), north$2(moveNorth$1)),\n      rule(inSet(DOWN()), south$2(moveSouth$1)),\n      rule(inSet(SPACE().concat(ENTER())), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var MatrixType = typical(schema$7, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Option.some(focusIn$2);\n    });\n\n    var schema$8 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig) {\n      descendant$1(component.element(), menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig) : Option.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig) : Option.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP()), move(moveUp$1)),\n      rule(inSet(DOWN()), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB())\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB())\n      ]), fireTab),\n      rule(inSet(ENTER()), execute$5),\n      rule(inSet(SPACE()), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var MenuType = typical(schema$8, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Option.some(focusIn$3);\n    });\n\n    var schema$9 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE()), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER())\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER())\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB())\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB())\n        ]), specialInfo.onTab),\n        rule(inSet(UP()), specialInfo.onUp),\n        rule(inSet(DOWN()), specialInfo.onDown),\n        rule(inSet(LEFT()), specialInfo.onLeft),\n        rule(inSet(RIGHT()), specialInfo.onRight),\n        rule(inSet(SPACE()), specialInfo.onSpace),\n        rule(inSet(ESCAPE()), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE()), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$9, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element(), component.element());\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!hasKey$1(keyState, 'setGridSize')) {\n            domGlobals.console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      preserve(function () {\n        var newChildren = map(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element());\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq(removee.element(), child.element());\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Option.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element());\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element());\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element());\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event().prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element(), toggleClass);\n        } else {\n          remove$4(component.element(), toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function (base, toggleConfig, toggleState) {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      return [\n        run(tapOrClick(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          emitExecute(component);\n        }),\n        cutter(detect$3().deviceType.isTouch() ? touchstart() : mousedown())\n      ];\n    };\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element()).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArrays(pointerEvents(), [\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ]))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$a = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$b = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = function () {\n      return 'item-widget';\n    };\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (component) {\n                    return detail.data;\n                  },\n                  setValue: function () {\n                  }\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event().target()) ? Option.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element());\n            return Option.none();\n          } else {\n            return Option.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Option.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element());\n                return Option.none();\n              } else {\n                return Option.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$c = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$c,\n      item: schema$a,\n      separator: schema$b\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign(__assign({}, u), { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$d = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, spec, externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Option.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event();\n            menu.getSystem().getByDom(event.target()).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event().item();\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$d(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return readOptFrom$1(byMenu, finish).bind(function (triggerItem) {\n        return readOptFrom$1(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Option.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return readOptFrom$1(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Option.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Option.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Option.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$1(expansions.get(), function (v, k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return readOptFrom$1(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return primary.get().is(menuValue) ? [] : [Option.none()];\n            }, function (data) {\n              return [Option.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return readOptFrom$1(expansions.get(), itemValue).map(function (menu) {\n          var current = readOptFrom$1(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return readOptFrom$1(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Option.some(path.slice(1)) : Option.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return readOptFrom$1(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return readOptFrom$1(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return readOptFrom$1(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Option.some(prep.menu) : Option.none();\n    };\n    var LayeredState = {\n      init: init$3,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$2 = function (detail, rawUiSpec) {\n      var submenuParentItems = Cell(Option.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({ dom: spec.dom }, spec), {\n              value: name,\n              items: spec.items,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Option.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (container) {\n        return map$1(detail.data.menus, function (data, menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element(), focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Option.some(prep.menu) : Option.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element(), [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element(), '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$2(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Option.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element(), 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Option.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Option.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element(), detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element())) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element(), [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Option.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Option.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element())) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Option.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element()) ? Option.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element()) ? Option.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOption().bind(function (item) {\n              return f(container, item).map(function () {\n                return true;\n              });\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event().item();\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event().menu();\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event().item());\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event().target();\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, function () {\n            });\n          });\n        }),\n        runOnAttached(function (container, simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event().item();\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Option.from(container.components()[0]).filter(function (comp) {\n          return get$2(comp.element(), 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element(), focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onStrictHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Option.some(true);\n        },\n        onExecute: function () {\n          return Option.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), anchor, menu, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, __assign({\n            anchor: 'submenu',\n            item: item\n          }, getSubmenuLayouts(triggeringPaths)), submenu);\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, anchor, primaryMenu, getBounds());\n          each(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, __assign({\n              anchor: 'submenu',\n              item: st.triggeringItem\n            }, submenuLayouts), st.triggeredMenu);\n          });\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        showWithin(sandbox, anchor, thing, Option.none());\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        showWithinBounds(sandbox, anchor, thing, function () {\n          return boxElement.map(function (elem) {\n            return box(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, getBounds());\n        });\n        Representing.setValue(sandbox, Option.some({\n          mode: 'position',\n          anchor: anchor,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        showMenuWithinBounds(sandbox, anchor, menuSpec, function () {\n          return Option.none();\n        });\n      };\n      var showMenuWithinBounds = function (sandbox, anchor, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Option.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        Representing.setValue(sandbox, Option.none());\n        Sandboxing.close(sandbox);\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(function (tmenu) {\n                tieredMenu.repositionMenus(tmenu);\n              });\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, state.anchor, sandbox, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Option.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: constant(false) }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1(__assign(__assign({ isExtraPart: constant(false) }, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted$1('event', repositionRequested())]),\n        defaulted$1('getRelated', Option.none),\n        defaulted$1('eventOrder', Option.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x();\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x() + anchor.width() / 2 - element.width() / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x() + anchor.width() - element.width();\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y();\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y() + anchor.height() - element.height();\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSoutheast(), southeast(), 'layout-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouthwest(), southwest(), 'layout-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNortheast(), northeast(), 'layout-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNorthwest(), northwest(), 'layout-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), north(), 'layout-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), south(), 'layout-s');\n    };\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return readOptFrom$1(detail.dom, 'attributes').bind(function (attrs) {\n          return readOptFrom$1(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasKey$1(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOption();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Option.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$c = function (name, icons) {\n      return Option.from(icons()[name]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Option.from(icons()[name]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Option.from(icons()[name]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Option.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon'],\n              innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n            }\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body']\n            },\n            components: [memBannerText.asSpec()],\n            behaviours: derive$1([Replacing.config({})])\n          }\n        ].concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(Button.sketch({\n          dom: {\n            tag: 'button',\n            classes: [\n              'tox-notification__dismiss',\n              'tox-button',\n              'tox-button--naked',\n              'tox-button--icon'\n            ]\n          },\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-icon'],\n                innerHtml: get$c('close', detail.iconProvider),\n                attributes: { 'aria-label': detail.translationProvider('Close') }\n              }\n            }],\n          action: function (comp) {\n            detail.onAction(comp);\n          }\n        })),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider')\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south$3;\n        case 'tc-tc':\n          return north$3;\n        case 'tc-bc':\n          return north$1;\n        case 'bc-tc':\n        default:\n          return south$1;\n        }\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          return notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          head(notifications).each(function (firstItem) {\n            return firstItem.moveRel(null, 'banner');\n          });\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Option.from(settings.icon),\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            if (rel !== 'banner') {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                anchor: 'node',\n                root: body(),\n                node: Option.some(Element.fromDom(element)),\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showAt(notificationWrapper, nodeAnchor, premade$1(notification));\n            } else {\n              InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element().dom();\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first$1 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isText$1 = function (node) {\n      return node.nodeType === domGlobals.Node.TEXT_NODE;\n    };\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var outcome$1 = Adt.generate([\n      { aborted: [] },\n      { edge: ['element'] },\n      { success: ['info'] }\n    ]);\n    var phase = Adt.generate([\n      { abort: [] },\n      { kontinue: [] },\n      { finish: ['info'] }\n    ]);\n    var repeat = function (dom, node, offset, process, walker, recent) {\n      var terminate = function () {\n        return recent.fold(outcome$1.aborted, outcome$1.edge);\n      };\n      var recurse = function () {\n        var next = walker();\n        if (next) {\n          return repeat(dom, next, Option.none(), process, walker, Option.some(node));\n        } else {\n          return terminate();\n        }\n      };\n      if (isBoundary(dom, node)) {\n        return terminate();\n      } else if (!isText$1(node)) {\n        return recurse();\n      } else {\n        var text = node.textContent;\n        return process(phase, node, text, offset).fold(outcome$1.aborted, function () {\n          return recurse();\n        }, outcome$1.success);\n      }\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var walker = new global$3(node, rootNode || dom.getRoot());\n      return repeat(dom, node, Option.some(offset), process, walker.prev, Option.none());\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(Element.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = Element.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, Element.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom());\n        parent(wrapper).each(function (elm) {\n          return elm.dom().normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom(), getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var whiteSpace = /[\\u00a0 \\t\\r\\n]/;\n    var parse = function (text, index, ch, minChars) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (whiteSpace.test(char)) {\n          return Option.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      if (i === -1 || index - i < minChars) {\n        return Option.none();\n      }\n      return Option.some(text.substring(i + 1, index));\n    };\n    var getText = function (rng, ch) {\n      var text = rng.toString().substring(ch.length);\n      return text.replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Option.none();\n      }\n      var findTriggerCh = function (phase, element, text, optOffset) {\n        var index = optOffset.getOr(text.length);\n        return parse(text, index, ch, 1).fold(function () {\n          return text.match(whiteSpace) ? phase.abort() : phase.kontinue();\n        }, function (newText) {\n          var range = initRange.cloneRange();\n          range.setStart(element, index - newText.length - 1);\n          range.setEnd(initRange.endContainer, initRange.endOffset);\n          return text.length < minChars ? phase.abort() : phase.finish({\n            text: getText(range, ch),\n            range: range,\n            triggerChar: ch\n          });\n        });\n      };\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerCh).fold(Option.none, Option.none, Option.some);\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(Element.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom());\n        return Option.some({\n          range: range,\n          text: getText(range, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect$4(Element.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$2 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var isText$2 = function (node) {\n      return node.nodeType === domGlobals.Node.TEXT_NODE;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === domGlobals.Node.ELEMENT_NODE;\n    };\n    var toLast = function (node) {\n      if (isText$2(node)) {\n        return point$2(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$2(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$2(node, offset);\n      }\n    };\n\n    var isStartOfWord = function (dom) {\n      var process = function (phase, element, text, optOffset) {\n        var index = optOffset.getOr(text.length);\n        return index === 0 ? phase.kontinue() : phase.finish(/\\s/.test(text.charAt(index - 1)));\n      };\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return repeatLeft(dom, leaf.element, leaf.offset, process).fold(constant(true), constant(true), identity);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Option.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction\n          };\n        });\n      }));\n      return Option.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      state$1('type', function () {\n        return 'autocompleteitem';\n      }),\n      state$1('active', function () {\n        return false;\n      }),\n      state$1('disabled', function () {\n        return false;\n      }),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction')\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element(), '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom().getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom().getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Option.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Option.none());\n      var popup = Cell(Option.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (s) {\n        popup.set(Option.some(s));\n      };\n      var clearTooltip = function () {\n        popup.set(Option.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          domGlobals.clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Option.some(domGlobals.setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        init: init$4\n    });\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, tConfig, tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach$1(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (contains(receivingData.channels(), ExclusivityChannel)) {\n              hide(comp);\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        events: events$8\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom().attributes !== undefined ? elem.dom().attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom().classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = Element.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$1(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var classForPreset = function (presets) {\n      return readOptFrom$1(presetClasses, presets).getOr(navClass);\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$6.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$6.mac ? updated.join('') : updated.join('+');\n    };\n    var ConvertShortcut = { convertText: convertText };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$5.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass],\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              attributes: { style: style.styleAttr }\n            },\n            components: [text(global$5.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: ConvertShortcut.convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            iconClass,\n            checkmarkClass\n          ],\n          innerHtml: get$c('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$c('chevron-right', icons)\n        }\n      };\n    };\n    var renderDownwardsCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$c('chevron-down', icons)\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var title = itemText.map(function (text) {\n          return ' title=\"' + providerBackstage.translate(text) + '\"';\n        }).getOr('');\n        if (itemValue === colorPickerCommand) {\n          return fromHtml$2('<button class=\"' + common + ' tox-swatches__picker-btn\"' + title + '>' + icon + '</button>');\n        } else if (itemValue === removeColorCommand) {\n          return fromHtml$2('<div class=\"' + common + ' tox-swatch--remove\"' + title + '>' + icon + '</div>');\n        } else {\n          return fromHtml$2('<div class=\"' + common + '\" style=\"background-color: ' + itemValue + '\" data-mce-color=\"' + itemValue + '\"' + title + '></div>');\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? info.checkMark.orThunk(function () {\n        return icon.or(Option.some('')).map(renderIcon);\n      }) : Option.none();\n      var domTitle = info.ariaLabel.map(function (label) {\n        return { attributes: { title: global$5.translate(label) } };\n      }).getOr({});\n      var dom = merge({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Option.some(renderHtml(html));\n      });\n      var menuItem = {\n        dom: dom,\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Option.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$5.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$5.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Option.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      if (disableConfig.disabled) {\n        disable(component, disableConfig);\n      }\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element()));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element(), 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element(), 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element(), 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$2(component.element(), 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element(), 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element(), 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element(), disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element(), disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig, disableState);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig, disableState) {\n      return nu$6({ classes: disableConfig.disabled ? disableConfig.disableClass.map(pure).getOr([]) : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaulted$1('disabled', false),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (onDestroy !== null && onDestroy !== undefined) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = {\n      'alloy.execute': [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'item-events'\n      ]\n    };\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(spec.disabled),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: merge({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: Element.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var escapeRegExp = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n    var encodeText = function (text) {\n      return global$7.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$5.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escapeRegExp(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Option.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Option.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Option.none(),\n        checkMark: Option.none(),\n        caret: Option.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: function () {\n          return {};\n        },\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: function () {\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage) {\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Option.none(),\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Option.none(),\n        checkMark: useText ? Option.some(renderCheckmark(providersBackstage.icons)) : Option.none(),\n        caret: Option.none(),\n        value: spec.value\n      }, providersBackstage, true);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = constant(generate$4(owner$2(), parts()));\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(tapOrClick(), function (c, se) {\n              se.stop();\n              emitExecute(c);\n            })\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    function renderInsertTableMenuItem(spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2().widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event().row();\n                  var col = e.event().col();\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event().row() + 1,\n                    numColumns: e.event().col() + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    }\n\n    var hexColour = function (hexString) {\n      return { value: constant(hexString) };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value().replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: constant(hexString) };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value());\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red()) + toHex(rgbaColour.green()) + toHex(rgbaColour.blue());\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: constant(red),\n        green: constant(green),\n        blue: constant(blue),\n        alpha: constant(alpha)\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue() || 0) % 360;\n      var saturation = hsv.saturation() / 100;\n      var brightness = hsv.value() / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Option.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Option.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Option.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Option.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red() + ',' + rgba.green() + ',' + rgba.blue() + ',' + rgba.alpha() + ')';\n    };\n    var redColour = constant(rgbaColour(255, 0, 0, 1));\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = domGlobals.document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n    var Settings = {\n      mapColors: mapColors,\n      getColorCols: getColorCols,\n      hasCustomColors: hasCustomColors,\n      getColorMap: getColorMap,\n      getColors: getColors,\n      getCurrentColors: getCurrentColors,\n      addColor: addColor\n    };\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireBeforeRenderUI = function (editor) {\n      return editor.fire('BeforeRenderUI');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n    var Events = {\n      fireSkinLoaded: fireSkinLoaded,\n      fireResizeEditor: fireResizeEditor,\n      fireScrollContent: fireScrollContent,\n      fireBeforeRenderUI: fireBeforeRenderUI,\n      fireResizeContent: fireResizeContent,\n      fireTextColorChange: fireTextColorChange\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = Settings.getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return Settings.getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            Settings.addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getMenuColors = function (colors, hasCustom) {\n      return colors.concat(Settings.getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getMenuColors(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var setIconFillAndStroke = function (pathId, color) {\n        splitButtonApi.setIconFill(pathId, color);\n        splitButtonApi.setIconStroke(pathId, color);\n      };\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      setIconFillAndStroke(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Option.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value();\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(Settings.getColors(editor), Settings.hasCustomColors(editor)),\n        onAction: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), function () {\n            });\n          }\n        },\n        onItemAction: function (splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            Events.fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var getOnSubmit = function (callback) {\n          return function (api) {\n            var data = api.getData();\n            callback(Option.from(data.colorpicker));\n            api.close();\n          };\n        };\n        var onAction = function (api, details) {\n          if (details.name === 'hex-valid') {\n            if (details.value) {\n              api.enable('ok');\n            } else {\n              api.disable('ok');\n            }\n          }\n        };\n        var initialData = { colorpicker: value };\n        var submit = getOnSubmit(callback);\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: submit,\n          onClose: function () {\n          },\n          onCancel: function () {\n            callback(Option.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n    var ColorSwatch = {\n      register: register$1,\n      getColors: getMenuColors,\n      getFetch: getFetch,\n      colorPickerDialog: colorPickerDialog,\n      getCurrentColor: getCurrentColor,\n      getColorCols: getColorCols$1,\n      calcCols: calcCols\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts().items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts().items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts().items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts().items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts().items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var hasIcon = function (item) {\n      return item.icon !== undefined || item.type === 'togglemenuitem' || item.type === 'choicemenuitem';\n    };\n    var menuHasIcons = function (xs) {\n      return exists(xs, hasIcon);\n    };\n    var handleError = function (error) {\n      domGlobals.console.error(formatError(error));\n      domGlobals.console.log(error);\n      return Option.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Option.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage));\n          });\n        } else {\n          return Option.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    function renderColorSwatchItem(spec, backstage) {\n      var items = ColorSwatch.getColors(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n        return false;\n      }, backstage.shared.providers);\n      var widgetSpec = deepMerge(__assign(__assign({}, menuSpec), {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      }));\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2().widget(Menu.sketch(widgetSpec))]\n      };\n    }\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Option.some(obj[key]) : Option.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        caret: Option.none(),\n        checkMark: Option.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse);\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        caret: Option.some(caret),\n        checkMark: Option.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage) {\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: Option.none(),\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        checkMark: Option.some(renderCheckmark(providersBackstage.icons)),\n        caret: Option.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, true);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var hasIcon$1 = function (item) {\n      return item.icon !== undefined || item.type === 'togglemenuitem' || item.type === 'choicemenuitem';\n    };\n    var menuHasIcons$1 = function (xs) {\n      return exists(xs, hasIcon$1);\n    };\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Option.none(),\n          icon: menuitem.text.isSome() ? Option.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Option.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Option.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Option.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Option.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          domGlobals.console.error('Unknown item in general menu', item);\n          return Option.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons$1(items);\n      return cat(map(items, function (item) {\n        if (item.type === 'separator') {\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Option.some(separator(d));\n          });\n        } else {\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Option.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons$1(items);\n      var alloyItems = cat(map(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !i.hasOwnProperty('text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(merge(item, { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Option.none());\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(Element.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Option.none());\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Option.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return domGlobals.console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Option.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Option.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: Element.fromDom(editor.getBody()),\n          node: Option.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n    };\n    var Autocompleter = { register: register$2 };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = Element.fromDom(rawEvent.target);\n      var stop = function () {\n        rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) {\n          return;\n        }\n        handler(fromRawEvent(rawEvent));\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = constant(true);\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$1, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$1, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    function DelayedFunction (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = domGlobals.setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          domGlobals.clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    }\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw();\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Option.none();\n      }\n      return Option.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x());\n      var distY = Math.abs(touch.clientY - data.y());\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Option.none());\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: constant(touch.clientX),\n            y: constant(touch.clientY),\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(Option.some(data));\n        });\n        return Option.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Option.none());\n            }\n          });\n        });\n        return Option.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target(), event.target());\n        };\n        return startData.get().filter(isSame).map(function (data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return readOptFrom$1(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw();\n      return keyEv.which === BACKSPACE()[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target())) && !closest$4(event.target(), '[contenteditable=\"true\"]');\n    };\n    var isFirefox = detect$3().browser.isFirefox();\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = detect$3().deviceType.isTouch() ? [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart'\n      ] : [\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Option.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Option.some(domGlobals.setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Option.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Option.some(domGlobals.setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(domGlobals.clearTimeout);\n        focusoutTimeout.get().each(domGlobals.clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = readOptFrom$1(rawEvent, 'target').map(function (getTarget) {\n        return getTarget();\n      }).getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: constant(event),\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: constant(false),\n        event: constant(event),\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler();\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element(), descHandler.purpose());\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element(), descHandler.purpose());\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element()).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element(), descHandler.purpose());\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element(), descHandler.purpose());\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(function () {\n        return true;\n      }, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, function () {\n        return false;\n      });\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler();\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      var rawTarget = rawEvent.target();\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = Immutable('element', 'descHandler');\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: constant(id),\n        descHandler: constant(handler)\n      };\n    };\n    function EventRegistry () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Option.none();\n        }, function (id) {\n          var reader = readOpt$1(id);\n          return handlers.bind(reader).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return readOptFrom$1(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var readType = readOpt$1(type);\n        var handlers = readType(registry);\n        return closest$1(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    }\n\n    function Registry () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element();\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element());\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element()) + '\\nCannot use it for: ' + element(component.element()) + '\\n' + 'The conflicting element is' + (inBody(conflict.element()) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasKey$1(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events());\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element()).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return readOpt$1(id)(components);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    }\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$b(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element()).fold(function () {\n          return true;\n        }, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element(), {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target(), function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: constant(originator),\n                kill: noop,\n                prevent: noop,\n                target: constant(target)\n              }, target, logger);\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element(), simulatedEvent.event());\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: constant(true)\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element())) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element(), { target: constant(component.element()) });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element())) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach$1(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element());\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler();\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: constant(true),\n          data: constant(message)\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: constant(false),\n          channels: constant(channels),\n          data: constant(message)\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: constant(root),\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var settings = editor.settings;\n      var skin = settings.skin;\n      var skinUrl = settings.skin_url;\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$9.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$7.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Option.from(editor.settings.min_width).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Option.from(editor.settings.min_height).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Option.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Option.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Option.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var keys$1 = keys(editor.settings);\n      var toolbarKeys = filter(keys$1, function (key) {\n        return /^toolbar([1-9])$/.test(key);\n      });\n      var toolbars = map(toolbarKeys, function (key) {\n        return editor.getParam(key, false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Option.some(toolbarArray) : Option.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, function () {\n        return true;\n      });\n    };\n    var ToolbarDrawer;\n    (function (ToolbarDrawer) {\n      ToolbarDrawer['default'] = '';\n      ToolbarDrawer['floating'] = 'floating';\n      ToolbarDrawer['sliding'] = 'sliding';\n      ToolbarDrawer['scrolling'] = 'scrolling';\n    }(ToolbarDrawer || (ToolbarDrawer = {})));\n    var getToolbarDrawer = function (editor) {\n      return editor.getParam('toolbar_drawer', '', 'string');\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedContainerElement = function (editor) {\n      var selector = fixedContainerSelector(editor);\n      return selector.length > 0 && editor.inline ? descendant$1(body(), selector) : Option.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerElement(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerElement(editor);\n      return fixedContainer.getOr(body());\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n\n    var SIGNIFICANT_MOVE$1 = 5;\n    var LONGPRESS_DELAY$1 = 400;\n    var getTouch$1 = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Option.none();\n      }\n      return Option.some(event.touches[0]);\n    };\n    var isFarEnough$1 = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x());\n      var distY = Math.abs(touch.clientY - data.y());\n      return distX > SIGNIFICANT_MOVE$1 || distY > SIGNIFICANT_MOVE$1;\n    };\n    var setup$2 = function (editor) {\n      var startData = Cell(Option.none());\n      var longpressFired = Cell(false);\n      var debounceLongpress = last$2(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY$1);\n      editor.on('touchstart', function (e) {\n        getTouch$1(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: constant(touch.clientX),\n            y: constant(touch.clientY),\n            target: constant(e.target)\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(Option.some(data));\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch$1(e).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough$1(touch, data)) {\n              startData.set(Option.none());\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target().isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            var result = editor.fire('tap');\n            if (result.isDefaultPrevented()) {\n              e.preventDefault();\n            }\n          }\n        });\n      }, true);\n    };\n    var TouchEvents = { setup: setup$2 };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$c(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$e = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element(), 'for', id);\n              set$1(field.element(), 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element(), 'id', descriptorId);\n              set$1(field.element(), 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$e(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var schema$f = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: detail.selectOnFocus === false ? noop : function (component) {\n            var input = component.element();\n            var value = get$5(input);\n            input.dom().setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: {\n            mode: 'manual',\n            initialValue: detail.data.getOr(undefined),\n            getValue: function (input) {\n              return get$5(input.element());\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element());\n              if (current !== data) {\n                set$3(input.element(), data);\n              }\n            }\n          },\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$5 = function (detail, spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$f(),\n      factory: factory$5\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$2 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$2\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element())) {\n          set$1(component.element(), 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element())) {\n          set$1(component.element(), 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$a = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        events: events$a\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Option.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Option.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts().label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function (spec) {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return readOptFrom$1(coupled, name).getOrThunk(function () {\n            var builder = readOptFrom$1(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Option.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, primaryMenu);\n              each(submenuTriggers, function (st) {\n                Positioning.position(sink, {\n                  anchor: 'submenu',\n                  item: st.triggeringItem\n                }, st.triggeredMenu);\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Option.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$7(hotspot.element());\n      if (useMinWidth) {\n        set$2(menu.element(), 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element(), buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element());\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element());\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id(),\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel({ isExtraPart: constant(false) })), receivingChannel$1({\n              isExtraPart: constant(false),\n              doReposition: doRepositionMenus\n            }))\n          })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$4 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return readOptFrom$1(detail.dom, 'attributes').bind(function (attrs) {\n          return readOptFrom$1(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, se) {\n        emitExecute(comp);\n        return Option.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Option.some(true);\n            },\n            onEscape: function (comp, se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Option.some(true);\n              } else {\n                return Option.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Option.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$4(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function (base, unselectConfig) {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$b = function (unselectConfig) {\n      return derive([abort(selectstart(), constant(true))]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        events: events$b,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Option.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n              return false;\n            }, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts().field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(function () {\n          });\n        },\n        inputBehaviours: derive$1([\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element());\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = Element.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                Settings.addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: Option.some({\n          onRtl: function () {\n            return [southeast$1];\n          },\n          onLtr: function () {\n            return [southwest$1];\n          }\n        }),\n        components: [],\n        fetch: ColorSwatch.getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element(), 'background-color', se.event().color());\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event().value());\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: constant(hue),\n        saturation: constant(saturation),\n        value: constant(value)\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red() / 255;\n      var g = rgbaColour.green() / 255;\n      var b = rgbaColour.blue() / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var calcHex = function (value) {\n      var hue = (100 - value) / 100 * 360;\n      var hsv = hsvColour(hue, 100, 100);\n      var rgb = fromHsv(hsv);\n      return fromRgba(rgb);\n    };\n\n    var fieldsUpdate = constant(generate$1('rgb-hex-update'));\n    var sliderUpdate = constant(generate$1('slider-update'));\n    var paletteUpdate = constant(generate$1('palette-update'));\n\n    var platform$1 = detect$3();\n    var isTouch = platform$1.deviceType.isTouch();\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            var touchEvents = derive([runActionExtra(touchstart(), a, [detail])]);\n            var mouseEvents = derive([\n              runActionExtra(mousedown(), a, [detail]),\n              runActionExtra(mousemove(), function (l, det) {\n                if (det.mouseIsDown.get()) {\n                  a(l, det);\n                }\n              }, [detail])\n            ]);\n            return { events: isTouch ? touchEvents : mouseEvents };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        var touchEvents = derive([\n          run(touchstart(), setValueFrom),\n          run(touchmove(), setValueFrom)\n        ]);\n        var mouseEvents = derive([\n          run(mousedown(), setValueFrom),\n          run(mousemove(), function (spectrum, se) {\n            if (detail.mouseIsDown.get()) {\n              setValueFrom(spectrum, se);\n            }\n          })\n        ]);\n        return {\n          behaviours: derive$1(isTouch ? [] : [\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: isTouch ? touchEvents : mouseEvents\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var isTouch$1 = detect$3().deviceType.isTouch();\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event().raw();\n      if (isTouch$1) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Option.some(touchEvent.touches[0]).map(function (t) {\n          return Position(t.clientX, t.clientY);\n        }) : Option.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Option.some(mouseEvent).map(function (me) {\n          return Position(me.clientX, me.clientY);\n        }) : Option.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: constant(x) };\n    };\n    var yValue = function (y) {\n      return { y: constant(y) };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds$1 = function (component) {\n      return component.element().dom().getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: constant(x) };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x(), minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Option.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left();\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Option.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Option.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x(), edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element()) / 2;\n      set$2(thumb.element(), 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Option.none;\n    var onDown = Option.none;\n    var edgeActions = {\n      'top-left': Option.none(),\n      'top': Option.none(),\n      'top-right': Option.none(),\n      'right': Option.some(setToREdge),\n      'bottom-right': Option.none(),\n      'bottom': Option.none(),\n      'bottom-left': Option.none(),\n      'left': Option.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: constant(y) };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y(), minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Option.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top();\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Option.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Option.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y(), edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$6(thumb.element()) / 2;\n      set$2(thumb.element(), 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Option.none;\n    var onRight$1 = Option.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Option.none(),\n      'top': Option.some(setToTEdge),\n      'top-right': Option.none(),\n      'right': Option.none(),\n      'bottom-right': Option.none(),\n      'bottom': Option.some(setToBEdge),\n      'bottom-left': Option.none(),\n      'left': Option.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left());\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top());\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x() : f(currentValue(detail).x(), minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y() : f(currentValue(detail).y(), minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Option.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x(), edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y(), edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$7(thumb.element()) / 2;\n      var thumbYRadius = get$6(thumb.element()) / 2;\n      set$2(thumb.element(), 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element(), 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Option.some(setToTLEdgeXY),\n      'top': Option.some(setToTEdgeXY),\n      'top-right': Option.some(setToTREdgeXY),\n      'right': Option.some(setToREdgeXY),\n      'bottom-right': Option.some(setToBREdgeXY),\n      'bottom': Option.some(setToBEdgeXY),\n      'bottom-left': Option.some(setToBLEdgeXY),\n      'left': Option.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var isTouch$2 = detect$3().deviceType.isTouch();\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: constant(spec.mode.minX),\n              y: constant(spec.mode.minY)\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ])\n    ].concat(!isTouch$2 ? [state$1('mouseIsDown', function () {\n        return Cell(false);\n      })] : []);\n\n    var isTouch$3 = detect$3().deviceType.isTouch();\n    var sketch = function (detail, components, _spec, _externals) {\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var changeValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n        detail.onChange(slider, thumb, newValue);\n        return Option.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var touchEvents = [\n        run(touchstart(), function (slider, _simulatedEvent) {\n          detail.onDragStart(slider, getThumb(slider));\n        }),\n        run(touchend(), function (slider, _simulatedEvent) {\n          detail.onDragEnd(slider, getThumb(slider));\n        })\n      ];\n      var mouseEvents = [\n        run(mousedown(), function (slider, simulatedEvent) {\n          simulatedEvent.stop();\n          detail.onDragStart(slider, getThumb(slider));\n          detail.mouseIsDown.set(true);\n        }),\n        run(mouseup(), function (slider, _simulatedEvent) {\n          detail.onDragEnd(slider, getThumb(slider));\n        })\n      ];\n      var uiEventsArr = isTouch$3 ? touchEvents : mouseEvents;\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, flatten([\n          !isTouch$3 ? [Keying.config({\n              mode: 'special',\n              focusIn: function (slider) {\n                return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(constant(true));\n              }\n            })] : [],\n          [\n            Representing.config({\n              store: {\n                mode: 'manual',\n                getValue: function (_) {\n                  return modelDetail.value.get();\n                }\n              }\n            }),\n            Receiving.config({\n              channels: {\n                'mouse.released': {\n                  onReceive: function (slider, se) {\n                    var fireOnChoose = function () {\n                      getPart(slider, detail, 'thumb').each(function (thumb) {\n                        var value = modelDetail.value.get();\n                        detail.onChoose(slider, thumb, value);\n                      });\n                    };\n                    if (isTouch$3) {\n                      fireOnChoose();\n                    } else {\n                      var wasDown = detail.mouseIsDown.get();\n                      detail.mouseIsDown.set(false);\n                      if (wasDown) {\n                        fireOnChoose();\n                      }\n                    }\n                  }\n                }\n              }\n            })\n          ]\n        ])),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event().value());\n          }),\n          runOnAttached(function (slider, simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          })\n        ].concat(uiEventsArr)),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          changeValue: changeValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts().spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts().thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: constant(0) })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate(), { value: value });\n        }\n      });\n    };\n    var HueSlider = { sliderFactory: sliderFactory };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$4, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components, spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, 'missing current');\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts().label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts().field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts()['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value() });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red();\n        var green = rgb.green();\n        var blue = rgb.blue();\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element(), 'background-color', '#' + hex.value());\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: constant(Cell(Option.some(255))),\n          green: constant(Cell(Option.some(255))),\n          blue: constant(Cell(Option.some(255))),\n          hex: constant(Cell(Option.some('ffffff')))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop]().get();\n        };\n        var set = function (prop, value) {\n          state[prop]().set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red();\n          var green = rgb.green();\n          var blue = rgb.blue();\n          set('red', Option.some(red));\n          set('green', Option.some(green));\n          set('blue', Option.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event();\n          if (data.type() !== 'hex') {\n            set(data.type(), Option.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Option.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate(), { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Option.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type() === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event();\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value());\n          } else {\n            onValidRgb(form, data.type(), data.value());\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value() });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n    var RgbForm = { rgbFormFactory: rgbFormFactory };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts().spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts().thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setSliderColour = function (slider, rgba) {\n        var canvas = slider.components()[0].element().dom();\n        setColour(canvas, toString(rgba));\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: constant(0),\n          y: constant(0)\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate(), { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element().dom(), toString(redColour()));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Option.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setRgba: function (_apis, slider, rgba) {\n            setSliderColour(slider, rgba);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n    var SaturationBrightnessPalette = { paletteFactory: paletteFactory };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = RgbForm.rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = SaturationBrightnessPalette.paletteFactory(translate, getClass);\n        var state = { paletteRgba: constant(Cell(redColour())) };\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            var rgba = fromHex(hex);\n            state.paletteRgba().set(rgba);\n            sbPalette.setRgba(palette, rgba);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var runUpdates = function (anyInSystem, hex, updates) {\n          each(updates, function (update) {\n            update(anyInSystem, hex);\n          });\n        };\n        var paletteUpdates = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event().value();\n            var oldRgb = state.paletteRgba().get();\n            var hsvColour$1 = fromRgb(oldRgb);\n            var newHsvColour = hsvColour(hsvColour$1.hue(), value.x(), 100 - value.y());\n            var rgb = fromHsv(newHsvColour);\n            var nuHex = fromRgba(rgb);\n            runUpdates(form, nuHex, updates);\n          };\n        };\n        var sliderUpdates = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event().value();\n            var hex = calcHex(value.y());\n            runUpdates(form, hex, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            HueSlider.sliderFactory(translate, getClass),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(paletteUpdate(), paletteUpdates()),\n              run(sliderUpdate(), sliderUpdates())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n    var ColourPicker = { makeFactory: makeFactory };\n\n    var self$1 = function () {\n      return Composing.config({ find: Option.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element(), index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOption();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = ColourPicker.makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  domGlobals.console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Option.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Option.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Option.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('editor-foo-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element().dom()) : global$a.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element().dom(), spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Option.none());\n                  editorApi.set(Option.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Option.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element());\n      }, function (c, v) {\n        return setter(c.element(), v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$1, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var extensionsAccepted = '.jpg,.jpeg,.png,.gif';\n    var filterByExtension = function (files) {\n      var re = new RegExp('(' + extensionsAccepted.split(/\\s*,\\s*/).join('|') + ')$', 'i');\n      return filter(from$1(files), function (file) {\n        return re.test(file.name);\n      });\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event().raw();\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var files = simulatedEvent.event().raw().target.files;\n        handleFiles(component, files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [cutter(tapOrClick())])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element().dom().click();\n                  },\n                  buttonBehaviours: derive$1([Tabstopping.config({})])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts().field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element();\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), constant(false));\n    };\n    var NavigableObject = {\n      isPseudoStop: isPseudoStop,\n      onFocus: onFocus$1,\n      craft: craft\n    };\n\n    var platformNeedsSandboxing = !(detect$3().browser.isIE() || detect$3().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element(), 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element().dom().contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element(), 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return NavigableObject.craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Option.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts().field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    function create$5(width, height) {\n      return resize(domGlobals.document.createElement('canvas'), width, height);\n    }\n    function clone$1(canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof window.setImmediate === 'function' && window.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    function blobToImage(blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = domGlobals.URL.createObjectURL(blob);\n        var image = new domGlobals.Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Option.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = domGlobals.atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Option.some(new domGlobals.Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (domGlobals.HTMLCanvasElement.prototype.toBlob) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      domGlobals.URL.revokeObjectURL(image.src);\n    }\n\n    function create$6(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise$1.resolve(blob);\n      }\n      function toDataURL() {\n        return uri;\n      }\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone$1);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    function clamp(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity$1() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$c(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$c(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = {\n      'alloy.execute': [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'toolbar-button-events'\n      ]\n    };\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event().raw() });\n        Dropdown.close(dropdown);\n        return Option.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign(__assign({}, role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Option.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$c('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArrays(spec.dropdownBehaviours, [\n          DisablingConfigs.button(spec.disabled),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event().text()))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event().icon(), sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function () {\n          return Future.nu(spec.fetch);\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = readOptFrom$1(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Option.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Option.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element();\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element(), 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch$1 = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$1(orig.element());\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({ type: item.type }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(spec.disabled),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Option.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Option.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArrays(!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Option.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          domGlobals.console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), { fetch: getFetch$1(menuButtonSpec.items, getButton, backstage) });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Option.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        domGlobals.console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Option.none(), FormField.parts().field(__assign({ factory: Button }, renderButtonSpec(spec, Option.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$5 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, spec, externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Option.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasKey$1(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasKey$1(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$5(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Option.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Option.some(size.value);\n        } else {\n          return Option.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var noSizeConversion = function (input) {\n      return Option.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOption();\n      var oValue = parseSize(otherFieldText).toOption();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts().lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$c('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$c('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(spec.disabled),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts().field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({ disabled: spec.disabled }),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts().field1(formGroup([\n        FormField.parts().label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts().field2(formGroup([\n        FormField.parts().label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: spec.disabled,\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event().isField1();\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Option.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Option.some(icon),\n          tooltip: Option.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Option.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts().label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts().spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts().thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: constant(value) })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x() / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, thumb, value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x() / 100;\n                var g = Representing.getValue(green).x() / 100;\n                var b = Representing.getValue(blue).x() / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Option.some(sharpen$1);\n      var invertTransform = Option.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Option.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Option.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Option.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Option.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Option.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Option.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Option.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    function getDocumentSize(doc) {\n      var documentElement, body, scrollWidth, clientWidth;\n      var offsetWidth, scrollHeight, clientHeight, offsetHeight;\n      var max = Math.max;\n      documentElement = doc.documentElement;\n      body = doc.body;\n      scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || domGlobals.document;\n      var downButton;\n      var start, stop, drag, startX, startY;\n      settings = settings || {};\n      var handleElement = doc.getElementById(settings.handle || id);\n      start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var handleElm, cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (domGlobals.window.getComputedStyle) {\n          cursor = domGlobals.window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$b('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$b(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      stop = function (e) {\n        updateWithTouchData(e);\n        global$b(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$b(handleElement).off();\n      };\n      global$b(handleElement).on('mousedown touchstart', start);\n    }\n\n    var count = 0;\n    var create$7 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var instance;\n      var dragHelpers;\n      var blockers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$c.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$b('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$e.each(blockers, function (blocker) {\n          global$b('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$e.each(handles, function (handle) {\n          global$b('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$e.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$b(containerElm).on('focusin focusout', function (e) {\n          global$b(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$b(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$e.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$f.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$f.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$f.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$f.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$f.ENTER:\n          case global$f.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors;\n        selectors = global$e.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$e.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$b(selectors, containerElm).show();\n        } else {\n          global$b(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$b('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$e.each(handles, function (handle) {\n          global$b('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$e.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      instance = global$e.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$d);\n      return instance;\n    };\n    var CropRect = { create: create$7 };\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Option.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$7(panel.element());\n          var panelH = get$6(panel.element());\n          var width = img.dom().naturalWidth * zoom;\n          var height = img.dom().naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element(), css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$7(panel.element());\n          var panelH = get$6(panel.element());\n          var width = img.dom().naturalWidth;\n          var height = img.dom().naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = Element.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom()).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Option.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom().naturalWidth,\n              h: img.dom().naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$c.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element();\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element().dom();\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, function () {\n                    });\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Option.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Option.some(icon),\n        disabled: disabled,\n        tooltip: Option.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed;\n        removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Option.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Option.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: domGlobals.URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        domGlobals.URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$e.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Option.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Option.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(function () {\n        }, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event().direction();\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          domGlobals.console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event().swap();\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event().swap();\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event().transform(), noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event().transform());\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event().transform(), simulatedEvent.event().swap());\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event().transform();\n        var swap = simulatedEvent.event().swap();\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var factory$8 = function (detail, spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element());\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element(), newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts().field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({ disabled: spec.disabled }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Option.none() : Option.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$c('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: spec.disabled,\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({ disabled: spec.disabled }),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Option.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element());\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts().field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [Disabling.config({\n          disabled: spec.disabled,\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        })];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Option.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Option.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Option.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$c = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        events: events$c\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$3 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$3,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element();\n      var value = get$5(el);\n      var node = el.dom();\n      if (get$2(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Option.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Option.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Option.none();\n      }\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$5 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element(), 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element());\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element(), detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element()).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Option.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Option.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Option.some(true);\n            }\n            return Option.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Option.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Option.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event().item());\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event().item(), Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element()).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$j = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$f()).concat(sandboxFields()));\n    var parts$6 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOption().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$j(),\n      partFields: parts$6(),\n      factory: make$5\n    });\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = domGlobals.setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              domGlobals.clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: function () {\n        }\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: function () {\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Option.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Option.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts().field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element());\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element(), 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({ disabled: spec.disabled }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$c(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Option.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({ disabled: spec.disabled })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Option.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var urlData = Representing.getValue(field);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: spec.disabled,\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element().dom();\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element().dom();\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element().dom().click();\n        return Option.some(true);\n      };\n      var pField = FormField.parts().field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({ disabled: spec.disabled }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts().label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$c(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: spec.disabled,\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Option.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var renderCollection = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event().target(), '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$2(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var escapeAttribute = function (ch) {\n        if (ch === '\"') {\n          return '&quot;';\n        }\n        return ch;\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$5.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          return '<div class=\"tox-collection__item\" tabindex=\"-1\" data-collection-item-value=\"' + escapeAttribute(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns > 1 && spec.columns !== 'auto' ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element(), html.join(''));\n      };\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$1(tgt);\n        })),\n        run(tapOrClick(), runOnItem(function (comp, se, tgt, itemValue) {\n          se.stop();\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        })),\n        run(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant$1(comp.element(), '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp) {\n          descendant$1(comp.element(), '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var pField = FormField.parts().field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ])\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return readOptFrom$1(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return readOptFrom$1(factories, spec.type).fold(function () {\n        domGlobals.console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var expandable$1 = constant(function (element, available) {\n      setMax$1(element, Math.floor(available));\n    });\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getToolbarAnchor = function (bodyElement, lazyAnchorbar, useFixedToolbarContainer) {\n      var fixedToolbarAnchor = function () {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: Option.from(bodyElement()),\n          bubble: nu$8(-12, -12, bubbleAlignments),\n          layouts: {\n            onRtl: function () {\n              return [northeast$3];\n            },\n            onLtr: function () {\n              return [northwest$3];\n            }\n          },\n          overrides: { maxHeightFunction: expandable() }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$8(-12, 12, bubbleAlignments),\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          },\n          overrides: { maxHeightFunction: expandable() }\n        };\n      };\n      return useFixedToolbarContainer ? fixedToolbarAnchor : standardAnchor;\n    };\n    var getBannerAnchor = function (bodyElement, lazyAnchorbar, useFixedToolbarContainer) {\n      var fixedToolbarAnchor = function () {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: Option.from(bodyElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return useFixedToolbarContainer ? fixedToolbarAnchor : standardAnchor;\n    };\n    var getToolbarOverflowAnchor = function (lazyMoreButton) {\n      return function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyMoreButton(),\n          overrides: { maxWidthFunction: expandable$1() },\n          layouts: {\n            onRtl: function () {\n              return [\n                southeast$1,\n                southwest$1\n              ];\n            },\n            onLtr: function () {\n              return [\n                southwest$1,\n                southeast$1\n              ];\n            }\n          }\n        };\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Option.some(Selection.range(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, lazyMoreButton) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return Element.fromDom(editor.getBody());\n      };\n      return {\n        toolbar: getToolbarAnchor(bodyElement, lazyAnchorbar, useFixedToolbarContainer),\n        toolbarOverflow: getToolbarOverflowAnchor(lazyMoreButton),\n        banner: getBannerAnchor(bodyElement, lazyAnchorbar, useFixedToolbarContainer),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n    var Anchors = { getAnchors: getAnchors };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = ColorSwatch.colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return Settings.hasCustomColors(editor);\n      };\n    };\n    var getColors$1 = function (editor) {\n      return function () {\n        return Settings.getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return ColorSwatch.getColorCols(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$1(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            icon: 'bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            icon: 'italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            icon: 'underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            icon: 'strike-through',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            icon: 'superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            icon: 'subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            icon: 'code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            icon: 'align-left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            icon: 'align-center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            icon: 'align-right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            icon: 'align-justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = 'custom-' + fmt.title.toLowerCase();\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatName,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatName,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = {\n          type: 'submenu',\n          isSelected: constant(false),\n          getStylePreview: function () {\n            return Option.none();\n          }\n        };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = generate$1(item.title);\n        var customSpec = {\n          type: 'formatter',\n          format: formatName,\n          isSelected: isSelectedFor(formatName),\n          getStylePreview: getPreviewFor(formatName)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasKey$1(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasKey$1(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styleAttr: editor.formatter.getCssText(format)\n          }) : Option.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('init', function () {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var trim$1 = global$e.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$8 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(Element.fromDom(root), selector), function (element) {\n        return element.dom();\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$8('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$8('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = domGlobals.localStorage.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          domGlobals.console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        domGlobals.console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      domGlobals.localStorage.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$e.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getOpt = function (obj, key) {\n      return hasOwnProperty$2.call(obj, key) ? Option.some(obj[key]) : Option.none();\n    };\n    var getTextSetting = function (settings, name, defaultValue) {\n      var value = getOpt(settings, name).getOr(defaultValue);\n      return isString(value) ? Option.some(value) : Option.none();\n    };\n    var getPicker = function (settings) {\n      return Option.some(settings.file_picker_callback).filter(isFunction);\n    };\n    var getPickerTypes = function (settings) {\n      var optFileTypes = Option.some(settings.file_picker_types).filter(isTruthy);\n      var optLegacyTypes = Option.some(settings.file_browser_callback_types).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(settings).fold(function () {\n        return false;\n      }, function (_picker) {\n        return optTypes.fold(function () {\n          return true;\n        }, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (settings, filetype) {\n      var pickerTypes = getPickerTypes(settings);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(settings) : Option.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(settings) : Option.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor.settings, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = global$e.extend({ filetype: filetype }, Option.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getLinkInformation = function (editor) {\n      if (editor.settings.typeahead_urls === false) {\n        return Option.none();\n      }\n      return Option.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(editor.settings, 'anchor_top', '#top').getOrUndefined(),\n        anchorBottom: getTextSetting(editor.settings, 'anchor_bottom', '#bottom').getOrUndefined()\n      });\n    };\n    var getValidationHandler = function (editor) {\n      var optValidator = Option.from(editor.settings.file_picker_validator_handler).filter(isFunction);\n      return optValidator.orThunk(function () {\n        return Option.from(editor.settings.filepicker_validator_handler).filter(isFunction);\n      });\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar, lazyMoreButton) {\n      var contextMenuState = Cell(false);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$5.translate\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: Anchors.getAnchors(editor, lazyAnchorbar, lazyMoreButton),\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var schema$k = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function (detail) {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$7 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$9 = function (detail, components, spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          domGlobals.console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Option.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$k(),\n      partFields: parts$7(),\n      factory: factory$9,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish(),\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = Immutable('within', 'extra', 'withinWidth');\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Option.some({\n          element: constant(unit),\n          start: constant(current),\n          finish: constant(current + width),\n          width: constant(width)\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish() <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width();\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: constant(within),\n        extra: constant(extra),\n        withinWidth: constant(withinWidth)\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element();\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra().length === 0 ? Option.some(divide) : Option.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within();\n      var extra = divide.extra();\n      var withinWidth = divide.withinWidth();\n      if (extra.length === 1 && extra[0].width() <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setStoredGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (overflow, overflowButton) {\n      return overflow.bind(function (overf) {\n        return search(overf.element()).bind(function (focusedElm) {\n          return overf.getSystem().getByDom(focusedElm).toOption();\n        });\n      }).orThunk(function () {\n        return overflowButton.filter(Focusing.isFocused);\n      });\n    };\n    var refresh = function (toolbar, detail, overflow, isOpen) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowButton = getPart(toolbar, detail, 'overflow-button');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element(), 'visibility', 'hidden');\n      var focusedComp = findFocusedComp(overflow, overflowButton);\n      overflow.each(function (overf) {\n        Toolbar.setGroups(overf, []);\n      });\n      var groups = detail.builtGroups.get();\n      setStoredGroups(primary, groups.concat([overflowGroup]));\n      var total = get$7(primary.element());\n      var overflows = partition$3(total, groups, function (comp) {\n        return get$7(comp.element());\n      }, overflowGroup);\n      if (overflows.extra().length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        overflow.each(function (overf) {\n          Toolbar.setGroups(overf, []);\n        });\n      } else {\n        setStoredGroups(primary, overflows.within());\n        overflow.each(function (overf) {\n          setStoredGroups(overf, overflows.extra());\n        });\n      }\n      remove$6(primary.element(), 'visibility');\n      reflow(primary.element());\n      overflow.each(function (overf) {\n        overflowButton.each(function (button) {\n          return Toggling.set(button, isOpen(overf));\n        });\n        focusedComp.each(Focusing.focus);\n      });\n    };\n\n    var schema$l = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$8 = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$a = function (detail, components, spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$l(),\n      partFields: parts$8(),\n      factory: factory$a\n    });\n\n    var schema$m = constant([\n      field$1('splitToolbarBehaviours', [Coupling]),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n    var spec = function (detail, components, spec, externals, extras) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      var setGroups = function (toolbar, groups) {\n        doSetGroups(toolbar, groups);\n        extras.apis.refresh(toolbar);\n      };\n      var getMoreButton = function (toolbar) {\n        return getPart(toolbar, detail, 'overflow-button');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: __assign(__assign({}, extras.coupling), {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            })\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              extras.apis.toggle(toolbar);\n            })])\n        ]),\n        apis: __assign({\n          setGroups: setGroups,\n          getMoreButton: function (toolbar) {\n            return getMoreButton(toolbar);\n          }\n        }, extras.apis),\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n\n    var schema$n = constant([\n      markers(['overflowToggledClass']),\n      strict$1('getAnchor'),\n      optionFunction('getOverflowBounds'),\n      strict$1('lazySink')\n    ].concat(schema$m()));\n    var parts$9 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Option.none();\n                }\n              })])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var toggleToolbar = function (toolbar, detail, externals) {\n      var sandbox = Coupling.getCoupled(toolbar, 'sandbox');\n      if (Sandboxing.isOpen(sandbox)) {\n        Sandboxing.close(sandbox);\n      } else {\n        Sandboxing.open(sandbox, externals.overflow());\n      }\n    };\n    var isOpen$1 = function (over) {\n      return over.getSystem().isConnected();\n    };\n    var position$2 = function (toolbar, detail, overf) {\n      var sink = detail.lazySink(toolbar).getOrDie();\n      var anchor = detail.getAnchor(toolbar);\n      var bounds = detail.getOverflowBounds.map(function (bounder) {\n        return bounder();\n      });\n      Positioning.positionWithinBounds(sink, anchor, overf, bounds);\n    };\n    var refresh$1 = function (toolbar, detail) {\n      var overflow = Sandboxing.getState(Coupling.getCoupled(toolbar, 'sandbox'));\n      refresh(toolbar, detail, overflow, isOpen$1);\n      overflow.each(function (overf) {\n        return position$2(toolbar, detail, overf);\n      });\n    };\n    var reposition$1 = function (toolbar, detail) {\n      var overflow = Sandboxing.getState(Coupling.getCoupled(toolbar, 'sandbox'));\n      overflow.each(function (overf) {\n        return position$2(toolbar, detail, overf);\n      });\n    };\n    var makeSandbox$1 = function (toolbar, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, overf) {\n        refresh$1(toolbar, detail);\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          Toggling.on(button);\n          ariaOwner.link(button.element());\n        });\n        Keying.focusIn(overf);\n      };\n      var onClose = function () {\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          Toggling.off(button);\n          Focusing.focus(button);\n          ariaOwner.unlink(button.element());\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id() }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Option.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(toolbar, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(toolbar).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign({}, receivingChannel$1({\n              isExtraPart: constant(false),\n              doReposition: function () {\n                return reposition$1(toolbar, detail);\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$b = function (detail, components, spec$1, externals) {\n      return spec(detail, components, spec$1, externals, {\n        coupling: {\n          sandbox: function (toolbar) {\n            return makeSandbox$1(toolbar, detail);\n          }\n        },\n        apis: {\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail, externals);\n          },\n          getOverflow: function (toolbar) {\n            return Sandboxing.getState(Coupling.getCoupled(toolbar, 'sandbox'));\n          },\n          reposition: function (toolbar) {\n            return reposition$1(toolbar, detail);\n          }\n        }\n      });\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$n(),\n      partFields: parts$9(),\n      factory: factory$b,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        getMoreButton: function (apis, toolbar) {\n          return apis.getMoreButton(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element();\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element(), slideConfig.openClass);\n      add$2(component.element(), slideConfig.closedClass);\n      set$2(component.element(), getDimensionProperty(slideConfig), '0px');\n      reflow(component.element());\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element(), slideConfig.closedClass);\n      add$2(component.element(), slideConfig.openClass);\n      remove$6(component.element(), getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element(), getDimensionProperty(slideConfig), getDimension(slideConfig, component.element()));\n      reflow(component.element());\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element());\n      });\n      slideState.setCollapsed();\n      set$2(component.element(), getDimensionProperty(slideConfig), size);\n      reflow(component.element());\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element());\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Option.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element());\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element());\n      var startPartialGrow = function () {\n        set$2(component.element(), getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element());\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element(), getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element(), getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element());\n        set$2(component.element(), getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) === true || isShrinking(component, slideConfig) === true;\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event().raw();\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element(), slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$6(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$o = constant([\n      markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$m()));\n    var parts$a = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Option.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var toggleToolbar$1 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var isOpen$2 = function (overf) {\n      return Sliding.hasGrown(overf);\n    };\n    var refresh$3 = function (toolbar, detail) {\n      var overflow = getPart(toolbar, detail, 'overflow');\n      refresh(toolbar, detail, overflow, isOpen$2);\n      overflow.each(Sliding.refresh);\n    };\n    var factory$c = function (detail, components, spec$1, externals) {\n      return spec(detail, components, spec$1, externals, {\n        coupling: {},\n        apis: {\n          refresh: function (toolbar) {\n            return refresh$3(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar$1(toolbar, detail);\n          },\n          getOverflow: function (toolbar) {\n            return getPart(toolbar, detail, 'overflow');\n          }\n        }\n      });\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$o(),\n      partFields: parts$a(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        getMoreButton: function (apis, toolbar) {\n          return apis.getMoreButton(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        }\n      }\n    });\n\n    var toolbarHeightChange = constant(generate$1('toolbar-height-change'));\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var setDisabledAll = function (element, state) {\n      all('*', element.element()).forEach(function (elm) {\n        element.getSystem().getByDom(elm).each(function (comp) {\n          if (comp.hasConfigured(Disabling)) {\n            Disabling.set(comp, state);\n          }\n        });\n      });\n    };\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element();\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var toggleToReadOnly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      broadcastReadonly(uiComponents, readonly);\n      all('*', outerContainer.element()).forEach(function (elm) {\n        outerContainer.getSystem().getByDom(elm).each(function (comp) {\n          if (comp.hasConfigured(Disabling)) {\n            Disabling.set(comp, readonly);\n          }\n        });\n      });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.readonly) {\n          toggleToReadOnly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return toggleToReadOnly(uiComponents, editor.readonly);\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var createReadonlyReceivingForOverflow = function (getOverflow) {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            getOverflow(comp).each(function (toolbar) {\n              setDisabledAll(toolbar, data.readonly);\n            });\n          }\n        }, _a)\n      });\n    };\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts().items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName, getOverflow) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached]),\n        createReadonlyReceivingForOverflow(getOverflow)\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec, getOverflow) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Option.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Option.some('more-drawer'),\n            disabled: false,\n            tooltip: Option.some('More...'),\n            primary: false,\n            borderless: false\n          }, Option.none(), toolbarSpec.backstage.shared.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName, getOverflow)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec, SplitFloatingToolbar.getOverflow);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts().primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getAnchor: function () {\n          return toolbarSpec.backstage.shared.anchors.toolbarOverflow();\n        },\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element();\n          var headerBounds = absolute$1(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$1(docElem);\n          return bounds$1(headerBounds.x() + overflowXOffset, docBounds.y(), headerBounds.width() - overflowXOffset * 2, docBounds.height());\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow']\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts().primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts().overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec, SplitSlidingToolbar.getOverflow);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarDrawer.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts().groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName, constant(Option.none()))\n      });\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArrays([strictString('type')], baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', function () {\n        return false;\n      }),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        getState: getState$2\n    });\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var channel = reflectingConfig.channel;\n          if (contains(message.channels(), channel)) {\n            update(component, message.data());\n          }\n        }),\n        runOnAttached(function (comp, se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        events: events$e\n    });\n\n    var init$a = function (spec) {\n      var cell = Cell(Option.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Option.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().fold(function () {\n          return 'none';\n        }, function (x) {\n          return x;\n        });\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        init: init$a\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$p = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function (detail) {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function (detail) {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$b = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$d = function (detail, components, spec, externals) {\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Option.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Option.some(true);\n      };\n      var buttonEvents = merge(derive([runOnAttached(function (component, simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element(), 'id', descriptorId);\n            set$1(component.element(), 'aria-describedby', descriptorId);\n          });\n        })]), events$7(Option.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), {\n          'alloy.execute': [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        }),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$p(),\n      partFields: parts$b(),\n      factory: factory$d,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _a;\n      var getIconName = function (iconName) {\n        return global$5.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$5.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_a = {}, _a[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _a),\n        buttonBehaviours: derive$1([config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event().prevent();\n              emit(button, focusButtonEvent);\n            })])].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Option.none(), Option.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(spec.disabled)\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Option.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(function () {\n            return false;\n          }), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _a;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element(), 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element(), 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$1(comp.element(), 'aria-pressed', state);\n            descendant$1(comp.element(), 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant$1(comp.element(), 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: merge({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (a, b, c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(false),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_a = {}, _a[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _a),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts().button(renderCommonStructure(spec.icon, spec.text, Option.none(), Option.some(displayChannel), Option.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts().arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$c('chevron-down', sharedBackstage.providers.icons)\n            }\n          }),\n          SplitDropdown.parts()['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event().buttonApi());\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Option.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Option.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var renderContextForm = function (toolbarType, ctx, backstage) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Option.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Option.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, backstage.shared.providers);\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$1('context-toolbar'),\n        initGroups: [\n          {\n            title: Option.none(),\n            items: [memInput.asSpec()]\n          },\n          {\n            title: Option.none(),\n            items: commands.asSpecs()\n          }\n        ],\n        onEscape: Option.none,\n        cyclicKeying: true,\n        backstage: backstage,\n        getSink: function () {\n          return Result.error('');\n        }\n      });\n    };\n    var ContextForm = { renderContextForm: renderContextForm };\n\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds) {\n      var x = Math.max(viewportBounds.x(), contentAreaBox.x());\n      var contentBoxWidth = contentAreaBox.right() - x;\n      var maxViewportWidth = viewportBounds.width() - (x - viewportBounds.x());\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getIframeBounds = function (editor, contentAreaBox, viewportBounds) {\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      var container = Element.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var containerBox = box(container);\n      var headerBox = box(header);\n      var y = Math.max(viewportBounds.y(), contentAreaBox.y(), headerBox.bottom());\n      var contentBoxHeight = containerBox.bottom() - y;\n      var maxViewportHeight = viewportBounds.height() - (y - viewportBounds.y());\n      var height = Math.min(contentBoxHeight, maxViewportHeight);\n      return bounds$1(x, y, width, height);\n    };\n    var getInlineBounds = function (editor, contentAreaBox, viewportBounds) {\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      var container = Element.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var headerBox = box(header);\n      var vpHeight = viewportBounds.height();\n      var vpTop = viewportBounds.y();\n      if (headerBox.y() >= contentAreaBox.bottom()) {\n        var bottom = Math.min(vpHeight + vpTop, headerBox.y());\n        var height = bottom - vpTop;\n        return bounds$1(x, vpTop, width, height);\n      } else {\n        var y = Math.max(vpTop, headerBox.bottom());\n        var height = vpHeight - (y - vpTop);\n        return bounds$1(x, y, width, height);\n      }\n    };\n    var getDistractionFreeBounds = function (_editor, contentAreaBox, viewportBounds) {\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      return bounds$1(x, viewportBounds.y(), width, viewportBounds.height());\n    };\n    var getContextToolbarBounds = function (editor) {\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var viewportBounds = getBounds(domGlobals.window);\n      var contentAreaBox = box(Element.fromDom(editor.getContentAreaContainer()));\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return getDistractionFreeBounds(editor, contentAreaBox, viewportBounds);\n      } else if (editor.inline) {\n        return getInlineBounds(editor, contentAreaBox, viewportBounds);\n      } else {\n        return getIframeBounds(editor, contentAreaBox, viewportBounds);\n      }\n    };\n\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n\n    var matchTargetWith = function (elem, toolbars) {\n      return findMap(toolbars, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom()) ? Option.some({\n          toolbarApi: toolbarApi,\n          elem: elem\n        }) : Option.none();\n      });\n    };\n    var lookup$1 = function (scopes, editor) {\n      var isRoot = function (elem) {\n        return elem.dom() === editor.getBody();\n      };\n      var startNode = Element.fromDom(editor.selection.getNode());\n      return matchTargetWith(startNode, scopes.inNodeScope).orThunk(function () {\n        return matchTargetWith(startNode, scopes.inEditorScope).orThunk(function () {\n          return ancestor$2(startNode, function (elem) {\n            return matchTargetWith(elem, scopes.inNodeScope);\n          }, isRoot);\n        });\n      });\n    };\n    var ToolbarLookup = { lookup: lookup$1 };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarApi) {\n        var contextForm = getOrDie(createContextForm(toolbarApi));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarApi.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarApi) {\n        createContextToolbar(toolbarApi).each(function (contextToolbar) {\n          if (toolbarApi.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n    var ToolbarScopes = { categorise: categorise };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element(), 'visibility');\n          });\n          remove$4(comp.element(), resizingClass);\n          remove$6(comp.element(), 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              InlineView.getContent(comp).each(function (c) {\n              });\n              remove$4(comp.element(), resizingClass);\n              remove$6(comp.element(), 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              remove$6(comp.element(), 'width');\n              var currentWidth = get$7(comp.element());\n              InlineView.setContent(comp, se.event().contents());\n              add$2(comp.element(), resizingClass);\n              var newWidth = get$7(comp.element());\n              set$2(comp.element(), 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event().focus().bind(function (f) {\n                  focus$1(f);\n                  return search(comp.element());\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active();\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element(), 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active()\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event().forwardContents(),\n                focus: Option.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Option.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var unbindCell = Cell(Option.none());\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var unbind = editor.formatter.formatChanged(name, api.setActive).unbind;\n          unbindCell.set(Option.some(unbind));\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return function () {\n          return unbindCell.get().each(function (unbind) {\n            return unbind();\n          });\n        };\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Option.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Option.none();\n          } else {\n            return Option.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Option.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return {\n          getComponent: function () {\n            return comp;\n          }\n        };\n      };\n      var onSetup = function (api) {\n        spec.setInitialValue.each(function (f) {\n          return f(api.getComponent());\n        });\n        return spec.nodeChangeHandler.map(function (f) {\n          var handler = f(api.getComponent());\n          editor.on('NodeChange', handler);\n          return function () {\n            editor.off('NodeChange', handler);\n          };\n        }).getOr(noop);\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Option.none() : Option.some(''),\n        icon: spec.icon,\n        tooltip: Option.from(spec.tooltip),\n        role: Option.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = readOptFrom$1(editor.settings, settingName).getOr(defaults);\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return function () {\n          return Option.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuIcon(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuIcon(comp);\n      });\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      return {\n        tooltip: 'Align',\n        icon: Option.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Option.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Option.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Option.some({\n            tag: 'div',\n            styleAttr: item.indexOf('dings') === -1 ? 'font-family:' + item : ''\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var toLegacy = function (fontSize) {\n      return get(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Option.none();\n        var items = dataset.data;\n        var px = editor.queryCommandValue('FontSize');\n        if (px) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(px, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === px || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          px: px\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant(constant(Option.none()));\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, px = _a.px;\n        var text = matchOpt.fold(function () {\n          return px;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles, parents) {\n      var styles = getStyles();\n      return findMap(parents, function (parent) {\n        return find(styles, function (fmt) {\n          return editor.formatter.matchNode(parent, fmt.format);\n        });\n      }).orThunk(function () {\n        if (editor.formatter.match('p')) {\n          return Option.some({\n            title: 'Paragraph',\n            format: 'p'\n          });\n        }\n        return Option.none();\n      });\n    };\n    var getCurrentSelectionParents = function (editor) {\n      var currentNode = editor.selection.getStart(true) || editor.getBody();\n      return editor.dom.getParents(currentNode, function () {\n        return true;\n      }, editor.getBody());\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var getMatchingValue = function (nodeChangeEvent) {\n        return findNearest(editor, function () {\n          return dataset.data;\n        }, nodeChangeEvent);\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styleAttr: editor.formatter.getCssText(format)\n          });\n        };\n      };\n      var updateSelectMenuText = function (parents, comp) {\n        var detectedFormat = getMatchingValue(parents);\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function (e) {\n          return updateSelectMenuText(e.parents, comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        var parents = getCurrentSelectionParents(editor);\n        updateSelectMenuText(parents, comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor, dataset) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styleAttr: editor.formatter.getCssText(format)\n          }) : Option.none();\n        };\n      };\n      var updateSelectMenuText = function (parents, comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        }, parents);\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function (e) {\n          return updateSelectMenuText(e.parents, comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        var parents = getCurrentSelectionParents(editor);\n        updateSelectMenuText(parents, comp);\n      });\n      return {\n        tooltip: 'Formats',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec$4(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Option.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras) {\n      return get(types, spec.type).fold(function () {\n        domGlobals.console.error('skipping button defined by', spec);\n        return Option.none();\n      }, function (render) {\n        return Option.some(render(spec, extras));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        domGlobals.console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, extras, prefixes) {\n      return get(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Option.none();\n        });\n      }, function (spec) {\n        return extractFrom(spec, extras);\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, extras, prefixes).toArray();\n        });\n        return {\n          title: Option.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var bubbleSize = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable(),\n      maxWidthFunction: expandable$1()\n    };\n    var desktopAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          north$1,\n          south$1,\n          northeast$1,\n          southeast$1,\n          northwest$1,\n          southwest$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          north$1,\n          south$1,\n          northwest$1,\n          southwest$1,\n          northeast$1,\n          southeast$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var mobileAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var getAnchorLayout = function (position, isTouch) {\n      if (position === 'line') {\n        return {\n          bubble: nu$8(bubbleSize, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$1];\n            },\n            onRtl: function () {\n              return [west$1];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$8(0, bubbleSize, bubbleAlignments$1),\n          layouts: isTouch ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts,\n          overrides: anchorOverrides\n        };\n      }\n    };\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var isTouch = detect$3().deviceType.isTouch;\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Option.some(true);\n        }\n      }));\n      var getBounds = function () {\n        return getContextToolbarBounds(editor);\n      };\n      var isRangeOverlapping = function (aTop, aBottom, bTop, bBottom) {\n        return Math.max(aTop, bTop) <= Math.min(aBottom, bBottom);\n      };\n      var getLastElementVerticalBound = function () {\n        var nodeBounds = lastElement.get().map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOrThunk(function () {\n          return editor.selection.getRng().getBoundingClientRect();\n        });\n        var diffTop = editor.inline ? get$8().top() : absolute$1(Element.fromDom(editor.getBody())).y();\n        return {\n          y: nodeBounds.top + diffTop,\n          bottom: nodeBounds.bottom + diffTop\n        };\n      };\n      var shouldContextToolbarHide = function () {\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return true;\n        }\n        var lastElementBounds = getLastElementVerticalBound();\n        var contextToolbarBounds = getBounds();\n        return !isRangeOverlapping(lastElementBounds.y, lastElementBounds.bottom, contextToolbarBounds.y(), contextToolbarBounds.bottom());\n      };\n      var forceHide = function () {\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element();\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, Option.some(getBounds()));\n          }\n        });\n      };\n      var lastAnchor = Cell(Option.none());\n      var lastElement = Cell(Option.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return ToolbarScopes.categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar(toolbarApi);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildToolbar = function (ctx) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var toolbarType = getToolbarDrawer(editor) === ToolbarDrawer.scrolling ? ToolbarDrawer.scrolling : ToolbarDrawer.default;\n        var scopes = getScopes();\n        return ctx.type === 'contexttoolbar' ? function () {\n          var allButtons = merge(buttons, scopes.formNavigators);\n          var initGroups = identifyButtons(editor, {\n            buttons: allButtons,\n            toolbar: ctx.items\n          }, extras, Option.some(['form:']));\n          return renderToolbar({\n            type: toolbarType,\n            uid: generate$1('context-toolbar'),\n            initGroups: initGroups,\n            onEscape: Option.none,\n            cyclicKeying: true,\n            backstage: extras.backstage,\n            getSink: function () {\n              return Result.error('');\n            }\n          });\n        }() : function () {\n          return ContextForm.renderContextForm(toolbarType, ctx, extras.backstage);\n        }();\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        readOptFrom$1(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext(ctx, e.target === editor ? Option.none() : Option.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        return deepMerge(anchorage, getAnchorLayout(position, isTouch()));\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(Element.fromDom);\n        var anchor = getAnchor(toolbarApi.position, sElem);\n        lastAnchor.set(Option.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element();\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), function () {\n          return Option.some(getBounds());\n        });\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        var scopes = getScopes();\n        ToolbarLookup.lookup(scopes, editor).fold(function () {\n          lastAnchor.set(Option.none());\n          InlineView.hide(contextbar);\n        }, function (info) {\n          launchContext(info.toolbarApi, Option.some(info.elem.dom()));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var resetTimer = function (t) {\n        clearTimer();\n        timer.set(t);\n      };\n      editor.on('init', function () {\n        editor.on(hideContextToolbarEvent, forceHide);\n        editor.on('ScrollContent ScrollWindow longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup SetContent ObjectResized ResizeEditor', function (e) {\n          resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n        });\n        editor.on('focusout', function (e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search(sink.element()).isNone() && search(contextbar.element()).isNone()) {\n              lastAnchor.set(Option.none());\n              InlineView.hide(contextbar);\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.readonly) {\n            lastAnchor.set(Option.none());\n            InlineView.hide(contextbar);\n          }\n        });\n        editor.on('NodeChange', function (e) {\n          search(contextbar.element()).fold(function () {\n            resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n          }, function (_) {\n          });\n        });\n      });\n    };\n    var ContextToolbar = { register: register$4 };\n\n    var setup$4 = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target() });\n      };\n      var onTouchstart = bind$3(Element.fromDom(domGlobals.document), 'touchstart', fireDismissPopups);\n      var onTouchmove = bind$3(Element.fromDom(domGlobals.document), 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind$3(Element.fromDom(domGlobals.document), 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind$3(Element.fromDom(domGlobals.document), 'mousedown', fireDismissPopups);\n      var onMouseup = bind$3(Element.fromDom(domGlobals.document), 'mouseup', function (evt) {\n        if (evt.raw().button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target() });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: Element.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: Element.fromDom(raw.target) });\n        }\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent$1(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent$1(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n    var Events$1 = { setup: setup$4 };\n\n    var parts$c = AlloyParts;\n    var partType$1 = PartType;\n\n    var schema$q = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function (detail) {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$d = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$e = function (detail, components, spec, external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          domGlobals.console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Option.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$q(),\n      partFields: parts$d(),\n      factory: factory$e,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var getOrigin = function (element) {\n      var isFixed = getRaw(element, 'position').is('fixed');\n      var offsetParent$1 = isFixed ? Option.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = Element.fromTag('span');\n        before(element, marker);\n        var offsetParent$1 = offsetParent(marker);\n        remove(marker);\n        return offsetParent$1;\n      }).map(absolute).getOrThunk(function () {\n        return Position(0, 0);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left(), -change.top());\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left(), change.top());\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, Position(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left() - a2.left()) <= xRange && Math.abs(a1.top() - a2.top()) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left() - a2.left());\n      var top = Math.abs(a1.top() - a2.top());\n      return Position(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      return coord.fold(function (x, y) {\n        return {\n          position: 'absolute',\n          left: x + 'px',\n          top: y + 'px'\n        };\n      }, function (x, y) {\n        return {\n          position: 'absolute',\n          left: x - origin.left() + 'px',\n          top: y - origin.top() + 'px'\n        };\n      }, function (x, y) {\n        return {\n          position: 'fixed',\n          left: x + 'px',\n          top: y + 'px'\n        };\n      });\n    };\n    var translate$2 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return adt$c.offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return adt$c.absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return adt$c.fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left()), optY.getOr(original.top()));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, adt$c.offset), absorbOne(asAbsolute, adt$c.absolute), absorbOne(asFixed, adt$c.fixed));\n    };\n    var offset = adt$c.offset;\n    var absolute$3 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element();\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element();\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y() < viewport.bottom() && box.bottom() > viewport.y();\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y() >= viewport.y();\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom() <= viewport.bottom();\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getAttr = function (elem, attr) {\n      return has$1(elem, attr) ? Option.some(parseInt(get$2(elem, attr), 10)) : Option.none();\n    };\n    var getPrior = function (elem, dockInfo) {\n      return getAttr(elem, dockInfo.leftAttr).bind(function (left) {\n        return getAttr(elem, dockInfo.topAttr).map(function (top) {\n          var w = get$7(elem);\n          var h = get$6(elem);\n          return bounds$1(left, top, w, h);\n        });\n      });\n    };\n    var setPrior = function (elem, dockInfo, absLeft, absTop, position) {\n      set$1(elem, dockInfo.leftAttr, absLeft);\n      set$1(elem, dockInfo.topAttr, absTop);\n      set$1(elem, dockInfo.positionAttr, position);\n    };\n    var clearPrior = function (elem, dockInfo) {\n      remove$1(elem, dockInfo.leftAttr);\n      remove$1(elem, dockInfo.topAttr);\n      remove$1(elem, dockInfo.positionAttr);\n    };\n    var revertToOriginal = function (elem, dockInfo, box) {\n      var position = get$2(elem, dockInfo.positionAttr);\n      clearPrior(elem, dockInfo);\n      switch (position) {\n      case 'static':\n        return Option.some(morphAdt.static());\n      case 'absolute':\n        return Option.some(morphAdt.absolute(box.x(), box.y()));\n      default:\n        return Option.none();\n      }\n    };\n    var morphToOriginal = function (elem, dockInfo, viewport) {\n      return getPrior(elem, dockInfo).filter(function (box) {\n        return isVisibleForModes(dockInfo.modes, box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, dockInfo, box);\n      });\n    };\n    var morphToFixed = function (elem, dockInfo, viewport, scroll, lazyOrigin) {\n      var box$1 = box(elem);\n      if (!isVisibleForModes(dockInfo.modes, box$1, viewport)) {\n        var origin = lazyOrigin();\n        var position = get$4(elem, 'position');\n        setPrior(elem, dockInfo, box$1.x(), box$1.y(), position);\n        var coord = absolute$3(box$1.x(), box$1.y());\n        var asFixed$1 = asFixed(coord, scroll, origin);\n        var viewportPt = absolute$3(viewport.x(), viewport.y());\n        var fixedViewport = asFixed(viewportPt, scroll, origin);\n        var fixedY = box$1.y() <= viewport.y() ? fixedViewport.top() : fixedViewport.top() + viewport.height() - box$1.height();\n        return Option.some(morphAdt.fixed(asFixed$1.left(), fixedY));\n      } else {\n        return Option.none();\n      }\n    };\n    var getMorph = function (component, dockInfo, viewport, scroll, lazyOrigin) {\n      var elem = component.element();\n      var isDocked = getRaw(elem, 'position').is('fixed');\n      return isDocked ? morphToOriginal(elem, dockInfo, viewport) : morphToFixed(elem, dockInfo, viewport, scroll, lazyOrigin);\n    };\n    var getMorphToOriginal = function (component, dockInfo) {\n      var elem = component.element();\n      return getPrior(elem, dockInfo).bind(function (box) {\n        return revertToOriginal(elem, dockInfo, box);\n      });\n    };\n\n    var morphToStatic = function (component, config) {\n      each([\n        'left',\n        'top',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element(), prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, scroll, origin, morph) {\n      var styles = toStyles(morph, scroll, origin);\n      setAll$1(component.element(), styles);\n      var method = styles.position === 'fixed' ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$3(component.element(), [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var elem = component.element();\n      var doc = owner(elem);\n      var scroll = get$8(doc);\n      var lazyOrigin = cached(function () {\n        return getOrigin(elem);\n      });\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, config, viewport, scroll, lazyOrigin).each(function (morph) {\n        state.setDocked(!isDocked);\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (x, y) {\n          return morphToCoord(component, config, scroll, lazyOrigin(), absolute$3(x, y));\n        }, function (x, y) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, scroll, lazyOrigin(), fixed$1(x, y));\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element();\n      state.setDocked(false);\n      getMorphToOriginal(component, config).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (x, y) {\n          var doc = owner(elem);\n          var scroll = get$8(doc);\n          var origin = getOrigin(elem);\n          morphToCoord(component, config, scroll, origin, absolute$3(x, y));\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$5(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked = function (component, config, state) {\n      return state.isDocked();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has$2(component.element(), contextInfo.transitionClass)) {\n              remove$5(component.element(), [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        events: events$f\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strictString('fadeInClass'),\n        strictString('fadeOutClass'),\n        strictString('transitionClass'),\n        strictFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      strictString('leftAttr'),\n      strictString('topAttr'),\n      strictString('positionAttr'),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$b = function () {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get();\n      };\n      return nu$5({\n        isDocked: function () {\n          return docked.get();\n        },\n        setDocked: function (state) {\n          return docked.set(state);\n        },\n        isVisible: function () {\n          return visible.get();\n        },\n        setVisible: function (state) {\n          return visible.set(state);\n        },\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        init: init$b\n    });\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var updateIframeContentFlow = function (header) {\n      var elm = header.element();\n      parent(elm).each(function (parentElem) {\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$7(parentElem);\n          set$2(elm, 'width', parentWidth + 'px');\n          var headerHeight = getOuter$1(elm);\n          set$2(parentElem, 'padding-top', headerHeight + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, 'padding-top');\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$4(sinkElem, visibility.fadeOutClass);\n        add$3(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$4(sinkElem, visibility.fadeInClass);\n        add$3(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = Element.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$4(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$4(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq(activeElm, Element.fromDom(ownerDoc.dom().body)) || contains$2(headerElem, activeElm);\n      }).each(function () {\n        return focus$1(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOption().bind(function (sink) {\n          return search(sink.element());\n        });\n      });\n    };\n    var setup$5 = function (editor, lazyHeader) {\n      if (!editor.inline) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(Docking.reset);\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.refresh);\n        });\n      }\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked$1 = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours$2 = function (editor, lazySink) {\n      var focusedElm = Cell(Option.none());\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element());\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArrays([\n        Focusing.config({}),\n        Docking.config({\n          leftAttr: 'data-dock-left',\n          topAttr: 'data-dock-top',\n          positionAttr: 'data-dock-pos',\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$1(comp.element());\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box$1 = box(Element.fromDom(container));\n              var boxHeight = box$1.height() - headerHeight;\n              return Option.some(bounds$1(box$1.x(), box$1.y(), box$1.width(), boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element(), elem);\n                focusedElm.set(Option.none());\n              });\n            },\n            onHide: function (comp) {\n              focusedElm.set(findFocusedElem(comp.element(), lazySink));\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          modes: ['top'],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        setup: setup$5,\n        isDocked: isDocked$1,\n        getBehaviours: getBehaviours$2\n    });\n\n    var setup$6 = noop;\n    var isDocked$2 = never;\n    var getBehaviours$3 = constant([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        setup: setup$6,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$3\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours = spec.sticky ? getBehaviours$2 : getBehaviours$3;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours(editor, spec.getSink))\n      };\n    };\n\n    var factory$f = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Option.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element(), '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event().target(), '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event().prevFocus().bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOption();\n              }).each(function (prev) {\n                se.event().newFocus().bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOption();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Option.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$f,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$r = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$r, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components, spec) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        if (def === void 0) {\n          def = undefined;\n        }\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, key) {\n        return get$2(comp.element(), 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element();\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element();\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$b(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, makeApi);\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$7 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Option.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element().dom();\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event();\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name();\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible() ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element(), 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$7(slider.element()) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element(), 'width', se.event().width());\n            }),\n            run(autoSize, function (comp, se) {\n              remove$6(comp.element(), 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Option.some(true);\n            },\n            onShiftTab: function () {\n              return Option.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element();\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$8 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Option.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Option.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Option.none());\n        }\n      });\n    };\n\n    var factory$g = function (detail, components, spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$c.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$c.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$c.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$c.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$c.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$c.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$c.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$c.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$c.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        getMoreButton: function (comp) {\n          var toolbar = parts$c.getPart(comp, detail, 'toolbar');\n          return toolbar.bind(function (toolbar) {\n            return toolbar.getApis().getMoreButton(toolbar);\n          });\n        },\n        getThrobber: function (comp) {\n          return parts$c.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$c.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$c.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$c.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$c.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.split === ToolbarDrawer.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.split === ToolbarDrawer.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.split,\n                uid: generate$1('multiple-toolbar-item'),\n                backstage: spec.backstage,\n                cyclicKeying: false,\n                getSink: spec.getSink,\n                initGroups: [],\n                onEscape: function () {\n                  return Option.none();\n                }\n              });\n            },\n            setupItem: function (mToolbar, tc, data, index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.split,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Option.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            backstage: spec.backstage,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            }\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partHeader = partType$1.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [strict$1('dom')]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$g,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        getMoreButton: function (apis, comp) {\n          return apis.getMoreButton(comp);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = merge(defaultMenus, registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        Events.fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var SkinLoaded = { fireSkinLoaded: fireSkinLoaded$1 };\n\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      var skinUiCss;\n      if (skinUrl) {\n        skinUiCss = skinUrl + '/skin.min.css';\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && skinUiCss) {\n        global$7.DOM.styleSheetLoader.load(skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Option.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Option.none()));\n      }\n    };\n\n    var DOM = global$7.DOM;\n    var detection = detect$3();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents = function (editor) {\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(Position(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(Position(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resize = function (e) {\n        var docEle = editor.getDoc().documentElement;\n        var outer = lastWindowDimensions.get();\n        var inner = lastDocumentDimensions.get();\n        if (outer.left() !== contentWindow.innerWidth || outer.top() !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(Position(contentWindow.innerWidth, contentWindow.innerHeight));\n          Events.fireResizeContent(editor, e);\n        } else if (inner.left() !== docEle.offsetWidth || inner.top() !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(Position(docEle.offsetWidth, docEle.offsetHeight));\n          Events.fireResizeContent(editor, e);\n        }\n      };\n      var scroll = function (e) {\n        return Events.fireScrollContent(editor, e);\n      };\n      DOM.bind(contentWindow, 'resize', resize);\n      DOM.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture$1(Element.fromDom(editor.getBody()), 'load', resize);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        DOM.unbind(contentWindow, 'resize', resize);\n        DOM.unbind(contentWindow, 'scroll', scroll);\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      iframe(editor);\n      attachSystemAfter(Element.fromDom(args.targetNode), uiComponents.mothership);\n      attachSystem(body(), uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(uiComponents.outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(uiComponents.outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor);\n      });\n      var socket = OuterContainer.getSocket(uiComponents.outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12 === true) {\n        setAll$1(socket.element(), {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first$1(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        bind$3(socket.element(), 'scroll', limit.throttle);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (ui, value) {\n        OuterContainer.toggleSidebar(uiComponents.outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(uiComponents.outerContainer);\n      });\n      var drawer = getToolbarDrawer(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (drawer === ToolbarDrawer.sliding || drawer === ToolbarDrawer.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      return {\n        iframeContainer: socket.element().dom(),\n        editorContainer: uiComponents.outerContainer.element().dom()\n      };\n    };\n    var Iframe = { render: render };\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Option.some(parseInt('' + val, 10));\n      }\n      return Option.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n    var Utils = {\n      calcCappedSize: calcCappedSize,\n      parseToInt: parseToInt,\n      numToPx: numToPx\n    };\n\n    var getHeight$1 = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return Utils.parseToInt(baseHeight).map(function (height) {\n        return Utils.calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight$1(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth$1 = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return Utils.parseToInt(baseWidth).map(function (width) {\n        return Utils.calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth$1(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var floatContainer;\n      var DOM = global$7.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var targetElm = Element.fromDom(args.targetNode);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth$1(editor));\n      var splitSetting = getToolbarDrawer(editor);\n      var split = splitSetting === ToolbarDrawer.sliding || splitSetting === ToolbarDrawer.floating;\n      inline(editor);\n      var updateChromePosition = function (toolbar) {\n        var offset = split ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$6(tbar.components()[1].element()) : 0;\n        }) : 0;\n        var location = absolute(targetElm);\n        var top = location.top() - get$6(floatContainer.element()) + offset;\n        setAll$1(uiComponents.outerContainer.element(), {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(location.left()) + 'px'\n        });\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = Utils.parseToInt(get$4(body(), 'margin-left')).getOr(0);\n          return get$7(body()) - location.left() + bodyMargin;\n        });\n        set$2(floatContainer.element(), 'max-width', maxWidth + 'px');\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (split) {\n          OuterContainer.refreshToolbar(uiComponents.outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          var toolbar = OuterContainer.getToolbar(uiComponents.outerContainer);\n          updateChromePosition(toolbar);\n        }\n        if (isSticky) {\n          resetDocking ? Docking.reset(floatContainer) : Docking.refresh(floatContainer);\n        }\n      };\n      var show = function () {\n        set$2(uiComponents.outerContainer.element(), 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiComponents.uiMothership.element(), 'display');\n        updateChromeUi();\n      };\n      var hide = function () {\n        if (uiComponents.outerContainer) {\n          set$2(uiComponents.outerContainer.element(), 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiComponents.uiMothership.element(), 'display', 'none');\n      };\n      var render = function () {\n        if (floatContainer) {\n          show();\n          return;\n        }\n        floatContainer = OuterContainer.getHeader(uiComponents.outerContainer).getOrDie();\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, uiComponents.mothership);\n        attachSystem(uiContainer, uiComponents.uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(uiComponents.outerContainer, identifyMenus(editor, rawUiConfig));\n        show();\n        editor.on('activate', show);\n        editor.on('deactivate', hide);\n        editor.on('NodeChange SkinLoaded ResizeWindow', function () {\n          if (!editor.hidden) {\n            updateChromeUi(true);\n          }\n        });\n        editor.nodeChanged();\n      };\n      editor.on('focus', render);\n      editor.on('blur hide', hide);\n      editor.on('init', function () {\n        if (editor.hasFocus()) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      return { editorContainer: uiComponents.outerContainer.element().dom() };\n    };\n    var Inline = { render: render$1 };\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$e.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n    var AlignmentButtons = { register: register$5 };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$e.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name = 'h' + i;\n        editor.ui.registry.addToggleButton(name, {\n          text: name.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name),\n          onAction: toggleFormat(editor, name)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$e.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$e.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems = function (editor) {\n      global$e.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$6 = function (editor) {\n      registerButtons(editor);\n      registerMenuItems(editor);\n    };\n    var SimpleControls = { register: register$6 };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.readonly || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons$1(editor);\n    };\n    var UndoRedo = { register: register$7 };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$8 = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$2(editor);\n    };\n    var VisualAid = { register: register$8 };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$9 = function (editor) {\n      registerButtons$2(editor);\n    };\n    var IndentOutdent = { register: register$9 };\n\n    var register$a = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n    var ComplexControls = { register: register$a };\n\n    var setup$9 = function (editor, backstage) {\n      AlignmentButtons.register(editor);\n      SimpleControls.register(editor);\n      ComplexControls.register(editor, backstage);\n      UndoRedo.register(editor);\n      ColorSwatch.register(editor);\n      VisualAid.register(editor);\n      IndentOutdent.register(editor);\n    };\n    var FormatControls = { setup: setup$9 };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.pageX, touch.pageY);\n      } else {\n        return nu$d(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.clientX, touch.clientY);\n      } else {\n        return nu$d(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$7.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: Element.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Option.some(Element.fromDom(editor.selection.getNode())),\n        root: Element.fromDom(editor.getBody())\n      };\n    };\n\n    var getAnchorSpec = function (editor, e, isTriggeredByKeyboardEvent) {\n      return isTriggeredByKeyboardEvent ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, isTriggeredByKeyboardEvent) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec(editor, e, isTriggeredByKeyboardEvent);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect$1(editor.getWin(), Selection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left() <= touch_1.clientX && rngRect.right() >= touch_1.clientX && rngRect.top() <= touch_1.clientY && rngRect.bottom() >= touch_1.clientY;\n        });\n      }\n    };\n    var getAnchorSpec$1 = function (editor, isTriggeredByKeyboardEvent) {\n      var anchorSpec = isTriggeredByKeyboardEvent ? getNodeAnchor$1(editor) : getSelectionAnchor(editor);\n      return __assign({\n        bubble: nu$8(0, bubbleSize$1, bubbleAlignments$2),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable$1(),\n          maxHeightFunction: expandable()\n        }\n      }, anchorSpec);\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$2.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var show = function (editor, e, items, backstage, contextmenu, isTriggeredByKeyboardEvent) {\n      var anchorSpec = getAnchorSpec$1(editor, isTriggeredByKeyboardEvent);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Option.some(getContextToolbarBounds(editor));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, isTriggeredByKeyboardEvent) {\n      var detection = detect$3();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, isTriggeredByKeyboardEvent);\n      };\n      if ((isOSX || isiOS) && !isTriggeredByKeyboardEvent) {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        if (isAndroid && !isTriggeredByKeyboardEvent) {\n          editor.selection.setCursorLocation(e.target, 0);\n        }\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.settings.contextmenu_never_use_native || false;\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return get(editor.settings, name).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var Settings$1 = {\n      shouldNeverUseNative: shouldNeverUseNative,\n      getContextMenu: getContextMenu,\n      isContextMenuDisabled: isContextMenuDisabled\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            icon: item.icon,\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          return {\n            type: 'menuitem',\n            text: item.text,\n            icon: item.icon,\n            onAction: noarg(item.onAction)\n          };\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        if (has(contextMenus, name)) {\n          var items = contextMenus[name].update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([name]);\n        }\n      }, []);\n      if (sections.length > 0 && isSeparator$1(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !Settings$1.shouldNeverUseNative(editor);\n    };\n    var setup$a = function (editor, lazySink, backstage) {\n      var detection = detect$3();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        var isLongpress = e.type === 'longpress';\n        if (Settings$1.shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || Settings$1.isContextMenuDisabled(editor)) {\n          return;\n        }\n        var isTriggeredByKeyboardEvent = !isLongpress && (e.button !== 2 || e.target === editor.getBody());\n        var buildMenu = function () {\n          var selectedElement = isTriggeredByKeyboardEvent ? editor.selection.getStart(true) : e.target;\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = Settings$1.getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow$1 : initAndShow;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, isTriggeredByKeyboardEvent);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on(isTouch() ? 'longpress' : 'longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element()).filter(isElement).each(function (root) {\n        var initZIndex = get$2(root, initialAttribute);\n        if (has$1(root, initialAttribute)) {\n          set$2(root, 'z-index', initZIndex);\n        } else {\n          remove$6(root, 'z-index');\n        }\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element()).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$4(blocker.element(), 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var get$d = function (component, snapsInfo) {\n      var element = component.element();\n      var x = parseInt(get$2(element, snapsInfo.leftAttr), 10);\n      var y = parseInt(get$2(element, snapsInfo.topAttr), 10);\n      return isNaN(x) || isNaN(y) ? Option.none() : Option.some(Position(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element();\n      set$1(element, snapsInfo.leftAttr, pt.left() + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top() + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element();\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$d(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left() + delta.left(), fixed.top() + delta.top());\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left(), fixedCoord.top()),\n          extra: Option.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output(),\n          extra: spanned.extra()\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor();\n        var inRange = withinRange(newCoord, sensor, snap.range().left(), snap.range().top(), scroll, origin);\n        return inRange ? Option.some({\n          output: constant(absorb(snap.output(), newCoord, scroll, origin)),\n          extra: snap.extra\n        }) : Option.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor();\n          var deltas = getDeltas(newCoord, sensor, snap.range().left(), snap.range().top(), scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Option.some(deltas),\n              snap: Option.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left() + deltas.top()) / 2;\n            var bestAvg = (bestDeltas.left() + bestDeltas.top()) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Option.some(deltas),\n                snap: Option.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Option.none(),\n          snap: Option.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: constant(absorb(snap.output(), newCoord, scroll, origin)),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output(), snap.output(), scroll, origin),\n        extra: snap.extra()\n      };\n    };\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed$1 : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$3(location.left(), location.top());\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = cap(absoluteCoord.left(), bounds.x(), bounds.x() + bounds.width() - startData.width);\n      var newY = cap(absoluteCoord.top(), bounds.y(), bounds.y() + bounds.height() - startData.height);\n      var newCoords = absolute$3(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left(), offset$1.top());\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left(), fixed.top());\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$2(currentCoord, delta.left(), delta.top());\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left(), fixedCoord.top());\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element());\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element());\n        var scroll = get$8(doc);\n        var origin = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll, origin, delta, startData);\n        var styles = toStyles(newCoord, scroll, origin);\n        setAll$1(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element()),\n        width: getOuter$2(comp.element())\n      };\n    };\n    var move$1 = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element());\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', win),\n      defaulted$1('mustSnap', false)\n    ]);\n\n    var init$c = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event());\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Option.from(Position(event.x(), event.y()));\n    };\n    var getDelta$1 = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var handlers = function (dragConfig, dragState) {\n      var updateStartState = function (comp) {\n        dragState.setStartData(calcStartData(dragConfig, comp));\n      };\n      return derive([\n        run(windowScroll(), function (comp) {\n          dragState.getStartData().each(function () {\n            return updateStartState(comp);\n          });\n        }),\n        run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event().raw();\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Option.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move$1(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$c(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })\n      ]);\n    };\n    var schema$s = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      onHandler('onDrop'),\n      defaultedFunction('getBounds', win),\n      SnapSchema,\n      output('dragger', { handlers: handlers })\n    ];\n\n    var init$d = function (dragApi) {\n      return derive([\n        run(touchstart(), dragApi.forceDrop),\n        run(touchend(), dragApi.drop),\n        run(touchcancel(), dragApi.drop),\n        run(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event());\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Option.some(Position(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw();\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Option.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var handlers$1 = function (dragConfig, dragState) {\n      var blockerCell = Cell(Option.none());\n      var updateStartState = function (comp) {\n        dragState.setStartData(calcStartData(dragConfig, comp));\n      };\n      return derive([\n        run(windowScroll(), function (comp) {\n          dragState.getStartData().each(function () {\n            return updateStartState(comp);\n          });\n        }),\n        run(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            stop(component, blockerCell.get(), dragConfig, dragState);\n            blockerCell.set(Option.none());\n          };\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: function () {\n            },\n            forceDrop: stop$1,\n            move: function (event) {\n              move$1(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$d(dragApi));\n          blockerCell.set(Option.some(blocker));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move$1(component, dragConfig, dragState, TouchData, simulatedEvent.event());\n        }),\n        run(touchend(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Option.none());\n        }),\n        run(touchcancel(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Option.none());\n        })\n      ]);\n    };\n    var schema$t = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema,\n      output('dragger', { handlers: handlers$1 })\n    ];\n\n    var mouse = schema$s;\n    var touch = schema$t;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        mouse: mouse,\n        touch: touch\n    });\n\n    var init$e = function () {\n      var previous = Option.none();\n      var startData = Option.none();\n      var reset = function () {\n        previous = Option.none();\n        startData = Option.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Option.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        init: init$e\n    });\n\n    var snapTo$1 = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element());\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element());\n        var scroll = get$8(doc);\n        var origin = getOrigin(target);\n        var snapPin = snapTo(snap, scroll, origin);\n        var styles = toStyles(snapPin.coord, scroll, origin);\n        setAll$1(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        snapTo: snapTo$1\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: MixedBag([\n          'sensor',\n          'range',\n          'output'\n        ], ['extra'])\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var platform$2 = detect$3();\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute$3(x - snapOffset, y - snapOffset),\n          range: Position(width, height),\n          output: absolute$3(Option.some(x), Option.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element().dom().getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute$3(sensorLeft, sensorTop),\n          range: Position(sensorWidth, sensorHeight),\n          output: absolute$3(Option.some(x - rect.width / 2), Option.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(Option.some(td));\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: platform$2.deviceType.isTouch() ? 'touch' : 'mouse',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$b = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = Cell(Option.none());\n      var finishCell = Cell(Option.none());\n      var getTopLeftSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x(), box.y(), box.width(), box.height());\n      };\n      var getTopLeftSnaps = function () {\n        return map(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right(), box.bottom(), box.width(), box.height());\n      };\n      var getBottomRightSnaps = function () {\n        return map(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom().getBoundingClientRect();\n        remove$6(selector.element(), 'display');\n        var viewportHeight = defaultView(Element.fromDom(editor.getBody())).dom().innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$2(selector.element(), 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (platform$2.deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach$1(sink, topLeft);\n            attach$1(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(Option.some(e.start));\n          finishCell.set(Option.some(e.finish));\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('resize ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.set(Option.none());\n          finishCell.set(Option.none());\n        });\n      }\n    };\n    var TableSelectorHandles = { setup: setup$b };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = Utils.calcCappedSize(originalHeight + deltas.top(), getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = Utils.calcCappedSize(originalWidth + deltas.left(), getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = Element.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$6(container), get$7(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, Utils.numToPx(val));\n      });\n      Events.fireResizeEditor(editor);\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            }\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent = parents[i];\n          if (parent.nodeType === 1 && !isHidden$1(parent)) {\n            var args = editor.fire('ResolveName', {\n              name: parent.nodeName.toLowerCase(),\n              target: parent\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n    var ElementPath = { renderElementPath: renderElementPath };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            run(tapOrClick(), function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[tapOrClick()] = [\n          'wordcount-events',\n          'alloy.base.behaviour'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderResizeHandlerIcon = function (resizeType) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__resize-handle'],\n            attributes: { title: providersBackstage.translate('Resize') },\n            innerHtml: get$c('resize-handle', providersBackstage.icons)\n          },\n          behaviours: derive$1([Dragging.config({\n              mode: 'mouse',\n              repositionTarget: false,\n              onDrag: function (comp, target, delta) {\n                resize$3(editor, delta, resizeType);\n              },\n              blockerClass: 'tox-blocker'\n            })])\n        };\n      };\n      var renderBranding = function () {\n        var label = global$5.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getResizeType = function (editor) {\n        var fallback = !contains$1(editor.settings.plugins, 'autoresize');\n        var resize = editor.getParam('resize', fallback);\n        if (resize === false) {\n          return ResizeTypes.None;\n        } else if (resize === 'both') {\n          return ResizeTypes.Both;\n        } else {\n          return ResizeTypes.Vertical;\n        }\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(ElementPath.renderElementPath(editor, {}));\n        }\n        if (contains$1(editor.settings.plugins, 'wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeType = getResizeType(editor);\n        if (resizeType !== ResizeTypes.None) {\n          components.push(renderResizeHandlerIcon(resizeType));\n        }\n        return components;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$c = function (editor) {\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Option.none();\n      var platform = detect$3();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var dirAttributes = global$5.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var sink = build$1({\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-silver-sink',\n            'tox-tinymce-aux'\n          ].concat(platformClasses).concat(deviceClasses)\n        }, dirAttributes),\n        behaviours: derive$1([Positioning.config({\n            useFixed: function () {\n              return header.isDocked(lazyHeader);\n            }\n          })])\n      });\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyMoreButton = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getMoreButton(container);\n        }).getOrDie('Could not find more button element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar, lazyMoreButton);\n      var partMenubar = OuterContainer.parts().menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarDrawer = getToolbarDrawer(editor);\n      var partToolbar = OuterContainer.parts().toolbar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        },\n        split: toolbarDrawer,\n        lazyToolbar: lazyToolbar,\n        lazyMoreButton: lazyMoreButton,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      });\n      var partMultipleToolbar = OuterContainer.parts()['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        onEscape: function () {\n        },\n        split: toolbarDrawer\n      });\n      var partSocket = OuterContainer.parts().socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts().sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts().throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Option.some(renderStatusbar(editor, backstage.shared.providers)) : Option.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts().header({\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-header']\n        },\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        getSink: lazySink\n      });\n      var editorComponents = flatten([\n        [partHeader],\n        isInline ? [] : [socketSidebarContainer]\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$5.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a'\n          })])\n      }));\n      lazyOuterContainer = Option.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      Events$1.setup(editor, mothership, uiMothership);\n      TouchEvents.setup(editor);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: function () {\n          }\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = Utils.numToPx(getHeightWithFallback(editor));\n        var parsedWidth = Utils.numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$2(outerContainer.element(), 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$2(outerContainer.element(), 'height', parsedHeight);\n          } else {\n            set$2(outerContainer.element(), 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, lazyHeader);\n        FormatControls.setup(editor, backstage);\n        setup$a(editor, lazySink, backstage);\n        setup$7(editor);\n        setup$8(editor, lazyThrobber, backstage.shared);\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: !editor.settings.menu ? {} : map$1(editor.settings.menu, function (menu) {\n            return merge(menu, { items: menu.items });\n          }),\n          menubar: editor.settings.menubar,\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return editor.getParam('toolbar', true);\n          }),\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        ContextToolbar.register(editor, contextToolbars, sink, { backstage: backstage });\n        TableSelectorHandles.setup(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n    var Render = { setup: setup$c };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Option.from(get$2(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var AriaLabel = {\n      labelledBy: function (labelledElement, labelElement) {\n        var labelId = Option.from(get$2(labelledElement, 'id')).fold(function () {\n          var id = generate$1('dialog-label');\n          set$1(labelElement, 'id', id);\n          return id;\n        }, identity);\n        set$1(labelledElement, 'aria-labelledby', labelId);\n      }\n    };\n\n    var schema$u = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', constant(true)),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$e = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$1(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$h = function (detail, components, spec, externals) {\n      var dialogBusyEvent = generate$1('alloy.dialog.busy');\n      var dialogIdleEvent = generate$1('alloy.dialog.idle');\n      var busyBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Option.some(true);\n          },\n          onShiftTab: function () {\n            return Option.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var showDialog = function (dialog) {\n        var sink = detail.lazySink(dialog).getOrDie();\n        var busyComp = Cell(Option.none());\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [\n              runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              }),\n              run(dialogIdleEvent, function (blocker, se) {\n                if (has$1(dialog.element(), 'aria-busy')) {\n                  remove$1(dialog.element(), 'aria-busy');\n                  busyComp.get().each(function (bc) {\n                    return Replacing.remove(dialog, bc);\n                  });\n                }\n              }),\n              run(dialogBusyEvent, function (blocker, se) {\n                set$1(dialog.element(), 'aria-busy', 'true');\n                var getBusySpec = se.event().getBusySpec();\n                busyComp.get().each(function (bc) {\n                  Replacing.remove(dialog, bc);\n                });\n                var busySpec = getBusySpec(dialog, busyBehaviours);\n                var busy = blocker.getSystem().build(busySpec);\n                busyComp.set(Option.some(busy));\n                Replacing.append(dialog, premade$1(busy));\n                if (busy.hasConfigured(Keying)) {\n                  Keying.focusIn(busy);\n                }\n              })\n            ])\n          ])\n        }));\n        attach$1(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        parent(dialog.element()).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        emitWith(dialog, dialogBusyEvent, { getBusySpec: getBusySpec });\n      };\n      var setIdle = function (dialog) {\n        emit(dialog, dialogIdleEvent);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), { 'alloy.system.attached': [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []) });\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              AriaLabel.labelledBy(c.element(), getPartOrDie(c, detail, 'title').element());\n              describedBy(c.element(), getPartOrDie(c, detail, 'body').element());\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$u(),\n      partFields: parts$e(),\n      factory: factory$h,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$2, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$2)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$2)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogToggleMenuItemSchema = objOf([\n      strictString('type'),\n      strictString('name'),\n      defaultedBoolean('active', false)\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogButtonFields = __spreadArrays(baseButtonFields, [strictString('text')]);\n    var normalButtonFields = __spreadArrays([strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogButtonFields);\n    var menuButtonFields = __spreadArrays([\n      strictStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictArrayOf('items', dialogToggleMenuItemSchema),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ], baseButtonFields);\n    var dialogButtonSchema = choose$1('type', {\n      submit: normalButtonFields,\n      cancel: normalButtonFields,\n      custom: normalButtonFields,\n      menu: menuButtonFields\n    });\n\n    var dialogButtonFields$1 = dialogButtonFields;\n    var dialogButtonSchema$1 = dialogButtonSchema;\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema$1),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Option.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArrays([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields$1));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var value$3 = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(NavigableObject.isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                domGlobals.console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$i = function (detail, spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function (spec) {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$i\n    });\n\n    var schema$v = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail, tabSpec) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$f = constant([tabsPart]);\n\n    var factory$j = function (detail, components, spec, externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        'components': components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element(), 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element(), 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element();\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$v(),\n      partFields: parts$f(),\n      factory: factory$j\n    });\n\n    var factory$k = function (detail, spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$k\n    });\n\n    var schema$w = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$g = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$l = function (detail, components, spec, externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            set$1(tabview.element(), 'aria-labelledby', get$2(button.element(), 'id'));\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$b(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event().button();\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event().button();\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$w(),\n      partFields: parts$g(),\n      factory: factory$l,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom().getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom();\n      var rootElm = ancestor$1(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$4(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, domGlobals.window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$6(tabview);\n      var isTabListBeside = tabview.dom().offsetLeft >= tablist.dom().offsetLeft + get$7(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$6(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$4(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$4(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$6(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$2(tabview, 'height', height + 'px');\n      if (!detect$3().browser.isIE()) {\n        set$2(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$1(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant$1(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$2(tabview, 'height', '0');\n            set$2(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant$1(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Option.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element();\n            getTabview(dialog).each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOption().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            var dialog = comp.element();\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, se) {\n            var dialog = comp.element();\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active();\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom().getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Option.from(newHeight));\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(NavigableObject.isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts().tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts().tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts().tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Option.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Option.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Option.none(), backstage, false);\n      return ModalDialog.parts().body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [NavigableObject.craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(NavigableObject.isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts().body(bodySpec);\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), NavigableObject.onFocus),\n        fireApiEvent(formCloseEvent, function (api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (c, se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (c, se) {\n          return extras.onBlock(se.event());\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event(), c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name() });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event(), c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name() });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var current = active();\n          spec.onAction(api, {\n            name: event.name(),\n            value: event.value()\n          });\n          active().fold(function () {\n            focusIn();\n          }, function (focused) {\n            if (!contains$2(component.element(), focused) || has$1(focused, 'disabled')) {\n              focusIn();\n            } else if (contains$2(focused, current.getOrNull()) && has$1(current.getOrDie(), 'disabled')) {\n              focusIn();\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name(),\n            oldTabName: event.oldName()\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Option.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts().footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Option.some(comp);\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$1(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = merge(prevData, newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each$1(menuItemStates, function (v, k) {\n            if (has(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var isTouch$4 = global$6.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts().close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts().title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts().body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts().footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Option.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !NavigableObject.isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArrays([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray()),\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch$4 ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArrays([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$4(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours)),\n        eventOrder: __assign((_a = {}, _a[execute()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: '<svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z\" fill-rule=\"evenodd\"></path></svg>'\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Option.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts().title(renderTitle(spec, Option.none(), providersBackstage));\n      var pHandle = ModalDialog.parts().draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts().close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getEventExtras = function (lazyDialog, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (d, bs) {\n            return {\n              dom: {\n                tag: 'div',\n                classes: ['tox-dialog__busy-spinner'],\n                attributes: { 'aria-label': blockEvent.message() },\n                styles: {\n                  left: '0px',\n                  right: '0px',\n                  bottom: '0px',\n                  top: '0px',\n                  position: 'absolute'\n                }\n              },\n              behaviours: bs,\n              components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n            };\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Option.some(incoming);\n      };\n      return build$1(renderDialog(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArrays([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          'reflecting',\n          'receiving'\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          'reflecting',\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          'reflecting',\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var renderDialog$1 = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var dialogSize = dialogInit.internalDialog.size !== 'normal' ? dialogInit.internalDialog.size === 'large' ? ['tox-dialog--width-lg'] : ['tox-dialog--width-md'] : [];\n      var spec = {\n        header: header,\n        body: body,\n        footer: Option.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Option.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function () {\n        },\n        onUnblock: function () {\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      });\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Option.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !NavigableObject.isPseudoStop(elem) && (name(elem) !== 'button' || get$2(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, se) {\n              Keying.focusIn(comp);\n            })])),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Option.none();\n        } else {\n          return Option.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$g(internalDialog.url, { base_uri: new global$g(domGlobals.window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Option.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(Element.fromDom(domGlobals.window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$g(e.raw().origin))) {\n                var data = e.raw().data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Option.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element(), 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom().contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$d = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Option.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$e = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Option.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar) {\n      if (isStickyToolbar) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Option.some(box(Element.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            leftAttr: 'data-dock-left',\n            topAttr: 'data-dock-top',\n            positionAttr: 'data-dock-pos',\n            modes: ['top']\n          })];\n      }\n    };\n    var setup$f = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$d(extras);\n      var confirmDialog = setup$e(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.toolbar(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog$1(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var inlineDialog = value$3();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {},\n            inlineBehaviours: derive$1(__spreadArrays([config('window-manager-inline-events', [run(dismissRequested(), function (comp, se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1)))\n          }));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, anchor, premade$1(dialogUi.dialog), Option.some(body()));\n          if (!isStickyToolbar$1) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n    var WindowManager = { setup: setup$f };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = Render.setup(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = WindowManager.setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}(window));\n","// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","import uuid from 'uuid';\nimport Axios from '../config/axios';\nimport _ from 'lodash';\n\nconst defaultDescription = 'Image description';\n\nexport function handleImageUpload(blobInfo, success, failure, progress) {\n  const config = {\n    onUploadProgress: function onUploadProgress(event) {\n      progress(Math.round(event.loaded / event.total * 100));\n    }\n  };\n  let formData = new FormData();\n  formData.append('image', blobInfo.blob(), blobInfo.filename());\n  formData.append('name', blobInfo.name());\n  Axios.post('/image/', formData, config).then((response) => {\n    success(response.data.location);\n  }, (result) => failure(result, {remove: true}));\n}\n\nfunction firstInaccessibleImage(editor) {\n  let images = editor.getDoc().getElementsByTagName(\"IMG\");\n  for(let ii= 0; ii < images.length; ii++) {\n    let image = images[ii];\n    if (!image.alt) {\n      return image;\n    }\n  }\n  return null;\n}\n\nexport function checkAllyShip(editor) {\n  let tinymceEditor = editor;\n  editor.ui.registry.addToggleButton('checkAlly', {\n    text: 'Check Accessibility',\n    classes: \"a11y-check\",\n    onSetup: function(api) {\n      function handleChange() {\n        let inaccessible = !!firstInaccessibleImage(editor);\n        if (inaccessible) {\n          api.setActive(inaccessible);\n          api.setDisabled(false);\n        } else {\n          api.setActive(false);\n          api.setDisabled(true);\n        }\n      }\n      const dirtyWatcher = tinymceEditor.on('Dirty', handleChange);\n      const changeWatcher = tinymceEditor.on('change', handleChange);\n      return function() {\n        tinymceEditor.off('Dirty', dirtyWatcher);\n        tinymceEditor.off('change', changeWatcher);\n      };\n\n    },\n    onAction: function () {\n      let image = firstInaccessibleImage(editor);\n      if(image) {\n        tinymceEditor.execCommand('mceSelectNode', false, image);\n      }\n    }});\n}\n\nexport function imageAltContextForm(editor) {\n  function isImage (node) {\n    return node.nodeName.toLowerCase() === 'img';\n  }\n\n  editor.ui.registry.addContextForm('image-alt', {\n    launch: {\n      type: 'contextformtogglebutton',\n      icon: 'accessibility-check'\n    },\n    label: 'description',\n    predicate: isImage,\n    position: 'node',\n    initValue: function (arg) {\n      return editor.selection.getNode().alt || defaultDescription;\n    },\n    commands: [\n      {\n        type: 'contextformtogglebutton',\n        tooltip: 'Save',\n        icon: 'save',\n        primary: true,\n        onAction: function (formApi) {\n          var value = formApi.getValue();\n          if (value !== defaultDescription) {\n            editor.selection.getNode().alt = value;\n            editor.setDirty(false);\n            editor.setDirty(true);\n          }\n          formApi.hide();\n        }\n      },\n      {\n        type: 'contextformtogglebutton',\n        icon: 'image',\n        tooltip: 'More image options',\n        active: true,\n        onAction: function (formApi) {\n          formApi.hide();\n          editor.execCommand('mceImage');\n        }\n      }\n    ]\n  });\n}\n\n\nexport function installFootnotes(editor) {\n  function _isFootnoteRef(node) {\n    return node.classList.contains('footnote-ref');\n  }\n\n  function _isFootnoteBody(node) {\n    return node.classList.contains('footnote-label') || node.classList.contains('footnote-body');\n  }\n\n  function isFootnote(node) {\n    return node.classList.contains('footnote');\n  }\n\n\n  function getFootnoteNodePair(id) {\n    let refNode = editor.dom.get(`footnote-${id}-ref`);\n    let bodyNode = editor.dom.get(`footnote-${id}`);\n    return { refNode, bodyNode };\n  }\n\n  function footnoteIntegrity() {\n    // On nodechanges, search for every footnote, and make sure it's paired up properly to check for deletions.\n    let candidates = editor.dom.$('.footnote').filter((_,e) => !e.classList.contains('footnote-footer'));\n    // Association lists to maintain order\n    let refs = [];\n    let bodies = [];\n    for(let ii = 0; ii < candidates.length; ii++) {\n      let candidate = candidates[ii];\n      let id = getFootnoteId(candidate);\n      if(candidate.classList.contains('footnote-ref')) {\n        let mark = candidate.innerText;\n        refs.push({id,candidate,mark});\n      } else if (candidate.classList.contains('footnote-body')) {\n        let label = candidate.getElementsByClassName('footnote-label');\n        let mark;\n        if (!label || label.length == 0) {\n          if (candidate.innerText.trim() !== \"\") {\n            mark = '';\n            bodies.push({id,candidate,mark});\n          }\n        } else {\n          mark = label[0].innerText;\n          bodies.push({id,candidate,mark});\n        }\n\n      }\n    }\n\n    let refsById = _.chain(refs).groupBy('id').mapValues(x => x[0]).value();\n    let bodiesById = _.chain(bodies).groupBy('id').mapValues(x => x[0]).value();\n    let orphanedRefs = _.differenceBy(refs, bodies, 'id');\n    let orphanedBodies = _.differenceBy(bodies, refs, 'id');\n\n    // Delete the other half of orphaned Refs.\n    orphanedRefs.forEach(function({id, candidate}) {\n      editor.dom.remove(candidate);\n      _.unset(refsById, id);\n    });\n    orphanedBodies.forEach(function({id, candidate}) {\n      editor.dom.remove(candidate);\n      _.unset(bodiesById, id);\n    });\n\n    // Adjust marks if necessary\n    _.values(refsById).forEach(function({id, mark, candidate}) {\n      let bodyMark = bodiesById[id].mark;\n      if (mark !== bodyMark) {\n        let bodyDom = bodiesById[id].candidate;\n        let labelDom = bodyDom.getElementsByClassName('footnote-label');\n        if(! labelDom || labelDom.length == 0) {\n          if (bodyDom.firstChild) {\n            labelDom = editor.dom.createFragment(`<span class=\"footnote-label\">${mark}</span>`);\n            bodyDom.firstChild.prepend(labelDom);\n          }\n        } else {\n          labelDom[0].innerText = mark;\n        }\n        // let dataMark = bodyDom.attributes['data-mark'];\n        // dataMark.value = mark;\n        // bodyDom.attributes.setNamedItem(dataMark);\n      }\n    });\n\n    // Clean up orphaned labels\n    let labelsDom = editor.dom.$('.footnote-label');\n    let labels = [];\n    for(let ii=0; ii < labelsDom.length; ii++) {\n      labels.push(labelsDom[ii]);\n    }\n    labels.forEach(label => {\n      let parent = label;\n      while (parent) {\n        if (parent.classList.contains('footnote-footer')) {\n          return;\n        }\n        parent = parent.parentElement;\n      }\n      editor.dom.remove(label);\n    });\n\n    // Ensure footnotes have at least one space\n    // So that the cursor doesn't jump to the start of a label\n    labelsDom = editor.dom.$('.footnote-label');\n    labels = [];\n    for(let ii=0; ii < labelsDom.length; ii++) {\n      labels.push(labelsDom[ii]);\n    }\n    labels.forEach(label => {\n      let parentText = label.parentElement.innerText;\n      if (parentText.trim() == label.innerText) {\n        let space = document.createTextNode(\" \");\n        label.parentElement.appendChild(space);\n        editor.selection.setCursorLocation(label.parentElement, parentText.length);\n      }\n    });\n\n    // Make sure selection isn't inside of label\n    if (editor.selection.getStart() == editor.selection.getEnd() && editor.selection.getStart().classList.contains('footnote-label')) {\n      let label = editor.selection.getStart();\n      editor.selection.setCursorLocation(label.parentElement, label.innerText.length);\n    }\n\n    // Move footer to bottom of page\n    let footer = editor.dom.$('.footnote-footer');\n    if(footer.length === 1) {\n      footer = footer[0];\n      if (footer !== footer.parentElement.lastElementChild) {\n        footer.parentElement.appendChild(footer);\n      }\n    }\n  }\n\n  function getFooter() {\n    let footnoteDiv = editor.dom.$(\".footnote-footer\");\n    if (footnoteDiv.length == 1) {\n      return footnoteDiv[0];\n    }\n    if(footnoteDiv.length > 1) {\n      console.error(\"Multiple footers present.\");\n      return null;\n    }\n\n    let footer = editor.dom.add(editor.getBody(), 'div', {class: 'footnote footnote-footer'}, '');\n    return footer;\n  }\n\n  function createFootnote(data) {\n    data.id = uuid();\n    let refHTML = `<span class=\"footnote footnote-ref\" data-custom-style=\"Footnote Reference\" id=\"footnote-${data.id}-ref\">${data.mark}</span>`;\n    let bodyNode = editor.dom.createFragment(`<div class=\"footnote footnote-body\" id=\"footnote-${data.id}\"><p><span class=\"footnote-label\" contenteditable=\"false\">${data.mark}</span>${data.footnote}</p></div>`);\n\n    let footer = getFooter();\n    footer.appendChild(bodyNode);\n    editor.execCommand(\"mceInsertContent\", false, refHTML);\n  }\n\n  function updateFootnote(data) {\n    let {refNode, bodyNode} = getFootnoteNodePair(data.id);\n    refNode.innerText = data.mark;\n    let bodyContent = editor.dom.createFragment(`<p><span class=\"footnote-label\" contenteditable=\"false\">${data.mark}</span>${data.footnote}</p>`);\n    while(bodyNode.firstChild) {bodyNode.firstChild.remove();}\n    bodyNode.appendChild(bodyContent);\n  }\n\n  function getFootnoteData(id) {\n    let {refNode, bodyNode} = getFootnoteNodePair(id);\n    let mark = refNode.innerText;\n    let redundantMark = bodyNode.firstChild.firstChild.innerText;\n    let footnote = bodyNode.innerText.substr(redundantMark.length).trim();\n    return {mark, footnote, id};\n  }\n\n  function getFootnoteId(node) {\n    let htmlID = node.id || node.parentElement.id;\n    if(htmlID) {\n      return htmlID.substr(9,36);\n    }\n    return null;\n  }\n\n  function openDialog() {\n    let currentNode = editor.selection.getNode();\n    let isEditingNode = isFootnote(currentNode);\n    let nextFootnote = editor.dom.$(\".footnote-ref\").length + 1;\n    let currentData = {mark: \"\"+nextFootnote, footnote: \"\"};\n\n    if(isEditingNode) {\n      let id = getFootnoteId(currentNode);\n      currentData = getFootnoteData(id);\n    }\n    editor.windowManager.open({\n      title: 'Footnote',\n      size: 'normal',\n      body: {\n        type: 'panel',\n        items : [\n          {\n            label: 'Mark',\n            type: 'input',\n            name: 'mark'\n          },\n          {\n            label: 'Footnote',\n            type:'textarea',\n            name: 'footnote',\n            multiline: true,\n            minWidth: 520,\n            minHeight: 100,\n          }\n        ],\n      },\n      buttons: [\n        {\n          type: 'cancel',\n          name: 'cancel',\n          text: 'Cancel'\n        },\n        {\n          type: 'submit',\n          name: 'save',\n          text: 'Save',\n          primary: true\n        },\n        {\n          type: 'custom',\n          name: 'delete',\n          text: 'Delete'\n        }\n      ],\n      initialData: currentData,\n      onSubmit: function (dialog) {\n        let data = dialog.getData();\n        if (isEditingNode) {\n          data.id = currentData.id;\n          updateFootnote(data);\n        } else {\n          createFootnote(data);\n        }\n        dialog.close();\n      },\n      onCancel: function(dialog) {\n        dialog.close();\n      },\n      onAction: function(dialog, details) {\n        if (details && details.name == \"delete\") {\n          let {refNode, bodyNode} = getFootnoteNodePair(currentData.id);\n          refNode.remove();\n          bodyNode.remove();\n        }\n        dialog.close();\n      }\n    });\n  }\n\n  var Dialog = { open: openDialog };\n\n  editor.ui.registry.addToggleButton('footnote', {\n    text: 'Footnote',\n    tooltip : 'Footnote',\n    onAction: function () {\n      return editor.execCommand('openFootnote');\n    }\n  });\n  editor.ui.registry.addMenuItem('footnote', {\n    text: 'Footnote',\n    onAction: function () {\n      return editor.execCommand('openFootnote');\n    }\n  });\n  editor.addCommand('openFootnote', function () {\n    Dialog.open(editor);\n  });\n\n  editor.on(\"NodeChange\", function(e) {\n    footnoteIntegrity();\n  });\n}\n\n\n\nexport function getInitConfig(selector, enhanced, code) {\n\n  const semanticStyles = 'img[alt=\"\"] {outline: 4px solid red;}.footnote-ref {font-size: 16px;vertical-align: super;}.footnote-body {margin-left: 2rem;}.footnote-label {float:left;margin-left:-1rem;} .footnote-label::after{content: \".\";} .footnote-footer {border-top: 1px solid black;clear:both;}.image-center-large{width:80%;object-fit:contain;margin:0auto;display:block;}.image-center-medium{width:50%;object-fit:contain;margin:0 auto;display:block;}.image-left-medium{width:50%;object-fit:contain;margin:0 2rem;float:left;display:block;}.image-right-medium{width:50%;object-fit:contain;margin:0 2rem;float:right;display:block;}';\n\n  let plugins = ['link', 'lists', 'image', 'table', 'paste'];\n  // toolbar options: https://www.tiny.cloud/docs/advanced/editor-control-identifiers/#toolbarcontrols\n\n  let toolbar = 'undo redo removeformat | styleselect | h1 h2 | bold italic underline | numlist bullist indent outdent | table blockquote link image removeformat';\n  if (enhanced) {\n    toolbar += ' media footnote | checkAlly';\n    plugins.push('media');\n  }\n  if (code){\n    plugins.push('code');\n    toolbar += ' | code';\n  }\n\n  let extend_valid_elements = [['div', ['class', 'title', 'style', 'tabindex', 'id', 'class', 'data-custom-style']],\n                               ['span', ['class', 'title', 'style', 'tabindex', 'id', 'class', 'data-custom-style'],\n                                ['img', ['class', 'alt', 'title', 'id', 'data-custom-style']]]]\n      .map(x => `${x[0]}[${x[1].join('|')}]`)\n      .join(',');\n\n  let image_class_list = [{title: 'Large centered', value: 'image-center-large'},\n                          {title: 'Center aligned', value: 'image-center-medium'},\n                          {title: 'Left aligned', value: 'image-left-medium'},\n                          {title: 'Right aligned', value: 'image-right-medium'}\n                         ];\n  let config = {\n    height:'60vh',\n    plugins: plugins,\n    skin_url: '/static/tinymce_skin',\n    content_style: semanticStyles,\n    menubar: false,\n    branding: false,\n    toolbar: toolbar,\n    image_uploadtab: enhanced,\n    images_upload_handler: handleImageUpload,\n    images_upload_credentials: true,\n    image_dimensions: false,\n    image_class_list: image_class_list,\n    automatic_uploads: true,\n    contextmenu_never_use_native: false,\n    contextmenu:false,\n    paste_auto_cleanup_on_paste : true,\n    paste_remove_styles: true,\n    paste_remove_styles_if_webkit: true,\n    paste_strip_class_attributes: \"all\",\n    media_dimensions: false,\n    extended_valid_elements: extend_valid_elements,\n    setup: (editor) => {\n      if (enhanced) {\n        installFootnotes(editor);\n        checkAllyShip(editor);\n        imageAltContextForm(editor);\n      }\n    }\n  };\n\n  if (selector) {\n    config.selector = selector;\n  }\n  return config;\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = Cell(PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch));\n    var detect$3 = function () {\n      return platform.get();\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = detect$3().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var fireListEvent = function (editor, action, element) {\n      return editor.fire('ListMutation', {\n        action: action,\n        element: element\n      });\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var htmlElement = function (scope) {\n      return Global$1.getOrDie('HTMLElement', scope);\n    };\n    var isPrototypeOf = function (x) {\n      var scope = resolve('ownerDocument.defaultView', x);\n      return htmlElement(scope).prototype.isPrototypeOf(x);\n    };\n    var HTMLElement = { isPrototypeOf: isPrototypeOf };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = function (node) {\n      return node && /^(OL|UL|DL)$/.test(node.nodeName);\n    };\n    var isOlUlNode = function (node) {\n      return node && /^(OL|UL)$/.test(node.nodeName);\n    };\n    var isListItemNode = function (node) {\n      return node && /^(LI|DT|DD)$/.test(node.nodeName);\n    };\n    var isDlItemNode = function (node) {\n      return node && /^(DT|DD)$/.test(node.nodeName);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isBr = function (node) {\n      return node && node.nodeName === 'BR';\n    };\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isLastChild = function (node) {\n      return node.parentNode.lastChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n        return true;\n      }\n      return false;\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n    var NodeType = {\n      isTextNode: isTextNode,\n      isListNode: isListNode,\n      isOlUlNode: isOlUlNode,\n      isDlItemNode: isDlItemNode,\n      isListItemNode: isListItemNode,\n      isTableCellNode: isTableCellNode,\n      isBr: isBr,\n      isFirstChild: isFirstChild,\n      isLastChild: isLastChild,\n      isTextBlock: isTextBlock,\n      isBlock: isBlock,\n      isBogusBr: isBogusBr,\n      isEmpty: isEmpty,\n      isChildOfBody: isChildOfBody\n    };\n\n    var getParentList = function (editor) {\n      var selectionStart = editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return NodeType.isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return NodeType.isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$4.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return NodeType.isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), NodeType.isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), NodeType.isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$4.unique(listRoots);\n    };\n    var isList = function (editor) {\n      var list = getParentList(editor);\n      return HTMLElement.isPrototypeOf(list);\n    };\n    var Selection = {\n      isList: isList,\n      getParentList: getParentList,\n      getSelectedSubLists: getSelectedSubLists,\n      getSelectedListItems: getSelectedListItems,\n      getClosestListRootElm: getClosestListRootElm,\n      getSelectedDlItems: getSelectedDlItems,\n      getSelectedListRoots: getSelectedListRoots\n    };\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var node, textBlock, blockName, hasContentNode;\n      if (editor.settings.forced_root_block) {\n        blockName = editor.settings.forced_root_block;\n      }\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === editor.settings.forced_root_block) {\n          dom.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n        }\n        if (!NodeType.isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (NodeType.isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!editor.settings.forced_root_block) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: Element.fromTag(listType, scope),\n        item: Element.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = Element.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList$1 = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList$1).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList$1).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = merge({}, source.listAttributes);\n    };\n    var previousSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      for (var i = start - 1; i >= 0; i--) {\n        if (entries[i].depth === depth) {\n          return Option.some(entries[i]);\n        }\n        if (entries[i].depth < depth) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        previousSiblingEntry(entries, i).each(function (matchingEntry) {\n          cloneListProperties(entry, matchingEntry);\n        });\n      });\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList$1).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList$1).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList$1(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      return map(entries, function (entry) {\n        var content = fromElements(entry.content);\n        return Element.fromDom(createTextBlock(editor, content.dom()));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      normalizeEntries(entries);\n      return composeList(editor.contentDocument, entries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(Selection.getSelectedListItems(editor), Element.fromDom);\n      return lift2(find(selectedListItems, not(hasFirstChildList)), find(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        var composedLists = composeEntries(editor, entrySet.entries);\n        each(composedLists, function (composedList) {\n          fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom());\n        });\n        before$1(entrySet.sourceList, composedLists);\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var DOM = global$6.DOM;\n    var splitList = function (editor, ul, li) {\n      var tmpRng, fragment, bookmarks, node, newBlock;\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM.remove(targetNode);\n      };\n      bookmarks = DOM.select('span[data-mce-type=\"bookmark\"]', ul);\n      newBlock = createTextBlock(editor, li);\n      tmpRng = DOM.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      fragment = tmpRng.extractContents();\n      for (node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM.insertAfter(fragment, ul);\n      }\n      DOM.insertAfter(newBlock, ul);\n      if (NodeType.isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM.remove(li);\n      if (NodeType.isEmpty(editor.dom, ul)) {\n        DOM.remove(ul);\n      }\n    };\n    var SplitList = { splitList: splitList };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return SplitList.splitList(editor, dl.dom(), item.dom());\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (NodeType.isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (NodeType.isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && NodeType.isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && NodeType.isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n    var Range = {\n      getNormalizedPoint: getNormalizedPoint,\n      normalizeRange: normalizeRange\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(Selection.getSelectedListRoots(editor), Element.fromDom);\n      var dlItems = map(Selection.getSelectedDlItems(editor), Element.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(Range.normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var DOM$1 = global$6.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM$1.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      function restoreEndPoint(start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM$1.remove(node);\n          if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n            container.appendChild(DOM$1.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      }\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM$1.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return Range.normalizeRange(rng);\n    };\n    var Bookmark = {\n      createBookmark: createBookmark,\n      resolveBookmark: resolveBookmark\n    };\n\n    var isCustomList = function (list) {\n      return /\\btox\\-/.test(list.className);\n    };\n\n    var listToggleActionFromListName = function (listName) {\n      switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n      case 'OL':\n        return 'ToggleOlList';\n      case 'DL':\n        return 'ToggleDLList';\n      }\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && NodeType.isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (NodeType.isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (NodeType.isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || NodeType.isBr(node)) {\n          if (NodeType.isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$7.isBookmarkNode(node)) {\n          if (NodeType.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n      var rng = editor.selection.getRng(true);\n      var bookmark;\n      var listItemName = 'LI';\n      var root = Selection.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      bookmark = Bookmark.createBookmark(rng);\n      global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n        var listBlock, sibling;\n        sibling = block.previousSibling;\n        if (sibling && NodeType.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n        removeStyles(dom, block, [\n          'margin',\n          'margin-right',\n          'margin-bottom',\n          'margin-left',\n          'margin-top',\n          'padding',\n          'padding-right',\n          'padding-bottom',\n          'padding-left',\n          'padding-top'\n        ]);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      });\n      editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && NodeType.isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (editor, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = editor.dom.rename(list, listName);\n        updateListWithDetails(editor.dom, newList, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      } else {\n        updateListWithDetails(editor.dom, list, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), list);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n        global$5.each([parentList].concat(lists), function (elm) {\n          updateList(editor, elm, listName, detail);\n        });\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          var newList = editor.dom.rename(parentList, listName);\n          mergeWithAdjacentLists(editor.dom, newList);\n          editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n          fireListEvent(editor, listToggleActionFromListName(listName), newList);\n        }\n      } else {\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n      }\n    };\n    var toggleList = function (editor, listName, detail) {\n      var parentList = Selection.getParentList(editor);\n      var selectedSubLists = Selection.getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n      if (parentList && selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n    var ToggleList = {\n      toggleList: toggleList,\n      mergeWithAdjacentLists: mergeWithAdjacentLists\n    };\n\n    var DOM$2 = global$6.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (NodeType.isEmpty(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (NodeType.isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n    var NormalizeLists = {\n      normalizeList: normalizeList,\n      normalizeLists: normalizeLists\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      if (NodeType.isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      var walker = new global$2(node, root);\n      if (isForward) {\n        if (NodeType.isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (NodeType.isTextNode(node) && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !NodeType.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node, targetElm;\n      targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!NodeType.isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var node, listNode;\n      var ul = fromElm.parentNode;\n      if (!NodeType.isChildOfBody(dom, fromElm) || !NodeType.isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (NodeType.isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (NodeType.isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      node = toElm.lastChild;\n      if (node && NodeType.isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (NodeType.isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(Element.fromDom(toElm), Element.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, NodeType.isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (NodeType.isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = Bookmark.createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = Bookmark.createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = Bookmark.resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      if (li) {\n        var ul = li.parentNode;\n        if (ul === editor.getBody() && NodeType.isEmpty(dom, ul)) {\n          return true;\n        }\n        var rng_1 = Range.normalizeRange(selection.getRng());\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n        if (otherLi_1 && otherLi_1 !== li) {\n          editor.undoManager.transact(function () {\n            if (isForward) {\n              mergeForward(editor, rng_1, otherLi_1, li);\n            } else {\n              if (NodeType.isFirstChild(li)) {\n                outdentListSelection(editor);\n              } else {\n                mergeBackward(editor, rng_1, li, otherLi_1);\n              }\n            }\n          });\n          return true;\n        } else if (!otherLi_1) {\n          if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n            editor.undoManager.transact(function () {\n              flattenListSelection(editor);\n            });\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = Range.normalizeRange(editor.selection.getRng());\n        var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_2) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            ToggleList.mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n            editor.selection.select(otherLi_2, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || Selection.getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          NormalizeLists.normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Delete = {\n      setup: setup,\n      backspaceDelete: backspaceDelete\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          Delete.backspaceDelete(editor, isForward);\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n    var Commands = { register: register };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var Settings = { shouldIndentOnTab: shouldIndentOnTab };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (Settings.shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      Delete.setup(editor);\n    };\n    var Keyboard = { setup: setup$1 };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (buttonApi) {\n        var nodeChangeHandler = function (e) {\n          var tableCellIndex = findIndex(e.parents, NodeType.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$5.grep(parents, NodeType.isListNode);\n          buttonApi.setActive(lists.length > 0 && lists[0].nodeName === listName && !isCustomList(lists[0]));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var register$1 = function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      var exec = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      if (!hasPlugin(editor, 'advlist')) {\n        editor.ui.registry.addToggleButton('numlist', {\n          icon: 'ordered-list',\n          active: false,\n          tooltip: 'Numbered list',\n          onAction: exec('InsertOrderedList'),\n          onSetup: listState(editor, 'OL')\n        });\n        editor.ui.registry.addToggleButton('bullist', {\n          icon: 'unordered-list',\n          active: false,\n          tooltip: 'Bullet list',\n          onAction: exec('InsertUnorderedList'),\n          onSetup: listState(editor, 'UL')\n        });\n      }\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('lists', function (editor) {\n        Keyboard.setup(editor);\n        Buttons.register(editor);\n        Commands.register(editor);\n        return Api.get(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n\n    var getScripts = function (editor) {\n      return editor.getParam('media_scripts');\n    };\n    var getAudioTemplateCallback = function (editor) {\n      return editor.getParam('audio_template_callback');\n    };\n    var getVideoTemplateCallback = function (editor) {\n      return editor.getParam('video_template_callback');\n    };\n    var hasLiveEmbeds = function (editor) {\n      return editor.getParam('media_live_embeds', true);\n    };\n    var shouldFilterHtml = function (editor) {\n      return editor.getParam('media_filter_html', true);\n    };\n    var getUrlResolver = function (editor) {\n      return editor.getParam('media_url_resolver');\n    };\n    var hasAltSource = function (editor) {\n      return editor.getParam('media_alt_source', true);\n    };\n    var hasPoster = function (editor) {\n      return editor.getParam('media_poster', true);\n    };\n    var hasDimensions = function (editor) {\n      return editor.getParam('media_dimensions', true);\n    };\n    var Settings = {\n      getScripts: getScripts,\n      getAudioTemplateCallback: getAudioTemplateCallback,\n      getVideoTemplateCallback: getVideoTemplateCallback,\n      hasLiveEmbeds: hasLiveEmbeds,\n      shouldFilterHtml: shouldFilterHtml,\n      getUrlResolver: getUrlResolver,\n      hasAltSource: hasAltSource,\n      hasPoster: hasPoster,\n      hasDimensions: hasDimensions\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.SaxParser');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var trimPx = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var addPx = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var getSize = function (name) {\n      return function (elm) {\n        return elm ? trimPx(elm.style[name]) : '';\n      };\n    };\n    var setSize = function (name) {\n      return function (elm, value) {\n        if (elm) {\n          elm.style[name] = addPx(value);\n        }\n      };\n    };\n    var Size = {\n      getMaxWidth: getSize('maxWidth'),\n      getMaxHeight: getSize('maxHeight'),\n      setMaxWidth: setSize('maxWidth'),\n      setMaxHeight: setSize('maxHeight')\n    };\n\n    var getVideoScriptMatch = function (prefixes, src) {\n      if (prefixes) {\n        for (var i = 0; i < prefixes.length; i++) {\n          if (src.indexOf(prefixes[i].filter) !== -1) {\n            return prefixes[i];\n          }\n        }\n      }\n    };\n\n    var DOM = global$3.DOM;\n    var getEphoxEmbedIri = function (elm) {\n      return DOM.getAttrib(elm, 'data-ephox-embed-iri');\n    };\n    var isEphoxEmbed = function (html) {\n      var fragment = DOM.createFragment(html);\n      return getEphoxEmbedIri(fragment.firstChild) !== '';\n    };\n    var htmlToDataSax = function (prefixes, html) {\n      var data = {};\n      global$2({\n        validate: false,\n        allow_conditional_comments: true,\n        start: function (name, attrs) {\n          if (!data.source1 && name === 'param') {\n            data.source1 = attrs.map.movie;\n          }\n          if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio') {\n            if (!data.type) {\n              data.type = name;\n            }\n            data = global$1.extend(attrs.map, data);\n          }\n          if (name === 'script') {\n            var videoScript = getVideoScriptMatch(prefixes, attrs.map.src);\n            if (!videoScript) {\n              return;\n            }\n            data = {\n              type: 'script',\n              source1: attrs.map.src,\n              width: String(videoScript.width),\n              height: String(videoScript.height)\n            };\n          }\n          if (name === 'source') {\n            if (!data.source1) {\n              data.source1 = attrs.map.src;\n            } else if (!data.source2) {\n              data.source2 = attrs.map.src;\n            }\n          }\n          if (name === 'img' && !data.poster) {\n            data.poster = attrs.map.src;\n          }\n        }\n      }).parse(html);\n      data.source1 = data.source1 || data.src || data.data;\n      data.source2 = data.source2 || '';\n      data.poster = data.poster || '';\n      return data;\n    };\n    var ephoxEmbedHtmlToData = function (html) {\n      var fragment = DOM.createFragment(html);\n      var div = fragment.firstChild;\n      return {\n        type: 'ephox-embed-iri',\n        source1: getEphoxEmbedIri(div),\n        source2: '',\n        poster: '',\n        width: Size.getMaxWidth(div),\n        height: Size.getMaxHeight(div)\n      };\n    };\n    var htmlToData = function (prefixes, html) {\n      return isEphoxEmbed(html) ? ephoxEmbedHtmlToData(html) : htmlToDataSax(prefixes, html);\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var guess = function (url) {\n      var mimes = {\n        mp3: 'audio/mpeg',\n        m4a: 'audio/x-m4a',\n        wav: 'audio/wav',\n        mp4: 'video/mp4',\n        webm: 'video/webm',\n        ogg: 'video/ogg',\n        swf: 'application/x-shockwave-flash'\n      };\n      var fileEnd = url.toLowerCase().split('.').pop();\n      var mime = mimes[fileEnd];\n      return mime ? mime : '';\n    };\n    var Mime = { guess: guess };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.html.Writer');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var DOM$1 = global$3.DOM;\n    var setAttributes = function (attrs, updatedAttrs) {\n      var name;\n      var i;\n      var value;\n      var attr;\n      for (name in updatedAttrs) {\n        value = '' + updatedAttrs[name];\n        if (attrs.map[name]) {\n          i = attrs.length;\n          while (i--) {\n            attr = attrs[i];\n            if (attr.name === name) {\n              if (value) {\n                attrs.map[name] = value;\n                attr.value = value;\n              } else {\n                delete attrs.map[name];\n                attrs.splice(i, 1);\n              }\n            }\n          }\n        } else if (value) {\n          attrs.push({\n            name: name,\n            value: value\n          });\n          attrs.map[name] = value;\n        }\n      }\n    };\n    var normalizeHtml = function (html) {\n      var writer = global$5();\n      var parser = global$2(writer);\n      parser.parse(html);\n      return writer.getContent();\n    };\n    var updateHtmlSax = function (html, data, updateAll) {\n      var writer = global$5();\n      var sourceCount = 0;\n      var hasImage;\n      global$2({\n        validate: false,\n        allow_conditional_comments: true,\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          switch (name) {\n          case 'video':\n          case 'object':\n          case 'embed':\n          case 'img':\n          case 'iframe':\n            if (data.height !== undefined && data.width !== undefined) {\n              setAttributes(attrs, {\n                width: data.width,\n                height: data.height\n              });\n            }\n            break;\n          }\n          if (updateAll) {\n            switch (name) {\n            case 'video':\n              setAttributes(attrs, {\n                poster: data.poster,\n                src: ''\n              });\n              if (data.source2) {\n                setAttributes(attrs, { src: '' });\n              }\n              break;\n            case 'iframe':\n              setAttributes(attrs, { src: data.source1 });\n              break;\n            case 'source':\n              sourceCount++;\n              if (sourceCount <= 2) {\n                setAttributes(attrs, {\n                  src: data['source' + sourceCount],\n                  type: data['source' + sourceCount + 'mime']\n                });\n                if (!data['source' + sourceCount]) {\n                  return;\n                }\n              }\n              break;\n            case 'img':\n              if (!data.poster) {\n                return;\n              }\n              hasImage = true;\n              break;\n            }\n          }\n          writer.start(name, attrs, empty);\n        },\n        end: function (name) {\n          if (name === 'video' && updateAll) {\n            for (var index = 1; index <= 2; index++) {\n              if (data['source' + index]) {\n                var attrs = [];\n                attrs.map = {};\n                if (sourceCount < index) {\n                  setAttributes(attrs, {\n                    src: data['source' + index],\n                    type: data['source' + index + 'mime']\n                  });\n                  writer.start('source', attrs, true);\n                }\n              }\n            }\n          }\n          if (data.poster && name === 'object' && updateAll && !hasImage) {\n            var imgAttrs = [];\n            imgAttrs.map = {};\n            setAttributes(imgAttrs, {\n              src: data.poster,\n              width: data.width,\n              height: data.height\n            });\n            writer.start('img', imgAttrs, true);\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var isEphoxEmbed$1 = function (html) {\n      var fragment = DOM$1.createFragment(html);\n      return DOM$1.getAttrib(fragment.firstChild, 'data-ephox-embed-iri') !== '';\n    };\n    var updateEphoxEmbed = function (html, data) {\n      var fragment = DOM$1.createFragment(html);\n      var div = fragment.firstChild;\n      Size.setMaxWidth(div, data.width);\n      Size.setMaxHeight(div, data.height);\n      return normalizeHtml(div.outerHTML);\n    };\n    var updateHtml = function (html, data, updateAll) {\n      return isEphoxEmbed$1(html) ? updateEphoxEmbed(html, data) : updateHtmlSax(html, data, updateAll);\n    };\n    var UpdateHtml = { updateHtml: updateHtml };\n\n    var urlPatterns = [\n      {\n        regex: /youtu\\.be\\/([\\w\\-_\\?&=.]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube\\.com(.+)v=([^&]+)(&([a-z0-9&=\\-_]+))?/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$2?$4',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube.com\\/embed\\/([a-z0-9\\?&=\\-_]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/(.*)\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$2?title=0&amp;byline=0',\n        allowFullscreen: true\n      },\n      {\n        regex: /maps\\.google\\.([a-z]{2,3})\\/maps\\/(.+)msid=(.+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//maps.google.com/maps/ms?msid=$2&output=embed\"',\n        allowFullscreen: false\n      },\n      {\n        regex: /dailymotion\\.com\\/video\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /dai\\.ly\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      }\n    ];\n    var getUrl = function (pattern, url) {\n      var match = pattern.regex.exec(url);\n      var newUrl = pattern.url;\n      var _loop_1 = function (i) {\n        newUrl = newUrl.replace('$' + i, function () {\n          return match[i] ? match[i] : '';\n        });\n      };\n      for (var i = 0; i < match.length; i++) {\n        _loop_1(i);\n      }\n      return newUrl.replace(/\\?$/, '');\n    };\n    var matchPattern = function (url) {\n      var pattern = urlPatterns.filter(function (pattern) {\n        return pattern.regex.test(url);\n      });\n      if (pattern.length > 0) {\n        return global$1.extend({}, pattern[0], { url: getUrl(pattern[0], url) });\n      } else {\n        return null;\n      }\n    };\n\n    var getIframeHtml = function (data) {\n      var allowFullscreen = data.allowFullscreen ? ' allowFullscreen=\"1\"' : '';\n      return '<iframe src=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\"' + allowFullscreen + '></iframe>';\n    };\n    var getFlashHtml = function (data) {\n      var html = '<object data=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" type=\"application/x-shockwave-flash\">';\n      if (data.poster) {\n        html += '<img src=\"' + data.poster + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" />';\n      }\n      html += '</object>';\n      return html;\n    };\n    var getAudioHtml = function (data, audioTemplateCallback) {\n      if (audioTemplateCallback) {\n        return audioTemplateCallback(data);\n      } else {\n        return '<audio controls=\"controls\" src=\"' + data.source1 + '\">' + (data.source2 ? '\\n<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</audio>';\n      }\n    };\n    var getVideoHtml = function (data, videoTemplateCallback) {\n      if (videoTemplateCallback) {\n        return videoTemplateCallback(data);\n      } else {\n        return '<video width=\"' + data.width + '\" height=\"' + data.height + '\"' + (data.poster ? ' poster=\"' + data.poster + '\"' : '') + ' controls=\"controls\">\\n' + '<source src=\"' + data.source1 + '\"' + (data.source1mime ? ' type=\"' + data.source1mime + '\"' : '') + ' />\\n' + (data.source2 ? '<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</video>';\n      }\n    };\n    var getScriptHtml = function (data) {\n      return '<script src=\"' + data.source1 + '\"></script>';\n    };\n    var dataToHtml = function (editor, dataIn) {\n      var data = global$1.extend({}, dataIn);\n      if (!data.source1) {\n        global$1.extend(data, htmlToData(Settings.getScripts(editor), data.embed));\n        if (!data.source1) {\n          return '';\n        }\n      }\n      if (!data.source2) {\n        data.source2 = '';\n      }\n      if (!data.poster) {\n        data.poster = '';\n      }\n      data.source1 = editor.convertURL(data.source1, 'source');\n      data.source2 = editor.convertURL(data.source2, 'source');\n      data.source1mime = Mime.guess(data.source1);\n      data.source2mime = Mime.guess(data.source2);\n      data.poster = editor.convertURL(data.poster, 'poster');\n      var pattern = matchPattern(data.source1);\n      if (pattern) {\n        data.source1 = pattern.url;\n        data.type = pattern.type;\n        data.allowFullscreen = pattern.allowFullscreen;\n        data.width = data.width || String(pattern.w);\n        data.height = data.height || String(pattern.h);\n      }\n      if (data.embed) {\n        return UpdateHtml.updateHtml(data.embed, data, true);\n      } else {\n        var videoScript = getVideoScriptMatch(Settings.getScripts(editor), data.source1);\n        if (videoScript) {\n          data.type = 'script';\n          data.width = String(videoScript.width);\n          data.height = String(videoScript.height);\n        }\n        var audioTemplateCallback = Settings.getAudioTemplateCallback(editor);\n        var videoTemplateCallback = Settings.getVideoTemplateCallback(editor);\n        data.width = data.width || '300';\n        data.height = data.height || '150';\n        global$1.each(data, function (value, key) {\n          data[key] = editor.dom.encode('' + value);\n        });\n        if (data.type === 'iframe') {\n          return getIframeHtml(data);\n        } else if (data.source1mime === 'application/x-shockwave-flash') {\n          return getFlashHtml(data);\n        } else if (data.source1mime.indexOf('audio') !== -1) {\n          return getAudioHtml(data, audioTemplateCallback);\n        } else if (data.type === 'script') {\n          return getScriptHtml(data);\n        } else {\n          return getVideoHtml(data, videoTemplateCallback);\n        }\n      }\n    };\n\n    var cache = {};\n    var embedPromise = function (data, dataToHtml, handler) {\n      return new global$4(function (res, rej) {\n        var wrappedResolve = function (response) {\n          if (response.html) {\n            cache[data.source1] = response;\n          }\n          return res({\n            url: data.source1,\n            html: response.html ? response.html : dataToHtml(data)\n          });\n        };\n        if (cache[data.source1]) {\n          wrappedResolve(cache[data.source1]);\n        } else {\n          handler({ url: data.source1 }, wrappedResolve, rej);\n        }\n      });\n    };\n    var defaultPromise = function (data, dataToHtml) {\n      return new global$4(function (res) {\n        res({\n          html: dataToHtml(data),\n          url: data.source1\n        });\n      });\n    };\n    var loadedData = function (editor) {\n      return function (data) {\n        return dataToHtml(editor, data);\n      };\n    };\n    var getEmbedHtml = function (editor, data) {\n      var embedHandler = Settings.getUrlResolver(editor);\n      return embedHandler ? embedPromise(data, loadedData(editor), embedHandler) : defaultPromise(data, loadedData(editor));\n    };\n    var isCached = function (url) {\n      return cache.hasOwnProperty(url);\n    };\n    var Service = {\n      getEmbedHtml: getEmbedHtml,\n      isCached: isCached\n    };\n\n    var unwrap = function (data) {\n      var unwrapped = merge(data, {\n        source1: data.source1.value,\n        source2: get(data, 'source2').bind(function (source2) {\n          return get(source2, 'value');\n        }).getOr(''),\n        poster: get(data, 'poster').bind(function (poster) {\n          return get(poster, 'value');\n        }).getOr('')\n      });\n      get(data, 'dimensions').each(function (dimensions) {\n        each([\n          'width',\n          'height'\n        ], function (prop) {\n          get(dimensions, prop).each(function (value) {\n            return unwrapped[prop] = value;\n          });\n        });\n      });\n      return unwrapped;\n    };\n    var wrap = function (data) {\n      var wrapped = merge(data, {\n        source1: { value: get(data, 'source1').getOr('') },\n        source2: { value: get(data, 'source2').getOr('') },\n        poster: { value: get(data, 'poster').getOr('') }\n      });\n      each([\n        'width',\n        'height'\n      ], function (prop) {\n        get(data, prop).each(function (value) {\n          var dimensions = wrapped.dimensions || {};\n          dimensions[prop] = value;\n          wrapped.dimensions = dimensions;\n        });\n      });\n      return wrapped;\n    };\n    var handleError = function (editor) {\n      return function (error) {\n        var errorMessage = error && error.msg ? 'Media embed handler error: ' + error.msg : 'Media embed handler threw unknown error.';\n        editor.notificationManager.open({\n          type: 'error',\n          text: errorMessage\n        });\n      };\n    };\n    var snippetToData = function (editor, embedSnippet) {\n      return htmlToData(Settings.getScripts(editor), embedSnippet);\n    };\n    var isMediaElement = function (element) {\n      return element.getAttribute('data-mce-object') || element.getAttribute('data-ephox-embed-iri');\n    };\n    var getEditorData = function (editor) {\n      var element = editor.selection.getNode();\n      var snippet = isMediaElement(element) ? editor.serializer.serialize(element, { selection: true }) : '';\n      return merge({ embed: snippet }, htmlToData(Settings.getScripts(editor), snippet));\n    };\n    var addEmbedHtml = function (api, editor) {\n      return function (response) {\n        if (isString(response.url) && response.url.trim().length > 0) {\n          var html = response.html;\n          var snippetData = snippetToData(editor, html);\n          var nuData = __assign(__assign({}, snippetData), {\n            source1: response.url,\n            embed: html\n          });\n          api.setData(wrap(nuData));\n        }\n      };\n    };\n    var selectPlaceholder = function (editor, beforeObjects) {\n      var afterObjects = editor.dom.select('img[data-mce-object]');\n      for (var i = 0; i < beforeObjects.length; i++) {\n        for (var y = afterObjects.length - 1; y >= 0; y--) {\n          if (beforeObjects[i] === afterObjects[y]) {\n            afterObjects.splice(y, 1);\n          }\n        }\n      }\n      editor.selection.select(afterObjects[0]);\n    };\n    var handleInsert = function (editor, html) {\n      var beforeObjects = editor.dom.select('img[data-mce-object]');\n      editor.insertContent(html);\n      selectPlaceholder(editor, beforeObjects);\n      editor.nodeChanged();\n    };\n    var submitForm = function (prevData, newData, editor) {\n      newData.embed = UpdateHtml.updateHtml(newData.embed, newData);\n      if (newData.embed && (prevData.source1 === newData.source1 || Service.isCached(newData.source1))) {\n        handleInsert(editor, newData.embed);\n      } else {\n        Service.getEmbedHtml(editor, newData).then(function (response) {\n          handleInsert(editor, response.html);\n        }).catch(handleError(editor));\n      }\n    };\n    var showDialog = function (editor) {\n      var editorData = getEditorData(editor);\n      var currentData = Cell(editorData);\n      var initialData = wrap(editorData);\n      var getSourceData = function (api) {\n        return unwrap(api.getData());\n      };\n      var handleSource1 = function (prevData, api) {\n        var serviceData = getSourceData(api);\n        if (prevData.source1 !== serviceData.source1) {\n          addEmbedHtml(win, editor)({\n            url: serviceData.source1,\n            html: ''\n          });\n          Service.getEmbedHtml(editor, serviceData).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n        }\n      };\n      var handleEmbed = function (api) {\n        var data = unwrap(api.getData());\n        var dataFromEmbed = snippetToData(editor, data.embed);\n        api.setData(wrap(dataFromEmbed));\n      };\n      var handleUpdate = function (api) {\n        var data = getSourceData(api);\n        var embed = dataToHtml(editor, data);\n        api.setData(wrap(__assign(__assign({}, data), { embed: embed })));\n      };\n      var mediaInput = [{\n          name: 'source1',\n          type: 'urlinput',\n          filetype: 'media',\n          label: 'Source'\n        }];\n      var sizeInput = !Settings.hasDimensions(editor) ? [] : [{\n          type: 'sizeinput',\n          name: 'dimensions',\n          label: 'Constrain proportions',\n          constrain: true\n        }];\n      var generalTab = {\n        title: 'General',\n        name: 'general',\n        items: flatten([\n          mediaInput,\n          sizeInput\n        ])\n      };\n      var embedTextarea = {\n        type: 'textarea',\n        name: 'embed',\n        label: 'Paste your embed code below:'\n      };\n      var embedTab = {\n        title: 'Embed',\n        items: [embedTextarea]\n      };\n      var advancedFormItems = [];\n      if (Settings.hasAltSource(editor)) {\n        advancedFormItems.push({\n          name: 'source2',\n          type: 'urlinput',\n          filetype: 'media',\n          label: 'Alternative source URL'\n        });\n      }\n      if (Settings.hasPoster(editor)) {\n        advancedFormItems.push({\n          name: 'poster',\n          type: 'urlinput',\n          filetype: 'image',\n          label: 'Media poster (Image URL)'\n        });\n      }\n      var advancedTab = {\n        title: 'Advanced',\n        name: 'advanced',\n        items: advancedFormItems\n      };\n      var tabs = [\n        generalTab,\n        embedTab\n      ];\n      if (advancedFormItems.length > 0) {\n        tabs.push(advancedTab);\n      }\n      var body = {\n        type: 'tabpanel',\n        tabs: tabs\n      };\n      var win = editor.windowManager.open({\n        title: 'Insert/Edit Media',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var serviceData = getSourceData(api);\n          submitForm(currentData.get(), serviceData, editor);\n          api.close();\n        },\n        onChange: function (api, detail) {\n          switch (detail.name) {\n          case 'source1':\n            handleSource1(currentData.get(), api);\n            break;\n          case 'embed':\n            handleEmbed(api);\n            break;\n          case 'dimensions':\n          case 'poster':\n            handleUpdate(api);\n            break;\n          default:\n            break;\n          }\n          currentData.set(getSourceData(api));\n        },\n        initialData: initialData\n      });\n    };\n    var Dialog = { showDialog: showDialog };\n\n    var get$1 = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      return { showDialog: showDialog };\n    };\n    var Api = { get: get$1 };\n\n    var register = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      editor.addCommand('mceMedia', showDialog);\n    };\n    var Commands = { register: register };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var sanitize = function (editor, html) {\n      if (Settings.shouldFilterHtml(editor) === false) {\n        return html;\n      }\n      var writer = global$5();\n      var blocked;\n      global$2({\n        validate: false,\n        allow_conditional_comments: false,\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          blocked = true;\n          if (name === 'script' || name === 'noscript') {\n            return;\n          }\n          for (var i = 0; i < attrs.length; i++) {\n            if (attrs[i].name.indexOf('on') === 0) {\n              return;\n            }\n            if (attrs[i].name === 'style') {\n              attrs[i].value = editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value), name);\n            }\n          }\n          writer.start(name, attrs, empty);\n          blocked = false;\n        },\n        end: function (name) {\n          if (blocked) {\n            return;\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var Sanitize = { sanitize: sanitize };\n\n    var createPlaceholderNode = function (editor, node) {\n      var placeHolder;\n      var name = node.name;\n      placeHolder = new global$7('img', 1);\n      placeHolder.shortEnded = true;\n      retainAttributesAndInnerHtml(editor, node, placeHolder);\n      placeHolder.attr({\n        'width': node.attr('width') || '300',\n        'height': node.attr('height') || (name === 'audio' ? '30' : '150'),\n        'style': node.attr('style'),\n        'src': global$8.transparentSrc,\n        'data-mce-object': name,\n        'class': 'mce-object mce-object-' + name\n      });\n      return placeHolder;\n    };\n    var createPreviewIframeNode = function (editor, node) {\n      var previewWrapper;\n      var previewNode;\n      var shimNode;\n      var name = node.name;\n      previewWrapper = new global$7('span', 1);\n      previewWrapper.attr({\n        'contentEditable': 'false',\n        'style': node.attr('style'),\n        'data-mce-object': name,\n        'class': 'mce-preview-object mce-object-' + name\n      });\n      retainAttributesAndInnerHtml(editor, node, previewWrapper);\n      previewNode = new global$7(name, 1);\n      previewNode.attr({\n        src: node.attr('src'),\n        allowfullscreen: node.attr('allowfullscreen'),\n        style: node.attr('style'),\n        class: node.attr('class'),\n        width: node.attr('width'),\n        height: node.attr('height'),\n        frameborder: '0'\n      });\n      shimNode = new global$7('span', 1);\n      shimNode.attr('class', 'mce-shim');\n      previewWrapper.append(previewNode);\n      previewWrapper.append(shimNode);\n      return previewWrapper;\n    };\n    var retainAttributesAndInnerHtml = function (editor, sourceNode, targetNode) {\n      var attrName;\n      var attrValue;\n      var attribs;\n      var ai;\n      var innerHtml;\n      attribs = sourceNode.attributes;\n      ai = attribs.length;\n      while (ai--) {\n        attrName = attribs[ai].name;\n        attrValue = attribs[ai].value;\n        if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style') {\n          if (attrName === 'data' || attrName === 'src') {\n            attrValue = editor.convertURL(attrValue, attrName);\n          }\n          targetNode.attr('data-mce-p-' + attrName, attrValue);\n        }\n      }\n      innerHtml = sourceNode.firstChild && sourceNode.firstChild.value;\n      if (innerHtml) {\n        targetNode.attr('data-mce-html', escape(Sanitize.sanitize(editor, innerHtml)));\n        targetNode.firstChild = null;\n      }\n    };\n    var isPageEmbedWrapper = function (node) {\n      var nodeClass = node.attr('class');\n      return nodeClass && /\\btiny-pageembed\\b/.test(nodeClass);\n    };\n    var isWithinEmbedWrapper = function (node) {\n      while (node = node.parent) {\n        if (node.attr('data-ephox-embed-iri') || isPageEmbedWrapper(node)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var placeHolderConverter = function (editor) {\n      return function (nodes) {\n        var i = nodes.length;\n        var node;\n        var videoScript;\n        while (i--) {\n          node = nodes[i];\n          if (!node.parent) {\n            continue;\n          }\n          if (node.parent.attr('data-mce-object')) {\n            continue;\n          }\n          if (node.name === 'script') {\n            videoScript = getVideoScriptMatch(Settings.getScripts(editor), node.attr('src'));\n            if (!videoScript) {\n              continue;\n            }\n          }\n          if (videoScript) {\n            if (videoScript.width) {\n              node.attr('width', videoScript.width.toString());\n            }\n            if (videoScript.height) {\n              node.attr('height', videoScript.height.toString());\n            }\n          }\n          if (node.name === 'iframe' && Settings.hasLiveEmbeds(editor) && global$8.ceFalse) {\n            if (!isWithinEmbedWrapper(node)) {\n              node.replace(createPreviewIframeNode(editor, node));\n            }\n          } else {\n            if (!isWithinEmbedWrapper(node)) {\n              node.replace(createPlaceholderNode(editor, node));\n            }\n          }\n        }\n      };\n    };\n    var Nodes = {\n      createPreviewIframeNode: createPreviewIframeNode,\n      createPlaceholderNode: createPlaceholderNode,\n      placeHolderConverter: placeHolderConverter\n    };\n\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        var specialElements = editor.schema.getSpecialElements();\n        global$1.each('video audio iframe object'.split(' '), function (name) {\n          specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n        });\n        var boolAttrs = editor.schema.getBoolAttrs();\n        global$1.each('webkitallowfullscreen mozallowfullscreen allowfullscreen'.split(' '), function (name) {\n          boolAttrs[name] = {};\n        });\n        editor.parser.addNodeFilter('iframe,video,audio,object,embed,script', Nodes.placeHolderConverter(editor));\n        editor.serializer.addAttributeFilter('data-mce-object', function (nodes, name) {\n          var i = nodes.length;\n          var node;\n          var realElm;\n          var ai;\n          var attribs;\n          var innerHtml;\n          var innerNode;\n          var realElmName;\n          var className;\n          while (i--) {\n            node = nodes[i];\n            if (!node.parent) {\n              continue;\n            }\n            realElmName = node.attr(name);\n            realElm = new global$7(realElmName, 1);\n            if (realElmName !== 'audio' && realElmName !== 'script') {\n              className = node.attr('class');\n              if (className && className.indexOf('mce-preview-object') !== -1) {\n                realElm.attr({\n                  width: node.firstChild.attr('width'),\n                  height: node.firstChild.attr('height')\n                });\n              } else {\n                realElm.attr({\n                  width: node.attr('width'),\n                  height: node.attr('height')\n                });\n              }\n            }\n            realElm.attr({ style: node.attr('style') });\n            attribs = node.attributes;\n            ai = attribs.length;\n            while (ai--) {\n              var attrName = attribs[ai].name;\n              if (attrName.indexOf('data-mce-p-') === 0) {\n                realElm.attr(attrName.substr(11), attribs[ai].value);\n              }\n            }\n            if (realElmName === 'script') {\n              realElm.attr('type', 'text/javascript');\n            }\n            innerHtml = node.attr('data-mce-html');\n            if (innerHtml) {\n              innerNode = new global$7('#text', 3);\n              innerNode.raw = true;\n              innerNode.value = Sanitize.sanitize(editor, unescape(innerHtml));\n              realElm.append(innerNode);\n            }\n            node.replace(realElm);\n          }\n        });\n      });\n      editor.on('SetContent', function () {\n        editor.$('span.mce-preview-object').each(function (index, elm) {\n          var $elm = editor.$(elm);\n          if ($elm.find('span.mce-shim').length === 0) {\n            $elm.append('<span class=\"mce-shim\"></span>');\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var setup$1 = function (editor) {\n      editor.on('ResolveName', function (e) {\n        var name;\n        if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object'))) {\n          e.name = name;\n        }\n      });\n    };\n    var ResolveName = { setup: setup$1 };\n\n    var setup$2 = function (editor) {\n      editor.on('click keyup touchend', function () {\n        var selectedNode = editor.selection.getNode();\n        if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object')) {\n          if (editor.dom.getAttrib(selectedNode, 'data-mce-selected')) {\n            selectedNode.setAttribute('data-mce-selected', '2');\n          }\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        var objectType = e.target.getAttribute('data-mce-object');\n        if (objectType === 'audio' || objectType === 'script') {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var target = e.target;\n        var html;\n        if (target.getAttribute('data-mce-object')) {\n          html = target.getAttribute('data-mce-html');\n          if (html) {\n            html = unescape(html);\n            target.setAttribute('data-mce-html', escape(UpdateHtml.updateHtml(html, {\n              width: String(e.width),\n              height: String(e.height)\n            })));\n          }\n        }\n      });\n    };\n    var Selection = { setup: setup$2 };\n\n    var stateSelectorAdapter = function (editor, selector) {\n      return function (buttonApi) {\n        return editor.selection.selectorChangedWithUnbind(selector.join(','), buttonApi.setActive).unbind;\n      };\n    };\n    var register$1 = function (editor) {\n      editor.ui.registry.addToggleButton('media', {\n        tooltip: 'Insert/edit media',\n        icon: 'embed',\n        onAction: function () {\n          editor.execCommand('mceMedia');\n        },\n        onSetup: stateSelectorAdapter(editor, [\n          'img[data-mce-object]',\n          'span[data-mce-object]',\n          'div[data-ephox-embed-iri]'\n        ])\n      });\n      editor.ui.registry.addMenuItem('media', {\n        icon: 'embed',\n        text: 'Media...',\n        onAction: function () {\n          editor.execCommand('mceMedia');\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('media', function (editor) {\n        Commands.register(editor);\n        Buttons.register(editor);\n        ResolveName.setup(editor);\n        FilterContent.setup(editor);\n        Selection.setup(editor);\n        return Api.get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"media\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/media')\n//   ES2015:\n//     import 'tinymce/plugins/media'\nrequire('./plugin.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getNonEditableClass = function (editor) {\n      return editor.getParam('noneditable_noneditable_class', 'mceNonEditable');\n    };\n    var getEditableClass = function (editor) {\n      return editor.getParam('noneditable_editable_class', 'mceEditable');\n    };\n    var getNonEditableRegExps = function (editor) {\n      var nonEditableRegExps = editor.getParam('noneditable_regexp', []);\n      if (nonEditableRegExps && nonEditableRegExps.constructor === RegExp) {\n        return [nonEditableRegExps];\n      } else {\n        return nonEditableRegExps;\n      }\n    };\n    var Settings = {\n      getNonEditableClass: getNonEditableClass,\n      getEditableClass: getEditableClass,\n      getNonEditableRegExps: getNonEditableRegExps\n    };\n\n    var hasClass = function (checkClassName) {\n      return function (node) {\n        return (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n      };\n    };\n    var replaceMatchWithSpan = function (editor, content, cls) {\n      return function (match) {\n        var args = arguments, index = args[args.length - 2];\n        var prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          var findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            var tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    var convertRegExpsToNonEditable = function (editor, nonEditableRegExps, e) {\n      var i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, Settings.getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    var setup = function (editor) {\n      var editClass, nonEditClass;\n      var contentEditableAttrName = 'contenteditable';\n      editClass = ' ' + global$1.trim(Settings.getEditableClass(editor)) + ' ';\n      nonEditClass = ' ' + global$1.trim(Settings.getNonEditableClass(editor)) + ' ';\n      var hasEditClass = hasClass(editClass);\n      var hasNonEditClass = hasClass(nonEditClass);\n      var nonEditableRegExps = Settings.getNonEditableRegExps(editor);\n      editor.on('PreInit', function () {\n        if (nonEditableRegExps.length > 0) {\n          editor.on('BeforeSetContent', function (e) {\n            convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n          });\n        }\n        editor.parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (hasEditClass(node)) {\n              node.attr(contentEditableAttrName, 'true');\n            } else if (hasNonEditClass(node)) {\n              node.attr(contentEditableAttrName, 'false');\n            }\n          }\n        });\n        editor.serializer.addAttributeFilter(contentEditableAttrName, function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (!hasEditClass(node) && !hasNonEditClass(node)) {\n              continue;\n            }\n            if (nonEditableRegExps.length > 0 && node.attr('data-mce-content')) {\n              node.name = '#text';\n              node.type = 3;\n              node.raw = true;\n              node.value = node.attr('data-mce-content');\n            } else {\n              node.attr(contentEditableAttrName, null);\n            }\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    function Plugin () {\n      global.add('noneditable', function (editor) {\n        FilterContent.setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"image\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/image')\n//   ES2015:\n//     import 'tinymce/plugins/image'\nrequire('./plugin.js');","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins) && global$1.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n    var Api = { get: get };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n    var Events = {\n      firePastePreProcess: firePastePreProcess,\n      firePastePostProcess: firePastePostProcess,\n      firePastePlainTextToggle: firePastePlainTextToggle,\n      firePaste: firePaste\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        Events.firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        Events.firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n    var Actions = { togglePlainTextPaste: togglePlainTextPaste };\n\n    var register = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        Actions.togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n    var traverse = function (array, fn) {\n      return par$1(map(array, fn));\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var InternalHtml = {\n      mark: mark,\n      unmark: unmark,\n      isMarked: isMarked,\n      internalHtmlMime: function () {\n        return internalMimeType;\n      }\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n    var Newlines = {\n      isPlainText: isPlainText,\n      convert: convert,\n      toBRs: toBRs,\n      toBlockElements: toBlockElements\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var Settings = {\n      shouldBlockDrop: shouldBlockDrop,\n      shouldPasteDataImages: shouldPasteDataImages,\n      shouldFilterDrop: shouldFilterDrop,\n      getPreProcess: getPreProcess,\n      getPostProcess: getPostProcess,\n      getWebkitStyles: getWebkitStyles,\n      shouldRemoveWebKitStyles: shouldRemoveWebKitStyles,\n      shouldMergeFormats: shouldMergeFormats,\n      isSmartPasteEnabled: isSmartPasteEnabled,\n      isPasteAsTextEnabled: isPasteAsTextEnabled,\n      getRetainStyleProps: getRetainStyleProps,\n      getWordValidElements: getWordValidElements,\n      shouldConvertWordFakeLists: shouldConvertWordFakeLists,\n      shouldUseDefaultFilters: shouldUseDefaultFilters\n    };\n\n    function filter$1(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$a();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return '\\xA0';\n      }\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n    var Utils = {\n      filter: filter$1,\n      innerText: innerText,\n      trimHtml: trimHtml,\n      createIdGenerator: createIdGenerator,\n      isMsEdge: isMsEdge\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found, patterns;\n      patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$9(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (Settings.getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$9('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$9('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var retainStyleProperties, validStyles;\n      retainStyleProperties = Settings.getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = Utils.filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          '\\xA0'\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join('\\xA0') : '';\n          }\n        ]\n      ]);\n      var validElements = Settings.getWordValidElements(editor);\n      var schema = global$a({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (Settings.shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$8({ validate: editor.settings.validate }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return Settings.shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n    var WordFilter = {\n      preProcess: preProcess,\n      isWordContent: isWordContent\n    };\n\n    var preProcess$1 = function (editor, html) {\n      var parser = global$7({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$4.each(nodes, function (node) {\n          return node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$8({ validate: editor.settings.validate }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = Events.firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = Events.firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess$1(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = WordFilter.isWordContent(html);\n      var content = isWordHtml ? WordFilter.preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n    var ProcessFilters = { process: process };\n\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(html, {\n        merge: Settings.shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html) {\n      if (Settings.isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n    var SmartPaste = {\n      isImageUrl: isImageUrl,\n      isAbsoluteUrl: isAbsoluteUrl,\n      insertContent: insertContent\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (text) {\n      var result = foldl(text, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === text.length - 1 || isNewline(text, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : InternalHtml.isMarked(html);\n      var args = ProcessFilters.process(editor, InternalHtml.unmark(html), internal);\n      if (args.cancelled === false) {\n        SmartPaste.insertContent(editor, args.content);\n      }\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(encodedText);\n      var html = Newlines.convert(normalizedText, editor.settings.forced_root_block, editor.settings.forced_root_block_attrs);\n      pasteHtml$1(editor, html, false);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return Utils.isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var getBase64FromUri = function (uri) {\n      var idx;\n      idx = uri.indexOf(',');\n      if (idx !== -1) {\n        return uri.substr(idx + 1);\n      }\n      return null;\n    };\n    var isValidDataUriImage = function (settings, imgElm) {\n      return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = Utils.createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var base64 = getBase64FromUri(imageItem.uri);\n      var id = uniqueId();\n      var name = editor.settings.images_reuse_filename && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor.settings, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0, existingBlobInfo = void 0;\n        existingBlobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.base64() === base64;\n        });\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return traverse(items, function (item) {\n        return Future.nu(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      });\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (editor.settings.paste_data_images && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).get(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$2.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$2.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            Events.firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content, isPlainTextHtml;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : InternalHtml.isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = Utils.trimHtml(content);\n        pasteBin.remove();\n        isPlainTextHtml = internal === false && Newlines.isPlainText(content);\n        if (!content.length || isPlainTextHtml) {\n          plainTextMode = true;\n        }\n        if (plainTextMode) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = Utils.innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, InternalHtml.internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$2.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = InternalHtml.isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$3.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$2.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!editor.settings.paste_data_images && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!editor.settings.allow_html_data_urls && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$2.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      var pasteBinElm;\n      lastRngCell.set(editor.selection.getRng());\n      pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$2.ie || global$2.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var pasteBinElm, pasteBinClones, i, dirtyWrappers, cleanWrapper;\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (i = dirtyWrappers.length - 1; i >= 0; i--) {\n        cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var noop$1 = function () {\n    };\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$2.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && Utils.isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(InternalHtml.internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = InternalHtml.mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$3.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            if (global$2.browser.isChrome()) {\n              var rng_1 = editor.selection.getRng();\n              global$3.setEditorTimeout(editor, function () {\n                editor.selection.setRng(rng_1);\n                editor.execCommand('Delete');\n              }, 0);\n            } else {\n              editor.execCommand('Delete');\n            }\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop$1);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n    var CutCopy = { register: register$1 };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (Settings.shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!Settings.shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var dropContent, rng;\n        rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, InternalHtml.internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && Settings.shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$3.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = Utils.trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (Settings.shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n    var DragDrop = { setup: setup };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = Settings.getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = Settings.getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n    var PrePostProcess = { setup: setup$1 };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!WordFilter.isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = Utils.filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = Utils.filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = Settings.getWebkitStyles(editor);\n      var webKitStyles;\n      if (Settings.shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$2.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$2.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n    var Quirks = { setup: setup$2 };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register$2 = function (editor, clipboard) {\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n    var Buttons = { register: register$2 };\n\n    function Plugin () {\n      global$1.add('paste', function (editor) {\n        if (DetectProPlugin.hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(Settings.isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          var quirks = Quirks.setup(editor);\n          Buttons.register(editor, clipboard);\n          Commands.register(editor, clipboard);\n          PrePostProcess.setup(editor);\n          CutCopy.register(editor);\n          DragDrop.setup(editor, clipboard, draggingInternallyState);\n          return Api.get(clipboard, quirks);\n        }\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"lists\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/lists')\n//   ES2015:\n//     import 'tinymce/plugins/lists'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) {\n        throw new Error('You must specify at least one required or optional field.');\n      }\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        var unsupported = filter(keys$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) {\n          unsuppMessage(unsupported);\n        }\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n    var body = cached(function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    });\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (has$1(element, 'style') && trim(get$1(element, 'style')) === '') {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom();\n      var targetDom = target.dom();\n      if (isSupported(sourceDom) && isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = Cell(PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch));\n    var detect$3 = function () {\n      return platform.get();\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = detect$3().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var dimension = Immutable('width', 'height');\n    var dimensions = Immutable('width', 'height');\n    var grid = Immutable('rows', 'columns');\n    var address = Immutable('row', 'column');\n    var coords = Immutable('x', 'y');\n    var detail = Immutable('element', 'rowspan', 'colspan');\n    var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n    var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n    var rowdata = Immutable('element', 'cells', 'section');\n    var elementnew = Immutable('element', 'isNew');\n    var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n    var rowcells = Immutable('cells', 'section');\n    var rowdetails = Immutable('details', 'section');\n    var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(Element.fromDom(node));\n      };\n      var result = find(scope.dom().childNodes, pred);\n      return result.map(Element.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, constant(true));\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        return is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n      });\n    };\n    var LayerSelector = {\n      firstLayer: firstLayer,\n      filterFirstLayer: filterFirstLayer\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Option.none();\n      }\n      if (contains(tags, name(element))) {\n        return Option.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'th,td');\n    };\n    var notCell = function (element, isRoot) {\n      return lookup([\n        'caption',\n        'tr',\n        'tbody',\n        'tfoot',\n        'thead'\n      ], element, isRoot);\n    };\n    var neighbours = function (selector, element) {\n      return parent(element).map(function (parent) {\n        return children$2(parent, selector);\n      });\n    };\n    var neighbourCells = curry(neighbours, 'th,td');\n    var neighbourRows = curry(neighbours, 'tr');\n    var firstCell = function (ancestor) {\n      return descendant$1(ancestor, 'th,td');\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var row = function (element, isRoot) {\n      return lookup(['tr'], element, isRoot);\n    };\n    var rows = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'tr');\n    };\n    var attr = function (element, property) {\n      return parseInt(get$1(element, property), 10);\n    };\n    var grid$1 = function (element, rowProp, colProp) {\n      var rowsCount = attr(element, rowProp);\n      var cols = attr(element, colProp);\n      return grid(rowsCount, cols);\n    };\n    var TableLookup = {\n      cell: cell,\n      firstCell: firstCell,\n      cells: cells,\n      neighbourCells: neighbourCells,\n      table: table,\n      row: row,\n      rows: rows,\n      notCell: notCell,\n      neighbourRows: neighbourRows,\n      attr: attr,\n      grid: grid$1\n    };\n\n    var fromTable = function (table) {\n      var rows = TableLookup.rows(table);\n      return map(rows, function (row) {\n        var element = row;\n        var parent$1 = parent(element);\n        var parentSection = parent$1.map(function (p) {\n          var parentName = name(p);\n          return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n        }).getOr('tbody');\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has$1(cell, 'rowspan') ? parseInt(get$1(cell, 'rowspan'), 10) : 1;\n          var colspan = has$1(cell, 'colspan') ? parseInt(get$1(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(element, cells, parentSection);\n      });\n    };\n    var fromPastedRows = function (rows, example) {\n      return map(rows, function (row) {\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has$1(cell, 'rowspan') ? parseInt(get$1(cell, 'rowspan'), 10) : 1;\n          var colspan = has$1(cell, 'colspan') ? parseInt(get$1(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(row, cells, example.section());\n      });\n    };\n    var DetailsList = {\n      fromTable: fromTable,\n      fromPastedRows: fromPastedRows\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access()[key(row, column)];\n      return raw !== undefined ? Option.some(raw) : Option.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element());\n      });\n      return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all(), function (r) {\n        return r.cells();\n      });\n      return filter(all, predicate);\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var maxRows = list.length;\n      var maxColumns = 0;\n      each(list, function (details, r) {\n        var currentRow = [];\n        each(details.cells(), function (detail) {\n          var start = 0;\n          while (access[key(r, start)] !== undefined) {\n            start++;\n          }\n          var current = extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n          for (var i = 0; i < detail.colspan(); i++) {\n            for (var j = 0; j < detail.rowspan(); j++) {\n              var cr = r + j;\n              var cc = start + i;\n              var newpos = key(cr, cc);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, cc + 1);\n            }\n          }\n          currentRow.push(current);\n        });\n        cells.push(rowdata(details.element(), currentRow, details.section()));\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: constant(grid$1),\n        access: constant(access),\n        all: constant(cells)\n      };\n    };\n    var justCells = function (warehouse) {\n      var rows = map(warehouse.all(), function (w) {\n        return w.cells();\n      });\n      return flatten(rows);\n    };\n    var Warehouse = {\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells\n    };\n\n    var statsStruct = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      each$1(house.access(), function (detail) {\n        if (isSelected(detail)) {\n          var startRow = detail.row();\n          var endRow = startRow + detail.rowspan() - 1;\n          var startCol = detail.column();\n          var endCol = startCol + detail.colspan() - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element();\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (table, stats) {\n      var emptyRows = filter(LayerSelector.firstLayer(table, 'tr'), function (row) {\n        return row.dom().childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n        each(LayerSelector.firstLayer(table, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(table, 'width');\n      remove(table, 'height');\n      remove$1(table, 'width');\n      remove$1(table, 'height');\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element(), selectedSelector);\n      };\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var stats = findSelectedStats(house, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = LayerSelector.filterFirstLayer(table, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, house, stats, isSelected);\n      clean(table, stats);\n      return table;\n    };\n    var CopySelected = { extract: extract };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      api.set(element, value);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var NBSP = '\\xA0';\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var createCell = function () {\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      return td;\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return Element.fromTag('tr', doc.dom());\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var newCell = function (prev) {\n        var docu = owner(prev.element());\n        var td = Element.fromTag(name(prev.element()), docu.dom());\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n        append(lastNode, Element.fromTag('br'));\n        copy(prev.element(), td);\n        remove$1(td, 'height');\n        if (prev.colspan() !== 1) {\n          remove$1(prev.element(), 'width');\n        }\n        mutate(prev.element(), td);\n        return td;\n      };\n      return {\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n    var TableFill = {\n      cellOperations: cellOperations,\n      paste: paste\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column();\n      var rightEdge = detail.column() + detail.colspan() - 1;\n      var topEdge = detail.row();\n      var bottomEdge = detail.row() + detail.rowspan() - 1;\n      return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && (topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow());\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Option.some(bounds) : Option.none();\n    };\n    var CellBounds = {\n      inSelection: inSelection,\n      isWithin: isWithin,\n      isRectangular: isRectangular\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return CellBounds.isRectangular(warehouse, bounds);\n      });\n    };\n    var CellGroup = {\n      getAnyBox: getAnyBox,\n      getBox: getBox\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq).bind(function (detail) {\n        var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n        var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element();\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return CellGroup.getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(CellBounds.inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element();\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element();\n      });\n    };\n    var CellFinder = {\n      moveBy: moveBy,\n      intercepts: intercepts,\n      parentCell: parentCell\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return TableLookup.table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return CellFinder.moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellFinder.intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq(table, firstTable) ? Option.some(first) : CellFinder.parentCell(warehouse, first);\n      var optLastCell = eq(table, lastTable) ? Option.some(last) : CellFinder.parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return CellFinder.intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellGroup.getBox(warehouse, first, last);\n    };\n    var getWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return Warehouse.generate(list);\n    };\n    var TablePositions = {\n      moveBy: moveBy$1,\n      intercepts: intercepts$1,\n      nestedIntercepts: nestedIntercepts,\n      getBox: getBox$1\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return Element.fromDom(element.dom().cloneNode(false));\n      };\n      var document = function (element) {\n        return element.dom().ownerDocument;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var comparePosition = function (element, other) {\n        return element.dom().compareDocumentPosition(other.dom());\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$2,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get$1,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: Element.fromTag,\n          clone: clone$1,\n          text: Element.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          getText: get$3,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag\n        }),\n        eq: eq,\n        is: is$1\n      };\n    }\n\n    var leftRight = Immutable('left', 'right');\n    var brokenPath = Immutable('first', 'second', 'splits');\n    var bisect = function (universe, parent, child) {\n      var children = universe.property().children(parent);\n      var index = findIndex(children, curry(universe.eq, child));\n      return index.map(function (ind) {\n        return {\n          before: constant(children.slice(0, ind)),\n          after: constant(children.slice(ind + 1))\n        };\n      });\n    };\n    var breakToRight = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var second = universe.create().clone(parent);\n        universe.insert().appendAll(second, parts.after());\n        universe.insert().after(parent, second);\n        return leftRight(parent, second);\n      });\n    };\n    var breakToLeft = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var prior = universe.create().clone(parent);\n        universe.insert().appendAll(prior, parts.before().concat([child]));\n        universe.insert().appendAll(parent, parts.after());\n        universe.insert().before(parent, prior);\n        return leftRight(prior, parent);\n      });\n    };\n    var breakPath = function (universe, item, isTop, breaker) {\n      var next = function (child, group, splits) {\n        var fallback = brokenPath(child, Option.none(), splits);\n        if (isTop(child)) {\n          return brokenPath(child, group, splits);\n        } else {\n          return universe.property().parent(child).bind(function (parent) {\n            return breaker(universe, parent, child).map(function (breakage) {\n              var extra = [{\n                  first: breakage.left,\n                  second: breakage.right\n                }];\n              var nextChild = isTop(parent) ? parent : breakage.left();\n              return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n            });\n          }).getOr(fallback);\n        }\n      };\n      return next(item, Option.none(), []);\n    };\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Option.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$1 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var unsafeSubset = function (universe, common, ps1, ps2) {\n      var children = universe.property().children(common);\n      if (universe.eq(common, ps1[0])) {\n        return Option.some([ps1[0]]);\n      }\n      if (universe.eq(common, ps2[0])) {\n        return Option.some([ps2[0]]);\n      }\n      var finder = function (ps) {\n        var topDown = reverse(ps);\n        var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n        var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n        return findIndex(children, eq$1(universe, item));\n      };\n      var startIndex = finder(ps1);\n      var endIndex = finder(ps2);\n      return startIndex.bind(function (sIndex) {\n        return endIndex.map(function (eIndex) {\n          var first = Math.min(sIndex, eIndex);\n          var last = Math.max(sIndex, eIndex);\n          return children.slice(first, last + 1);\n        });\n      });\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$1(universe, x));\n      });\n      return {\n        firstpath: constant(pruned1),\n        secondpath: constant(pruned2),\n        shared: constant(shared)\n      };\n    };\n    var subset = function (universe, start, end) {\n      var ancs = ancestors$2(universe, start, end);\n      return ancs.shared().bind(function (shared) {\n        return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n      });\n    };\n    var SubsetFn = {\n      subset: subset,\n      ancestors: ancestors$2\n    };\n\n    var sharedOne = oneAll;\n    var subset$1 = SubsetFn.subset;\n    var ancestors$3 = SubsetFn.ancestors;\n    var breakToLeft$1 = breakToLeft;\n    var breakToRight$1 = breakToRight;\n    var breakPath$1 = breakPath;\n    var Parent = {\n      sharedOne: sharedOne,\n      subset: subset$1,\n      ancestors: ancestors$3,\n      breakToLeft: breakToLeft$1,\n      breakToRight: breakToRight$1,\n      breakPath: breakPath$1\n    };\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return Parent.sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var subset$2 = function (start, finish) {\n      return Parent.subset(universe, start, finish);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return Parent.ancestors(universe, start, finish, isRoot);\n    };\n    var breakToLeft$2 = function (parent, child) {\n      return Parent.breakToLeft(universe, parent, child);\n    };\n    var breakToRight$2 = function (parent, child) {\n      return Parent.breakToRight(universe, parent, child);\n    };\n    var breakPath$2 = function (child, isTop, breaker) {\n      return Parent.breakPath(universe, child, isTop, function (u, p, c) {\n        return breaker(p, c);\n      });\n    };\n    var DomParent = {\n      sharedOne: sharedOne$1,\n      subset: subset$2,\n      ancestors: ancestors$4,\n      breakToLeft: breakToLeft$2,\n      breakToRight: breakToRight$2,\n      breakPath: breakPath$2\n    };\n\n    var create = MixedBag([\n      'boxes',\n      'start',\n      'finish'\n    ], []);\n    var Identified = { create: create };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq(element, rootTable);\n        };\n      };\n      if (eq(start, finish)) {\n        return Option.some(Identified.create({\n          boxes: Option.some([start]),\n          start: start,\n          finish: finish\n        }));\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq(startTable, finishTable)) {\n              return Option.some(Identified.create({\n                boxes: TablePositions.intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              }));\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              }));\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              }));\n            } else {\n              return DomParent.ancestors(start, finish).shared().bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Option.some(Identified.create({\n                    boxes: TablePositions.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  }));\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Option.some(sels) : Option.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return DomParent.sharedOne(lookupTable, [\n            first,\n            last\n          ]).map(function (tbl) {\n            return {\n              first: constant(first),\n              last: constant(last),\n              table: constant(tbl)\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes().map(function (boxes) {\n              return {\n                boxes: constant(boxes),\n                start: constant(identified.start()),\n                finish: constant(identified.finish())\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return TablePositions.moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n    var CellSelection = {\n      identify: identify,\n      retrieve: retrieve,\n      shiftSelection: shiftSelection,\n      getEdges: getEdges\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return CellSelection.retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return CellSelection.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq(container, ancestor);\n        };\n        var firstAncestor = ancestor$1(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n        var lastAncestor = ancestor$1(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq(fA, lA) ? TablePositions.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n          });\n        });\n      });\n    };\n    var TableSelection = {\n      retrieve: retrieve$1,\n      retrieveBox: retrieveBox\n    };\n\n    var selected = 'data-mce-selected';\n    var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n    var attributeSelector = '[' + selected + ']';\n    var firstSelected = 'data-mce-first-selected';\n    var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n    var lastSelected = 'data-mce-last-selected';\n    var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n    var Ephemera = {\n      selected: constant(selected),\n      selectedSelector: constant(selectedSelector),\n      attributeSelector: constant(attributeSelector),\n      firstSelected: constant(firstSelected),\n      firstSelectedSelector: constant(firstSelectedSelector),\n      lastSelected: constant(lastSelected),\n      lastSelectedSelector: constant(lastSelectedSelector)\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['selection'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var SelectionTypes = {\n      cata: cata,\n      none: type$1.none,\n      multiple: type$1.multiple,\n      single: type$1.single\n    };\n\n    var selection = function (cell, selections) {\n      return SelectionTypes.cata(selections.get(), constant([]), identity, constant([cell]));\n    };\n    var unmergable = function (cell, selections) {\n      var hasSpan = function (elem) {\n        return has$1(elem, 'rowspan') && parseInt(get$1(elem, 'rowspan'), 10) > 1 || has$1(elem, 'colspan') && parseInt(get$1(elem, 'colspan'), 10) > 1;\n      };\n      var candidates = selection(cell, selections);\n      return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n    };\n    var mergable = function (table, selections) {\n      return SelectionTypes.cata(selections.get(), Option.none, function (cells, _env) {\n        if (cells.length === 0) {\n          return Option.none();\n        }\n        return TableSelection.retrieveBox(table, Ephemera.firstSelectedSelector(), Ephemera.lastSelectedSelector()).bind(function (bounds) {\n          return cells.length > 1 ? Option.some({\n            bounds: constant(bounds),\n            cells: constant(cells)\n          }) : Option.none();\n        });\n      }, Option.none);\n    };\n    var CellOperations = {\n      mergable: mergable,\n      unmergable: unmergable,\n      selection: selection\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant([cell])\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: constant(cell),\n        mergable: constant(CellOperations.mergable(table, selections)),\n        unmergable: constant(CellOperations.unmergable(cell, selections)),\n        selection: constant(CellOperations.selection(cell, selections))\n      };\n    };\n    var notCell$1 = function (element) {\n      return noMenu(element);\n    };\n    var paste$1 = Immutable('element', 'clipboard', 'generators');\n    var pasteRows = function (selections, table, cell, clipboard, generators) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant(CellOperations.selection(cell, selections)),\n        clipboard: constant(clipboard),\n        generators: constant(generators)\n      };\n    };\n    var TableTargets = {\n      noMenu: noMenu,\n      forMenu: forMenu,\n      notCell: notCell$1,\n      paste: paste$1,\n      pasteRows: pasteRows\n    };\n\n    var extractSelected = function (cells) {\n      return TableLookup.table(cells[0]).map(deep).map(function (replica) {\n        return [CopySelected.extract(replica, Ephemera.attributeSelector())];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom(), {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom().innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          SelectionTypes.cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = Element.fromDom(domCell);\n            TableLookup.table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              if (elements.length === 1 && name(elements[0]) === 'table') {\n                e.preventDefault();\n                var doc = Element.fromDom(editor.getDoc());\n                var generators = TableFill.paste(doc);\n                var targets = TableTargets.paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (rng) {\n                  editor.selection.setRng(rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n    var Clipboard = { registerEvents: registerEvents };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$2(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$2(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$4 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var get$5 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var platform$1 = detect$3();\n    var needManualCalc = function () {\n      return platform$1.browser.isIE() || platform$1.browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$2(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var paddingTop = getProp(cell, 'padding-top', 0);\n      var paddingBottom = getProp(cell, 'padding-bottom', 0);\n      var borderTop = getProp(cell, 'border-top-width', 0);\n      var borderBottom = getProp(cell, 'border-bottom-width', 0);\n      var height = cell.dom().getBoundingClientRect().height;\n      var boxSizing = get$2(cell, 'box-sizing');\n      var borders = borderTop + borderBottom;\n      return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n    };\n    var getWidth = function (cell) {\n      return getProp(cell, 'width', get$5(cell));\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$4(cell));\n    };\n    var RuntimeSize = {\n      getWidth: getWidth,\n      getHeight: getHeight\n    };\n\n    var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return RuntimeSize.getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = TableLookup.table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$4(cell);\n      }\n      return normalizePixelSize(value, cell, get$4, setHeight);\n    };\n    var get$6 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getSpan = function (cell, type) {\n      return has$1(cell, type) ? parseInt(get$1(cell, type), 10) : 1;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Option.from(get$1(element, 'width'));\n      }, function (width) {\n        return Option.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = get$5(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$5(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = pixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return get$5(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return get$5(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$6(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        var match = genericSizeRegex.exec(w);\n        if (match !== null) {\n          return Option.some({\n            width: constant(parseFloat(match[1])),\n            unit: constant(match[3])\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var Sizes = {\n      percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n      pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n      setPixelWidth: setPixelWidth,\n      setPercentageWidth: setPercentageWidth,\n      setHeight: setHeight,\n      getPixelWidth: getPixelWidth,\n      getPercentageWidth: getPercentageWidth,\n      getGenericWidth: getGenericWidth,\n      setGenericWidth: setGenericWidth,\n      getHeight: getHeight$1,\n      getRawWidth: getRawWidth\n    };\n\n    var halve = function (main, other) {\n      var width = Sizes.getGenericWidth(main);\n      width.each(function (w) {\n        var newWidth = w.width() / 2;\n        Sizes.setGenericWidth(main, newWidth, w.unit());\n        Sizes.setGenericWidth(other, newWidth, w.unit());\n      });\n    };\n    var CellMutations = { halve: halve };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom()) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = Immutable('row', 'y');\n    var colInfo = Immutable('col', 'x');\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left() + getOuter$1(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left();\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top();\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var BarPositions = {\n      height: height,\n      rtl: rtl,\n      ltr: ltr\n    };\n\n    var ResizeDirection = {\n      ltr: BarPositions.ltr,\n      rtl: BarPositions.rtl\n    };\n\n    function TableDirection (directionAt) {\n      var auto = function (table) {\n        return directionAt(table).isRtl() ? ResizeDirection.rtl : ResizeDirection.ltr;\n      };\n      var delta = function (amount, table) {\n        return auto(table).delta(amount, table);\n      };\n      var positions = function (cols, table) {\n        return auto(table).positions(cols, table);\n      };\n      var edge = function (cell) {\n        return auto(cell).edge(cell);\n      };\n      return {\n        delta: delta,\n        edge: edge,\n        positions: positions\n      };\n    }\n\n    var getGridSize = function (table) {\n      var input = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(input);\n      return warehouse.grid();\n    };\n    var TableGridSize = { getGridSize: getGridSize };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var renderSection = function (gridSection, sectionName) {\n        var section = child$2(table, sectionName).getOrThunk(function () {\n          var tb = Element.fromTag(sectionName, owner(table).dom());\n          append(table, tb);\n          return tb;\n        });\n        empty(section);\n        var rows = map(gridSection, function (row) {\n          if (row.isNew()) {\n            newRows.push(row.element());\n          }\n          var tr = row.element();\n          empty(tr);\n          each(row.cells(), function (cell) {\n            if (cell.isNew()) {\n              newCells.push(cell.element());\n            }\n            setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n            setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n            append(tr, cell.element());\n          });\n          return tr;\n        });\n        append$1(section, rows);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      each(grid, function (row) {\n        switch (row.section()) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: constant(newRows),\n        newCells: constant(newCells)\n      };\n    };\n    var copy$2 = function (grid) {\n      var rows = map(grid, function (row) {\n        var tr = shallow(row.element());\n        each(row.cells(), function (cell) {\n          var clonedCell = deep(cell.element());\n          setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n      return rows;\n    };\n    var Redraw = {\n      render: render,\n      copy: copy$2\n    };\n\n    var read = function (element, attr) {\n      var value = get$1(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$7 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$7(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var repeat = function (repititions, f) {\n      var r = [];\n      for (var i = 0; i < repititions; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var range = function (start, end) {\n      var r = [];\n      for (var i = start; i < end; i++) {\n        r.push(i);\n      }\n      return r;\n    };\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Option.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Option.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Option.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var columns = function (warehouse) {\n      var grid = warehouse.grid();\n      var cols = range(0, grid.columns());\n      var rowsArr = range(0, grid.rows());\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column() === col;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.colspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var decide = function (getBlock, isSingle, getFallback) {\n      var inBlock = getBlock();\n      var singleInBlock = find(inBlock, isSingle);\n      var detailOption = singleInBlock.orThunk(function () {\n        return Option.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element();\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid();\n      var rowsArr = range(0, grid.rows());\n      var cols = range(0, grid.columns());\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row() === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var Blocks = {\n      columns: columns,\n      rows: rows$1\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-snooker');\n    var Styles = { resolve: styles.resolve };\n\n    var col = function (column, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var row$1 = function (r, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var Bar = {\n      col: col,\n      row: row$1\n    };\n\n    var resizeBar = Styles.resolve('resizer-bar');\n    var resizeRowBar = Styles.resolve('resizer-rows');\n    var resizeColBar = Styles.resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption, i) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$2(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = Bar.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n        add$2(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = Bar.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n        add$2(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (wire, table, rows, cols, hdirection, vdirection) {\n      var position = absolute(table);\n      var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n      refreshRow(wire, rowPositions, position, getOuter$1(table));\n      var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n      refreshCol(wire, colPositions, position, getOuter(table));\n    };\n    var refresh = function (wire, table, hdirection, vdirection) {\n      destroy(wire);\n      var list = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(list);\n      var rows = Blocks.rows(warehouse);\n      var cols = Blocks.columns(warehouse);\n      refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$2(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$2(element, resizeColBar);\n    };\n    var Bars = {\n      refresh: refresh,\n      hide: hide,\n      show: show,\n      destroy: destroy,\n      isRowBar: isRowBar,\n      isColBar: isColBar\n    };\n\n    var addCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      var before = cells.slice(0, index);\n      var after = cells.slice(index);\n      var newCells = before.concat([cell]).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section());\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells();\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section());\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells()[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element();\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells().length;\n    };\n    var GridRow = {\n      addCell: addCell,\n      setCells: setCells,\n      mutateCell: mutateCell,\n      getCell: getCell,\n      getCellElement: getCellElement,\n      mapCells: mapCells,\n      cellLength: cellLength\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return GridRow.getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element(), x.element());\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells().slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: constant(endColIndex),\n        rowspan: constant(endRowIndex)\n      };\n    };\n    var TableGrid = { subgrid: subgrid };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row, ri) {\n        return map(row.cells(), function (col, ci) {\n          return false;\n        });\n      });\n      var updateSeen = function (ri, ci, rowspan, colspan) {\n        for (var r = ri; r < ri + rowspan; r++) {\n          for (var c = ci; c < ci + colspan; c++) {\n            seen[r][c] = true;\n          }\n        }\n      };\n      return map(grid, function (row, ri) {\n        var details = bind(row.cells(), function (cell, ci) {\n          if (seen[ri][ci] === false) {\n            var result = TableGrid.subgrid(grid, ri, ci, comparator);\n            updateSeen(ri, ci, result.rowspan(), result.colspan());\n            return [detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section());\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      for (var i = 0; i < warehouse.grid().rows(); i++) {\n        var rowCells = [];\n        for (var j = 0; j < warehouse.grid().columns(); j++) {\n          var element = Warehouse.getAt(warehouse, i, j).map(function (item) {\n            return elementnew(item.element(), isNew);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all()[i].section());\n        grid.push(row);\n      }\n      return grid;\n    };\n    var Transitions = {\n      toDetails: toDetails,\n      toGrid: toGrid\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return Transitions.toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element()).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details());\n        return rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = Transitions.toDetails(grid, eq);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      var all = flatten(map(warehouse.all(), function (r) {\n        return r.cells();\n      }));\n      return find(all, function (e) {\n        return eq(element, e.element());\n      });\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, direction) {\n        var input = DetailsList.fromTable(table);\n        var warehouse = Warehouse.generate(input);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq, genWrappers(generators));\n          var grid = toDetailList(result.grid(), generators);\n          return {\n            grid: constant(grid),\n            cursor: result.cursor\n          };\n        });\n        return output.fold(function () {\n          return Option.none();\n        }, function (out) {\n          var newElements = Redraw.render(table, out.grid());\n          adjustment(table, out.grid(), direction);\n          postAction(table);\n          Bars.refresh(wire, table, BarPositions.height, direction);\n          return Option.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteRows = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some({\n        cells: cells,\n        generators: target.generators,\n        clipboard: target.clipboard\n      }) : Option.none();\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable();\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable();\n    };\n    var onCells = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some(cells) : Option.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row() >= gridA.length || startAddress.column() > GridRow.cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n      }\n      var rowRemainder = gridA.slice(startAddress.row());\n      var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n      var colRequired = GridRow.cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: constant(rowRemainder.length - rowRequired),\n        colDelta: constant(colRemainder.length - colRequired)\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = GridRow.cellLength(gridA[0]);\n      var colLengthB = GridRow.cellLength(gridB[0]);\n      return {\n        rowDelta: constant(0),\n        colDelta: constant(colLengthA - colLengthB)\n      };\n    };\n    var fill = function (cells, generator) {\n      return map(cells, function () {\n        return elementnew(generator.cell(), true);\n      });\n    };\n    var rowFill = function (grid, amount, generator) {\n      return grid.concat(repeat(amount, function (_row) {\n        return GridRow.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n      }));\n    };\n    var colFill = function (grid, amount, generator) {\n      return map(grid, function (row) {\n        return GridRow.setCells(row, row.cells().concat(fill(range(0, amount), generator)));\n      });\n    };\n    var tailor = function (gridA, delta, generator) {\n      var fillCols = delta.colDelta() < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n      var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n      return tailoredGrid;\n    };\n    var Fitment = {\n      measure: measure,\n      measureWidth: measureWidth,\n      tailor: tailor\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      if (grid.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          GridRow.mutateCell(grid[i], j, elementnew(substitution(), false));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var first = true;\n      for (var i = 0; i < grid.length; i++) {\n        for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n          var current = GridRow.getCellElement(grid[i], j);\n          var isToReplace = comparator(current, target);\n          if (isToReplace === true && first === false) {\n            GridRow.mutateCell(grid[i], j, elementnew(substitution(), true));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element(), cell.element());\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid.length) {\n        var rowPrevCells = grid[index - 1].cells();\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Option.none();\n          var _loop_1 = function (i) {\n            var _loop_2 = function (j) {\n              var current = grid[i].cells()[j];\n              var isToReplace = comparator(current.element(), cell.element());\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Option.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  GridRow.mutateCell(grid[i], j, elementnew(sub, true));\n                });\n              }\n            };\n            for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n              _loop_2(j);\n            }\n          };\n          for (var i = index; i < grid.length; i++) {\n            _loop_1(i);\n          }\n        });\n      }\n      return grid;\n    };\n    var MergingOperations = {\n      merge: merge,\n      unmerge: unmerge,\n      splitRows: splitRows\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = GridRow.getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element());\n      var currentRow = grid[row];\n      return grid.length > 1 && GridRow.cellLength(currentRow) > 1 && (col > 0 && matching(GridRow.getCellElement(currentRow, col - 1)) || col < currentRow.cells().length - 1 && matching(GridRow.getCellElement(currentRow, col + 1)) || row > 0 && matching(GridRow.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(GridRow.getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n      var startRow = startAddress.row();\n      var startCol = startAddress.column();\n      var mergeHeight = gridB.length;\n      var mergeWidth = GridRow.cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth;\n      for (var r = startRow; r < endRow; r++) {\n        for (var c = startCol; c < endCol; c++) {\n          if (isSpanning(gridA, r, c, comparator)) {\n            MergingOperations.unmerge(gridA, GridRow.getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var newCell = GridRow.getCellElement(gridB[r - startRow], c - startCol);\n          var replacement = generator.replace(newCell);\n          GridRow.mutateCell(gridA[r], c, elementnew(replacement, true));\n        }\n      }\n      return gridA;\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var result = Fitment.measure(startAddress, gridA, gridB);\n      return result.map(function (delta) {\n        var fittedGrid = Fitment.tailor(gridA, delta, generator);\n        return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n      });\n    };\n    var insert = function (index, gridA, gridB, generator, comparator) {\n      MergingOperations.splitRows(gridA, index, comparator, generator.cell);\n      var delta = Fitment.measureWidth(gridB, gridA);\n      var fittedNewGrid = Fitment.tailor(gridB, delta, generator);\n      var secondDelta = Fitment.measureWidth(gridA, fittedNewGrid);\n      var fittedOldGrid = Fitment.tailor(gridA, secondDelta, generator);\n      return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n    };\n    var TableMerge = {\n      merge: merge$1,\n      insert: insert\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[example], function (ex, c) {\n        var withinSpan = index > 0 && index < grid.length && comparator(GridRow.getCellElement(grid[index - 1], c), GridRow.getCellElement(grid[index], c));\n        var ret = withinSpan ? GridRow.getCell(grid[index], c) : elementnew(substitution(ex.element(), comparator), true);\n        return ret;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < GridRow.cellLength(row) && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n        var sub = withinSpan ? GridRow.getCell(row, index) : elementnew(substitution(GridRow.getCellElement(row, example), comparator), true);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoColumns = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleCol + 1;\n      return map(grid, function (row, i) {\n        var isTargetCell = i === exampleRow;\n        var sub = isTargetCell ? elementnew(substitution(GridRow.getCellElement(row, exampleCol), comparator), true) : GridRow.getCell(row, exampleCol);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoRows = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleRow + 1;\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[exampleRow], function (ex, i) {\n        var isTargetCell = i === exampleCol;\n        return isTargetCell ? elementnew(substitution(ex.element(), comparator), true) : ex;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var deleteColumnsAt = function (grid, start, finish) {\n      var rows = map(grid, function (row) {\n        var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n        return rowcells(cells, row.section());\n      });\n      return filter(rows, function (row) {\n        return row.cells().length > 0;\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      return grid.slice(0, start).concat(grid.slice(finish + 1));\n    };\n    var ModificationOperations = {\n      insertRowAt: insertRowAt,\n      insertColumnAt: insertColumnAt,\n      splitCellIntoColumns: splitCellIntoColumns,\n      splitCellIntoRows: splitCellIntoRows,\n      deleteRowsAt: deleteRowsAt,\n      deleteColumnsAt: deleteColumnsAt\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element(), target.element());\n        });\n      };\n      return map(grid, function (row) {\n        return GridRow.mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element(), comparator), true) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return GridRow.getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(GridRow.getCellElement(grid[rowIndex - 1], colIndex), GridRow.getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var targets = bind(grid, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [GridRow.getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var targetRow = grid[index];\n      var targets = bind(targetRow.cells(), function (item, i) {\n        var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var TransformOperations = {\n      replaceColumn: replaceColumn,\n      replaceRow: replaceRow\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours$1 = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize) {\n      var result = input.slice(0);\n      var context = neighbours$1(input, column);\n      var zero = function (array) {\n        return map(array, constant(0));\n      };\n      var onNone = constant(zero(result));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onChange = function (index, next) {\n        if (step >= 0) {\n          var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n          return zero(result.slice(0, index)).concat([\n            step,\n            newNext - result[next]\n          ]).concat(zero(result.slice(next + 1)));\n        } else {\n          var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n          var diffx = result[index] - newThis;\n          return zero(result.slice(0, index)).concat([\n            newThis - result[index],\n            diffx\n          ]).concat(zero(result.slice(next + 1)));\n        }\n      };\n      var onLeft = onChange;\n      var onMiddle = function (_prev, index, next) {\n        return onChange(index, next);\n      };\n      var onRight = function (_prev, index) {\n        if (step >= 0) {\n          return zero(result.slice(0, index)).concat([step]);\n        } else {\n          var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n          return zero(result.slice(0, index)).concat([size - result[index]]);\n        }\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n    var Deltas = { determine: determine };\n\n    var getSpan$1 = function (cell, type) {\n      return has$1(cell, type) && parseInt(get$1(cell, type), 10) > 1;\n    };\n    var hasColspan = function (cell) {\n      return getSpan$1(cell, 'colspan');\n    };\n    var hasRowspan = function (cell) {\n      return getSpan$1(cell, 'rowspan');\n    };\n    var getInt = function (element, property) {\n      return parseInt(get$2(element, property), 10);\n    };\n    var CellUtils = {\n      hasColspan: hasColspan,\n      hasRowspan: hasRowspan,\n      minWidth: constant(10),\n      minHeight: constant(10),\n      getInt: getInt\n    };\n\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      return getRaw$1(cell, 'width', function (e) {\n        return Sizes.getPixelWidth(e, tableSize);\n      });\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', Sizes.getHeight);\n    };\n    var getWidthFrom = function (warehouse, direction, getWidth, fallback, tableSize) {\n      var columns = Blocks.columns(warehouse);\n      var backups = map(columns, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(columns, function (cellOption, c) {\n        var columnCell = cellOption.filter(not(CellUtils.hasColspan));\n        return columnCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getWidth(cell, tableSize);\n        });\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, direction, getHeight, fallback) {\n      var rows = Blocks.rows(warehouse);\n      var backups = map(rows, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(rows, function (cellOption, c) {\n        var rowCell = cellOption.filter(not(CellUtils.hasRowspan));\n        return rowCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getHeight(cell);\n        });\n      });\n    };\n    var getPixelHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, Sizes.getHeight, function (deduced) {\n        return deduced.getOrThunk(CellUtils.minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n    };\n    var ColumnSizes = {\n      getRawWidths: getRawWidths,\n      getPixelWidths: getPixelWidths,\n      getPercentageWidths: getPercentageWidths,\n      getPixelHeights: getPixelHeights,\n      getRawHeights: getRawHeights\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidth = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n        return {\n          element: cell.element,\n          width: constant(width),\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateHeight = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n        return {\n          element: cell.element,\n          height: constant(height),\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all(), function (row, i) {\n        return {\n          element: row.element,\n          height: constant(heights[i])\n        };\n      });\n    };\n    var Recalculations = {\n      recalculateWidth: recalculateWidth,\n      recalculateHeight: recalculateHeight,\n      matchRowHeight: matchRowHeight\n    };\n\n    var percentageSize = function (width, element) {\n      var floatWidth = parseFloat(width);\n      var pixelWidth = get$5(element);\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return CellUtils.minWidth() / pixelWidth * 100;\n      };\n      var setTableWidth = function (table, _newWidths, delta) {\n        var ratio = delta / 100;\n        var change = ratio * floatWidth;\n        Sizes.setPercentageWidth(table, floatWidth + change);\n      };\n      return {\n        width: constant(floatWidth),\n        pixelWidth: constant(pixelWidth),\n        getWidths: ColumnSizes.getPercentageWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: Sizes.setPercentageWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var pixelSize = function (width) {\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(CellUtils.minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var setTableWidth = function (table, newWidths, _delta) {\n        var total = foldr(newWidths, function (b, a) {\n          return b + a;\n        }, 0);\n        Sizes.setPixelWidth(table, total);\n      };\n      return {\n        width: constant(width),\n        pixelWidth: constant(width),\n        getWidths: ColumnSizes.getPixelWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: CellUtils.minWidth,\n        setElementWidth: Sizes.setPixelWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = Sizes.percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = Sizes.pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth);\n      }\n      var fallbackWidth = get$5(element);\n      return pixelSize(fallbackWidth);\n    };\n    var getTableSize = function (element) {\n      var width = Sizes.getRawWidth(element);\n      return width.fold(function () {\n        var fallbackWidth = get$5(element);\n        return pixelSize(fallbackWidth);\n      }, function (w) {\n        return chooseSize(element, w);\n      });\n    };\n    var TableSize = { getTableSize: getTableSize };\n\n    var getWarehouse$1 = function (list) {\n      return Warehouse.generate(list);\n    };\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var getTableWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return getWarehouse$1(list);\n    };\n    var adjustWidth = function (table, delta, index, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var step = tableSize.getCellDelta(delta);\n      var warehouse = getTableWarehouse(table);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var deltas = Deltas.determine(widths, index, step, tableSize);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      var newSizes = Recalculations.recalculateWidth(warehouse, newWidths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (index === warehouse.grid().columns() - 1) {\n        tableSize.setTableWidth(table, newWidths, step);\n      }\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = getTableWarehouse(table);\n      var heights = ColumnSizes.getPixelHeights(warehouse, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, CellUtils.minHeight()) : dy;\n      });\n      var newCellSizes = Recalculations.recalculateHeight(warehouse, newHeights);\n      var newRowSizes = Recalculations.matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        Sizes.setHeight(row.element(), row.height());\n      });\n      each(newCellSizes, function (cell) {\n        Sizes.setHeight(cell.element(), cell.height());\n      });\n      var total = sumUp(newHeights);\n      Sizes.setHeight(table, total);\n    };\n    var adjustWidthTo = function (table, list, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var warehouse = getWarehouse$1(list);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var newSizes = Recalculations.recalculateWidth(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (newSizes.length > 0) {\n        tableSize.setTableWidth(table, widths, tableSize.getCellDelta(0));\n      }\n    };\n    var Adjustments = {\n      adjustWidth: adjustWidth,\n      adjustHeight: adjustHeight,\n      adjustWidthTo: adjustWidthTo\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var verifyGenerators = exactly([\n      'cell',\n      'row',\n      'replace',\n      'gap'\n    ]);\n    var elementToData = function (element) {\n      var colspan = has$1(element, 'colspan') ? parseInt(get$1(element, 'colspan'), 10) : 1;\n      var rowspan = has$1(element, 'rowspan') ? parseInt(get$1(element, 'rowspan'), 10) : 1;\n      return {\n        element: constant(element),\n        colspan: constant(colspan),\n        rowspan: constant(rowspan)\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var nu = function (data) {\n        return generators.cell(data);\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Option.some(replacement));\n        }\n        recent = Option.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Option.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Option.none());\n        verifyGenerators(generators);\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Option.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          return find$1(element, comparator).fold(function () {\n            return makeNew(element);\n          }, function (p) {\n            return comparator(element, p.item) ? p.sub : makeNew(element);\n          });\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var merging = function (generators) {\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var combine = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Option.some(cell));\n        }\n        return function () {\n          var raw = generators.cell({\n            element: constant(cell),\n            colspan: constant(1),\n            rowspan: constant(1)\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          return raw;\n        };\n      };\n      return {\n        combine: combine,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isFormatting = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'address',\n        'pre',\n        'p',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isHeading = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isContainer = function (universe, item) {\n      return contains([\n        'div',\n        'li',\n        'td',\n        'th',\n        'blockquote',\n        'body',\n        'caption'\n      ], universe.property().name(item));\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n    var isFrame = function (universe, item) {\n      return universe.property().name(item) === 'iframe';\n    };\n    var isInline = function (universe, item) {\n      return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n    };\n    var Structure = {\n      isBlock: isBlock,\n      isList: isList,\n      isFormatting: isFormatting,\n      isHeading: isHeading,\n      isContainer: isContainer,\n      isEmptyTag: isEmptyTag,\n      isFrame: isFrame,\n      isInline: isInline\n    };\n\n    var universe$1 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return Structure.isBlock(universe$1, element);\n    };\n    var isList$1 = function (element) {\n      return Structure.isList(universe$1, element);\n    };\n    var isFormatting$1 = function (element) {\n      return Structure.isFormatting(universe$1, element);\n    };\n    var isHeading$1 = function (element) {\n      return Structure.isHeading(universe$1, element);\n    };\n    var isContainer$1 = function (element) {\n      return Structure.isContainer(universe$1, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return Structure.isEmptyTag(universe$1, element);\n    };\n    var isFrame$1 = function (element) {\n      return Structure.isFrame(universe$1, element);\n    };\n    var isInline$1 = function (element) {\n      return Structure.isInline(universe$1, element);\n    };\n    var DomStructure = {\n      isBlock: isBlock$1,\n      isList: isList$1,\n      isFormatting: isFormatting$1,\n      isHeading: isHeading$1,\n      isContainer: isContainer$1,\n      isEmptyTag: isEmptyTag$1,\n      isFrame: isFrame$1,\n      isInline: isInline$1\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$3(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, DomStructure.isList).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (DomStructure.isBlock(rightSibling)) {\n            return true;\n          }\n          if (DomStructure.isEmptyTag(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || DomStructure.isBlock(parent) && !eq(cell, parent) ? [] : [Element.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [Element.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n    var TableContent = { merge: merge$2 };\n\n    var prune = function (table) {\n      var cells = TableLookup.cells(table);\n      if (cells.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = Immutable('grid', 'cursor');\n    var elementFromGrid = function (grid, row, column) {\n      return findIn(grid, row, column).orThunk(function () {\n        return findIn(grid, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Option.from(grid[row]).bind(function (r) {\n        return Option.from(r.cells()[column]).bind(function (c) {\n          return Option.from(c.element());\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      return outcome(grid, findIn(grid, row, column));\n    };\n    var uniqueRows = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.row() === detail.row();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.row() - detailB.row();\n      });\n    };\n    var uniqueColumns = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.column() === detail.column();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.column() - detailB.column();\n      });\n    };\n    var insertRowBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var example = details[0].row();\n      var targetIndex = details[0].row();\n      var rows = uniqueRows(details);\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertRowAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row() + detail.rowspan();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var example = rows[rows.length - 1].row();\n      var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertColumnBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsBefore = function (grid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var example = columns[0].column();\n      var targetIndex = columns[0].column();\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var insertColumnAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column() + detail.colspan();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsAfter = function (grid, details, comparator, genWrappers) {\n      var example = details[details.length - 1].column();\n      var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n      var columns = uniqueColumns(details);\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var makeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var makeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoColumns$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoRows$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var eraseColumns = function (grid, details, _comparator, _genWrappers) {\n      var columns = uniqueColumns(details);\n      var newGrid = ModificationOperations.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var eraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = ModificationOperations.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var mergeCells = function (grid, mergable, comparator, _genWrappers) {\n      var cells = mergable.cells();\n      TableContent.merge(cells);\n      var newGrid = MergingOperations.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n      return outcome(newGrid, Option.from(cells[0]));\n    };\n    var unmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var newGrid = foldr(unmergable, function (b, cell) {\n        return MergingOperations.unmerge(b, cell, comparator, genWrappers.combine(cell));\n      }, grid);\n      return outcome(newGrid, Option.from(unmergable[0]));\n    };\n    var pasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var list = DetailsList.fromTable(table);\n        var wh = Warehouse.generate(list);\n        return Transitions.toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n      var startAddress = address(pasteDetails.row(), pasteDetails.column());\n      var mergedGrid = TableMerge.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Option.some(pasteDetails.element()));\n      }, function (nuGrid) {\n        var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n        return outcome(nuGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, example) {\n      var pasteDetails = DetailsList.fromPastedRows(rows, example);\n      var wh = Warehouse.generate(pasteDetails);\n      return Transitions.toGrid(wh, generators, true);\n    };\n    var pasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[0].row();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var pasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var resize = Adjustments.adjustWidthTo;\n    var TableOperations = {\n      insertRowBefore: run(insertRowBefore, onCell, noop, noop, Generators.modification),\n      insertRowsBefore: run(insertRowsBefore, onCells, noop, noop, Generators.modification),\n      insertRowAfter: run(insertRowAfter, onCell, noop, noop, Generators.modification),\n      insertRowsAfter: run(insertRowsAfter, onCells, noop, noop, Generators.modification),\n      insertColumnBefore: run(insertColumnBefore, onCell, resize, noop, Generators.modification),\n      insertColumnsBefore: run(insertColumnsBefore, onCells, resize, noop, Generators.modification),\n      insertColumnAfter: run(insertColumnAfter, onCell, resize, noop, Generators.modification),\n      insertColumnsAfter: run(insertColumnsAfter, onCells, resize, noop, Generators.modification),\n      splitCellIntoColumns: run(splitCellIntoColumns$1, onCell, resize, noop, Generators.modification),\n      splitCellIntoRows: run(splitCellIntoRows$1, onCell, noop, noop, Generators.modification),\n      eraseColumns: run(eraseColumns, onCells, resize, prune, Generators.modification),\n      eraseRows: run(eraseRows, onCells, noop, prune, Generators.modification),\n      makeColumnHeader: run(makeColumnHeader, onCell, noop, noop, Generators.transform('row', 'th')),\n      unmakeColumnHeader: run(unmakeColumnHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      makeRowHeader: run(makeRowHeader, onCell, noop, noop, Generators.transform('col', 'th')),\n      unmakeRowHeader: run(unmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      mergeCells: run(mergeCells, onMergable, noop, noop, Generators.merging),\n      unmergeCells: run(unmergeCells, onUnmergable, resize, noop, Generators.merging),\n      pasteCells: run(pasteCells, onPaste, resize, noop, Generators.modification),\n      pasteRowsBefore: run(pasteRowsBefore, onPasteRows, noop, noop, Generators.modification),\n      pasteRowsAfter: run(pasteRowsAfter, onPasteRows, noop, noop, Generators.modification)\n    };\n\n    var getBody$1 = function (editor) {\n      return Element.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addSizeSuffix = function (size) {\n      if (/^[0-9]+$/.test(size)) {\n        size += 'px';\n      }\n      return size;\n    };\n    var removeDataStyle = function (table) {\n      var dataStyleCells = descendants$1(table, 'td[data-mce-style],th[data-mce-style]');\n      remove(table, 'data-mce-style');\n      each(dataStyleCells, function (cell) {\n        remove(cell, 'data-mce-style');\n      });\n    };\n\n    var getDirection = function (element) {\n      return get$2(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var ltr$1 = { isRtl: constant(false) };\n    var rtl$1 = { isRtl: constant(true) };\n    var directionAt = function (element) {\n      var dir = getDirection(element);\n      return dir === 'rtl' ? rtl$1 : ltr$1;\n    };\n    var Direction = { directionAt: directionAt };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultAttributes = { border: '1' };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', defaultStyles, 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return editor.getParam('table_responsive_width') === true;\n    };\n    var isPixelsForced = function (editor) {\n      return editor.getParam('table_responsive_width') === false;\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Option.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Option.some(cloneElements);\n      } else {\n        return Option.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n\n    var TableActions = function (editor, lazyWire) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.rows() > 1;\n      };\n      var lastColumnGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.columns() > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var execute = function (operation, guard, mutate, lazyWire) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = Element.fromDom(editor.getDoc());\n          var direction = TableDirection(Direction.directionAt);\n          var generators = TableFill.cellOperations(mutate, doc, cloneFormats);\n          return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n            each(result.newRows(), function (row) {\n              fireNewRow(editor, row.dom());\n            });\n            each(result.newCells(), function (cell) {\n              fireNewCell(editor, cell.dom());\n            });\n            return result.cursor().map(function (cell) {\n              var rng = editor.dom.createRng();\n              rng.setStart(cell.dom(), 0);\n              rng.setEnd(cell.dom(), 0);\n              return rng;\n            });\n          }) : Option.none();\n        };\n      };\n      var deleteRow = execute(TableOperations.eraseRows, lastRowGuard, noop, lazyWire);\n      var deleteColumn = execute(TableOperations.eraseColumns, lastColumnGuard, noop, lazyWire);\n      var insertRowsBefore = execute(TableOperations.insertRowsBefore, always, noop, lazyWire);\n      var insertRowsAfter = execute(TableOperations.insertRowsAfter, always, noop, lazyWire);\n      var insertColumnsBefore = execute(TableOperations.insertColumnsBefore, always, CellMutations.halve, lazyWire);\n      var insertColumnsAfter = execute(TableOperations.insertColumnsAfter, always, CellMutations.halve, lazyWire);\n      var mergeCells = execute(TableOperations.mergeCells, always, noop, lazyWire);\n      var unmergeCells = execute(TableOperations.unmergeCells, always, noop, lazyWire);\n      var pasteRowsBefore = execute(TableOperations.pasteRowsBefore, always, noop, lazyWire);\n      var pasteRowsAfter = execute(TableOperations.pasteRowsAfter, always, noop, lazyWire);\n      var pasteCells = execute(TableOperations.pasteCells, always, noop, lazyWire);\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore,\n        insertRowsAfter: insertRowsAfter,\n        insertColumnsBefore: insertColumnsBefore,\n        insertColumnsAfter: insertColumnsAfter,\n        mergeCells: mergeCells,\n        unmergeCells: unmergeCells,\n        pasteRowsBefore: pasteRowsBefore,\n        pasteRowsAfter: pasteRowsAfter,\n        pasteCells: pasteCells\n      };\n    };\n\n    var copyRows = function (table, target, generators) {\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var details = onCells(house, target);\n      return details.map(function (selectedCells) {\n        var grid = Transitions.toGrid(house, generators, false);\n        var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n        var slicedDetails = toDetailList(slicedGrid, generators);\n        return Redraw.copy(slicedDetails);\n      });\n    };\n    var CopyRows = { copyRows: copyRows };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      firstChildStyle = checkChildren(firstChildStyle, cells);\n      return firstChildStyle;\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n    var Styles$1 = {\n      applyAlign: applyAlign,\n      applyVAlign: applyVAlign,\n      unApplyAlign: unApplyAlign,\n      unApplyVAlign: unApplyVAlign,\n      getTDTHOverallStyle: getTDTHOverallStyle\n    };\n\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$1.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var rgbToHex = function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n      var borderWidth = getRaw(Element.fromDom(elm), 'border-width').getOr('');\n      var borderStyle = getRaw(Element.fromDom(elm), 'border-style').getOr('');\n      var borderColor = getRaw(Element.fromDom(elm), 'border-color').map(rgbToHex).getOr('');\n      var bgColor = getRaw(Element.fromDom(elm), 'background-color').map(rgbToHex).getOr('');\n      return {\n        borderwidth: borderWidth,\n        borderstyle: borderStyle,\n        bordercolor: borderColor,\n        backgroundcolor: bgColor\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      var keys$1 = keys(baseData);\n      each(comparisonData, function (items) {\n        each(keys$1, function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAdvancedTab = function (dialogName) {\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'selectbox',\n          label: 'Border style',\n          items: [\n            {\n              text: 'Select...',\n              value: ''\n            },\n            {\n              text: 'Solid',\n              value: 'solid'\n            },\n            {\n              text: 'Dotted',\n              value: 'dotted'\n            },\n            {\n              text: 'Dashed',\n              value: 'dashed'\n            },\n            {\n              text: 'Double',\n              value: 'double'\n            },\n            {\n              text: 'Groove',\n              value: 'groove'\n            },\n            {\n              text: 'Ridge',\n              value: 'ridge'\n            },\n            {\n              text: 'Inset',\n              value: 'inset'\n            },\n            {\n              text: 'Outset',\n              value: 'outset'\n            },\n            {\n              text: 'None',\n              value: 'none'\n            },\n            {\n              text: 'Hidden',\n              value: 'hidden'\n            }\n          ]\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n    var getAlignment = function (alignments, formatName, dataName, editor, elm) {\n      var alignmentData = {};\n      global$1.each(alignments.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, formatName + name)) {\n          alignmentData[dataName] = name;\n        }\n      });\n      if (!alignmentData[dataName]) {\n        alignmentData[dataName] = '';\n      }\n      return alignmentData;\n    };\n    var getHAlignment = curry(getAlignment, 'left center right');\n    var getVAlignment = curry(getAlignment, 'top middle bottom');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        var rgbToHex = function (value) {\n          return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n        };\n        var borderStyle = get(style, 'border-style').getOr('');\n        var borderColor = get(style, 'border-color').getOr('');\n        var bgColor = get(style, 'background-color').getOr('');\n        return {\n          borderstyle: borderStyle,\n          bordercolor: rgbToHex(borderColor),\n          backgroundcolor: rgbToHex(bgColor)\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var dom = editor.dom;\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get(style, 'border-spacing').or(get(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get(style, 'border-padding').or(get(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw(Element.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || Styles$1.getTDTHOverallStyle(editor.dom, elm, 'border-width') || Styles$1.getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      var data = __assign(__assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing'),\n        cellpadding: dom.getAttrib(elm, 'cellpadding') || Styles$1.getTDTHOverallStyle(editor.dom, elm, 'padding'),\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', '')\n      }, getHAlignment('align', 'align', editor, elm)), hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n      return data;\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      var data = __assign(__assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class', ''),\n        align: '',\n        type: elm.parentNode.nodeName.toLowerCase()\n      }, getHAlignment('align', 'align', editor, elm)), hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n      return data;\n    };\n    var extractDataFromCellElement = function (editor, elm, hasAdvancedCellTab) {\n      var dom = editor.dom;\n      var data = __assign(__assign(__assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        celltype: elm.nodeName.toLowerCase(),\n        class: dom.getAttrib(elm, 'class', '')\n      }, getHAlignment('align', 'halign', editor, elm)), getVAlignment('valign', 'valign', editor, elm)), hasAdvancedCellTab ? extractAdvancedStyles(dom, elm) : {});\n      return data;\n    };\n    var Helpers = {\n      buildListItems: buildListItems,\n      extractAdvancedStyles: extractAdvancedStyles,\n      getSharedValues: getSharedValues,\n      getAdvancedTab: getAdvancedTab,\n      extractDataFromTableElement: extractDataFromTableElement,\n      extractDataFromRowElement: extractDataFromRowElement,\n      extractDataFromCellElement: extractDataFromCellElement,\n      extractDataFromSettings: extractDataFromSettings\n    };\n\n    var getClassList = function (editor) {\n      var rowClassList = getCellClassList(editor);\n      var classes = Helpers.buildListItems(rowClassList, function (item) {\n        if (item.value) {\n          item.textStyle = function () {\n            return editor.formatter.getCssText({\n              block: 'tr',\n              classes: [item.value]\n            });\n          };\n        }\n      });\n      if (rowClassList.length > 0) {\n        return Option.some({\n          name: 'class',\n          type: 'selectbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Option.none();\n    };\n    var children$3 = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'selectbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'selectbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'selectbox',\n        label: 'H Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'selectbox',\n        label: 'V Align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Top',\n            value: 'top'\n          },\n          {\n            text: 'Middle',\n            value: 'middle'\n          },\n          {\n            text: 'Bottom',\n            value: 'bottom'\n          }\n        ]\n      }\n    ];\n    var getItems = function (editor) {\n      return getClassList(editor).fold(function () {\n        return children$3;\n      }, function (classlist) {\n        return children$3.concat(classlist);\n      });\n    };\n    var CellDialogGeneralTab = { getItems: getItems };\n\n    var normal = function (dom, node) {\n      var setAttrib = function (attr, value) {\n        dom.setAttrib(node, attr, value);\n      };\n      var setStyle = function (prop, value) {\n        dom.setStyle(node, prop, value);\n      };\n      return {\n        setAttrib: setAttrib,\n        setStyle: setStyle\n      };\n    };\n    var ifTruthy = function (dom, node) {\n      var setAttrib = function (attr, value) {\n        if (value) {\n          dom.setAttrib(node, attr, value);\n        }\n      };\n      var setStyle = function (prop, value) {\n        if (value) {\n          dom.setStyle(node, prop, value);\n        }\n      };\n      return {\n        setAttrib: setAttrib,\n        setStyle: setStyle\n      };\n    };\n    var DomModifier = {\n      normal: normal,\n      ifTruthy: ifTruthy\n    };\n\n    var updateSimpleProps = function (modifiers, data) {\n      modifiers.setAttrib('scope', data.scope);\n      modifiers.setAttrib('class', data.class);\n      modifiers.setStyle('width', addSizeSuffix(data.width));\n      modifiers.setStyle('height', addSizeSuffix(data.height));\n    };\n    var updateAdvancedProps = function (modifiers, data) {\n      modifiers.setStyle('background-color', data.backgroundcolor);\n      modifiers.setStyle('border-color', data.bordercolor);\n      modifiers.setStyle('border-style', data.borderstyle);\n      modifiers.setStyle('border-width', addSizeSuffix(data.borderwidth));\n    };\n    var applyToSingle = function (editor, cells, data) {\n      var dom = editor.dom;\n      var cellElm = data.celltype && cells[0].nodeName.toLowerCase() !== data.celltype ? dom.rename(cells[0], data.celltype) : cells[0];\n      var modifiers = DomModifier.normal(dom, cellElm);\n      updateSimpleProps(modifiers, data);\n      if (hasAdvancedCellTab(editor)) {\n        updateAdvancedProps(modifiers, data);\n      }\n      Styles$1.unApplyAlign(editor, cellElm);\n      Styles$1.unApplyVAlign(editor, cellElm);\n      if (data.halign) {\n        Styles$1.applyAlign(editor, cellElm, data.halign);\n      }\n      if (data.valign) {\n        Styles$1.applyVAlign(editor, cellElm, data.valign);\n      }\n    };\n    var applyToMultiple = function (editor, cells, data) {\n      var dom = editor.dom;\n      global$1.each(cells, function (cellElm) {\n        if (data.celltype && cellElm.nodeName.toLowerCase() !== data.celltype) {\n          cellElm = dom.rename(cellElm, data.celltype);\n        }\n        var modifiers = DomModifier.ifTruthy(dom, cellElm);\n        updateSimpleProps(modifiers, data);\n        if (hasAdvancedCellTab(editor)) {\n          updateAdvancedProps(modifiers, data);\n        }\n        if (data.halign) {\n          Styles$1.applyAlign(editor, cellElm, data.halign);\n        }\n        if (data.valign) {\n          Styles$1.applyVAlign(editor, cellElm, data.valign);\n        }\n      });\n    };\n    var onSubmitCellForm = function (editor, cells, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        var applicator = cells.length === 1 ? applyToSingle : applyToMultiple;\n        applicator(editor, cells, data);\n        editor.focus();\n      });\n    };\n    var open = function (editor) {\n      var cellElm, cells = [];\n      cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n      cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n      if (!cells.length && cellElm) {\n        cells.push(cellElm);\n      }\n      cellElm = cellElm || cells[0];\n      if (!cellElm) {\n        return;\n      }\n      var cellsData = global$1.map(cells, function (cellElm) {\n        return Helpers.extractDataFromCellElement(editor, cellElm, hasAdvancedCellTab(editor));\n      });\n      var data = Helpers.getSharedValues(cellsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: CellDialogGeneralTab.getItems(editor)\n          },\n          Helpers.getAdvancedTab('cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: CellDialogGeneralTab.getItems(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells)\n      });\n    };\n    var CellDialog = { open: open };\n\n    var getClassList$1 = function (editor) {\n      var rowClassList = getRowClassList(editor);\n      var classes = Helpers.buildListItems(rowClassList, function (item) {\n        if (item.value) {\n          item.textStyle = function () {\n            return editor.formatter.getCssText({\n              block: 'tr',\n              classes: [item.value]\n            });\n          };\n        }\n      });\n      if (rowClassList.length > 0) {\n        return Option.some({\n          name: 'class',\n          type: 'selectbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Option.none();\n    };\n    var formChildren = [\n      {\n        type: 'selectbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'thead'\n          },\n          {\n            text: 'Body',\n            value: 'tbody'\n          },\n          {\n            text: 'Footer',\n            value: 'tfoot'\n          }\n        ]\n      },\n      {\n        type: 'selectbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return getClassList$1(editor).fold(function () {\n        return formChildren;\n      }, function (classes) {\n        return formChildren.concat(classes);\n      });\n    };\n    var RowDialogGeneralTab = { getItems: getItems$1 };\n\n    var switchRowType = function (dom, rowElm, toType) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldParentElm = rowElm.parentNode;\n      var parentElm = dom.select(toType, tableElm)[0];\n      if (!parentElm) {\n        parentElm = dom.create(toType);\n        if (tableElm.firstChild) {\n          if (tableElm.firstChild.nodeName === 'CAPTION') {\n            dom.insertAfter(parentElm, tableElm.firstChild);\n          } else {\n            tableElm.insertBefore(parentElm, tableElm.firstChild);\n          }\n        } else {\n          tableElm.appendChild(parentElm);\n        }\n      }\n      parentElm.appendChild(rowElm);\n      if (!oldParentElm.hasChildNodes()) {\n        dom.remove(oldParentElm);\n      }\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var dom = editor.dom;\n      var data = api.getData();\n      api.close();\n      var createModifier = rows.length === 1 ? DomModifier.normal : DomModifier.ifTruthy;\n      editor.undoManager.transact(function () {\n        global$1.each(rows, function (rowElm) {\n          if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n            switchRowType(editor.dom, rowElm, data.type);\n          }\n          var modifier = createModifier(dom, rowElm);\n          modifier.setAttrib('scope', data.scope);\n          modifier.setAttrib('class', data.class);\n          modifier.setStyle('height', addSizeSuffix(data.height));\n          if (hasAdvancedRowTab(editor)) {\n            updateAdvancedProps$1(modifier, data);\n          }\n          if (data.align !== oldData.align) {\n            Styles$1.unApplyAlign(editor, rowElm);\n            Styles$1.applyAlign(editor, rowElm, data.align);\n          }\n        });\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var dom = editor.dom;\n      var tableElm, cellElm, rowElm;\n      var rows = [];\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n      if (!tableElm) {\n        return;\n      }\n      cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n      global$1.each(tableElm.rows, function (row) {\n        global$1.each(row.cells, function (cell) {\n          if ((dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) && rows.indexOf(row) < 0) {\n            rows.push(row);\n            return false;\n          }\n        });\n      });\n      rowElm = rows[0];\n      if (!rowElm) {\n        return;\n      }\n      var rowsData = global$1.map(rows, function (rowElm) {\n        return Helpers.extractDataFromRowElement(editor, rowElm, hasAdvancedRowTab(editor));\n      });\n      var data = Helpers.getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: RowDialogGeneralTab.getItems(editor)\n          },\n          Helpers.getAdvancedTab('row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: RowDialogGeneralTab.getItems(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, rows, data)\n      });\n    };\n    var RowDialog = { open: open$1 };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge$3 = baseMerge(shallow$1);\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      percentages: true\n    };\n    var makeTable = function () {\n      return Element.fromTag('table');\n    };\n    var tableBody = function () {\n      return Element.fromTag('tbody');\n    };\n    var tableRow = function () {\n      return Element.fromTag('tr');\n    };\n    var tableHeaderCell = function () {\n      return Element.fromTag('th');\n    };\n    var tableCell = function () {\n      return Element.fromTag('td');\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = makeTable();\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      var tbody = tableBody();\n      append(table, tbody);\n      var trs = [];\n      for (var i = 0; i < rows; i++) {\n        var tr = tableRow();\n        for (var j = 0; j < columns; j++) {\n          var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n          if (j < columnHeaders) {\n            set(td, 'scope', 'row');\n          }\n          if (i < rowHeaders) {\n            set(td, 'scope', 'col');\n          }\n          append(td, Element.fromTag('br'));\n          if (renderOpts.percentages) {\n            set$1(td, 'width', 100 / columns + '%');\n          }\n          append(tr, td);\n        }\n        trs.push(tr);\n      }\n      append$1(tbody, trs);\n      return table;\n    };\n\n    var get$8 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$8(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom(), true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom());\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom());\n        });\n      });\n    };\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n      };\n      var table = render$1(rows, columns, 0, 0, options);\n      set(table, 'data-mce-id', '__mce');\n      var html = getOuter$2(table);\n      editor.insertContent(html);\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          set$1(table, 'width', get$2(table, 'width'));\n        }\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom();\n      }).getOr(null);\n    };\n    var InsertTable = { insert: insert$1 };\n\n    var getItems$2 = function (editor, hasClasses, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'selectbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = hasClasses ? [{\n          type: 'selectbox',\n          name: 'class',\n          label: 'Class',\n          items: Helpers.buildListItems(getTableClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'table',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n    var TableDialogGeneralTab = { getItems: getItems$2 };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addSizeSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addSizeSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addSizeSuffix(data.border);\n        styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addSizeSuffix(data.border),\n            'padding': addSizeSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(merge$3(getDefaultStyles(editor), styles));\n      dom.setAttribs(tableElm, merge$3(getDefaultAttributes(editor), attrs));\n    };\n    var onSubmitTableForm = function (editor, tableElm, api) {\n      var dom = editor.dom;\n      var captionElm;\n      var data = api.getData();\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = InsertTable.insert(editor, cols, rows);\n        }\n        applyDataToElement(editor, tableElm, data);\n        captionElm = dom.select('caption', tableElm)[0];\n        if (captionElm && !data.caption) {\n          dom.remove(captionElm);\n        }\n        if (!captionElm && data.caption) {\n          captionElm = dom.create('caption');\n          captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n          tableElm.insertBefore(captionElm, tableElm.firstChild);\n        }\n        if (data.align === '') {\n          Styles$1.unApplyAlign(editor, tableElm);\n        } else {\n          Styles$1.applyAlign(editor, tableElm, data.align);\n        }\n        editor.focus();\n        editor.addVisual();\n      });\n    };\n    var open$2 = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = Helpers.extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = Helpers.extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var hasClasses = getTableClassList(editor).length > 0;\n      if (hasClasses) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: TableDialogGeneralTab.getItems(editor, hasClasses, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            Helpers.getAdvancedTab('table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n    var TableDialog = { open: open$2 };\n\n    var getSelectionStartFromSelector = function (selector) {\n      return function (editor) {\n        return Option.from(editor.dom.getParent(editor.selection.getStart(), selector)).map(Element.fromDom);\n      };\n    };\n    var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n    var getSelectionStartCellOrCaption = getSelectionStartFromSelector('th,td,caption');\n\n    var each$3 = global$1.each;\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboardRows) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          var tableOpt = TableLookup.table(cellOrCaption, isRoot);\n          tableOpt.filter(not(isRoot)).each(function (table) {\n            var cursor = Element.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom(), 0);\n              rng.setEnd(cursor.dom(), 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return TableLookup.table(cell, isRoot);\n      };\n      var getSize = function (table) {\n        return {\n          width: getPixelWidth$1(table.dom()),\n          height: getPixelWidth$1(table.dom())\n        };\n      };\n      var resizeChange = function (editor, oldSize, table) {\n        var newSize = getSize(table);\n        if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n          fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n          fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n        }\n      };\n      var actOnSelection = function (execute) {\n        getSelectionStartCell(editor).each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var beforeSize = getSize(table);\n            execute(table, targets).each(function (rng) {\n              resizeChange(editor, beforeSize, table);\n              editor.selection.setRng(rng);\n              editor.focus();\n              cellSelection.clear(table);\n              removeDataStyle(table);\n            });\n          });\n        });\n      };\n      var copyRowSelection = function (execute) {\n        return getSelectionStartCell(editor).map(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var doc = Element.fromDom(editor.getDoc());\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var generators = TableFill.cellOperations(noop, doc, Option.none());\n            return CopyRows.copyRows(table, targets, generators);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute) {\n        clipboardRows.get().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell(editor).each(function (cell) {\n            getTableFromCell(cell).each(function (table) {\n              var doc = Element.fromDom(editor.getDoc());\n              var generators = TableFill.paste(doc);\n              var targets = TableTargets.pasteRows(selections, table, cell, clonedRows, generators);\n              execute(table, targets).each(function (rng) {\n                editor.selection.setRng(rng);\n                editor.focus();\n                cellSelection.clear(table);\n              });\n            });\n          });\n        });\n      };\n      each$3({\n        mceTableSplitCells: function () {\n          actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCutRow: function (grid) {\n          copyRowSelection().each(function (selection) {\n            clipboardRows.set(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyRow: function (grid) {\n          copyRowSelection().each(function (selection) {\n            clipboardRows.set(selection);\n          });\n        },\n        mceTablePasteRowBefore: function (grid) {\n          pasteOnSelection(actions.pasteRowsBefore);\n        },\n        mceTablePasteRowAfter: function (grid) {\n          pasteOnSelection(actions.pasteRowsAfter);\n        },\n        mceTableDelete: eraseTable\n      }, function (func, name) {\n        editor.addCommand(name, func);\n      });\n      each$3({\n        mceInsertTable: curry(TableDialog.open, editor, true),\n        mceTableProps: curry(TableDialog.open, editor, false),\n        mceTableRowProps: curry(RowDialog.open, editor),\n        mceTableCellProps: curry(CellDialog.open, editor)\n      }, function (func, name) {\n        editor.addCommand(name, function () {\n          func();\n        });\n      });\n    };\n    var Commands = { registerCommands: registerCommands };\n\n    var only = function (element) {\n      var parent = Option.from(element.dom().documentElement).map(Element.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var detached = function (editable, chrome) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin\n      };\n    };\n    var body$1 = function (editable, chrome) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var Event = function (fields) {\n      var struct = Immutable.apply(null, fields);\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = struct.apply(null, args);\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create$1 = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n    var Events = { create: create$1 };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = Element.fromDom(rawEvent.target);\n      var stop = function () {\n        rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) {\n          return;\n        }\n        handler(fromRawEvent(rawEvent));\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = constant(true);\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$1, handler);\n    };\n\n    var styles$1 = css('ephox-dragster');\n    var Styles$2 = { resolve: styles$1.resolve };\n\n    var Blocker = function (options) {\n      var settings = merge$3({ layerClass: Styles$2.resolve('blocker') }, options);\n      var div = Element.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$2(div, Styles$2.resolve('blocker'));\n      add$2(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var compare = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n    var extract$1 = function (event) {\n      return Option.some(Position(event.x(), event.y()));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left(), info.top());\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    function InDrag () {\n      var previous = Option.none();\n      var reset = function () {\n        previous = Option.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = Events.create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    }\n\n    function NoDrag () {\n      return {\n        onEvent: noop,\n        reset: noop\n      };\n    }\n\n    function Movement () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    }\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = Events.create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info());\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n    var Dragging = { setup: setup };\n\n    var transform$1 = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return Dragging.setup(mutation, mode, settings);\n    };\n    var Dragger = { transform: transform$1 };\n\n    var Mutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Option.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta(), event.yDelta(), t);\n        });\n      });\n      var assign = function (t) {\n        target = Option.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get$1(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var resizeBarDragging = Styles.resolve('resizer-bar-dragging');\n    var BarManager = function (wire, direction, hdirection) {\n      var mutation = BarMutation();\n      var resizing = Dragger.transform(mutation, {});\n      var hoverTable = Option.none();\n      var getResizer = function (element, type) {\n        return Option.from(get$1(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target(), 'data-row').each(function (_dataRow) {\n          var currentRow = CellUtils.getInt(event.target(), 'top');\n          set$1(event.target(), 'top', currentRow + event.yDelta() + 'px');\n        });\n        getResizer(event.target(), 'data-column').each(function (_dataCol) {\n          var currentCol = CellUtils.getInt(event.target(), 'left');\n          set$1(event.target(), 'left', currentCol + event.xDelta() + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = CellUtils.getInt(target, dir);\n        var oldX = parseInt(get$1(target, 'data-initial-' + dir), 10);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            Bars.refresh(wire, table, hdirection, direction);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, parseInt(get$2(target, dir), 10));\n        add$2(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (Bars.isRowBar(event.target())) {\n          handler(event.target(), 'top');\n        }\n        if (Bars.isColBar(event.target())) {\n          handler(event.target(), 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target()).fold(function () {\n          if (inBody(event.target())) {\n            Bars.destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Option.some(table);\n          Bars.refresh(wire, table, hdirection, direction);\n        });\n      });\n      var destroy = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        Bars.destroy(wire);\n      };\n      var refresh = function (tbl) {\n        Bars.refresh(wire, tbl, hdirection, direction);\n      };\n      var events = Events.create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy,\n        refresh: refresh,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(Bars.hide, wire),\n        showBars: curry(Bars.show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$2 = function (wire, vdirection) {\n      var hdirection = BarPositions.height;\n      var manager = BarManager(wire, vdirection, hdirection);\n      var events = Events.create({\n        beforeResize: Event(['table']),\n        afterResize: Event(['table']),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = hdirection.delta(event.delta(), event.table());\n        Adjustments.adjustHeight(event.table(), delta, event.row(), hdirection);\n        events.trigger.afterResize(event.table());\n      });\n      manager.events.startAdjust.bind(function (event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = vdirection.delta(event.delta(), event.table());\n        Adjustments.adjustWidth(event.table(), delta, event.column(), vdirection);\n        events.trigger.afterResize(event.table());\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$2 };\n\n    var createContainer = function () {\n      var container = Element.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$9 = function (editor, container) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer()) : ResizeWire.only(Element.fromDom(editor.getDoc()));\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n    var TableWire = {\n      get: get$9,\n      remove: remove$6\n    };\n\n    var calculatePercentageWidth = function (element, parent) {\n      return getPixelWidth$1(element.dom()) / getPixelWidth$1(parent.dom()) * 100 + '%';\n    };\n    var enforcePercentage = function (rawTable) {\n      var table = Element.fromDom(rawTable);\n      parent(table).map(function (parent) {\n        return calculatePercentageWidth(table, parent);\n      }).each(function (tablePercentage) {\n        set$1(table, 'width', tablePercentage);\n        each(descendants$1(table, 'tr'), function (tr) {\n          each(children(tr), function (td) {\n            set$1(td, 'width', calculatePercentageWidth(td, tr));\n          });\n        });\n      });\n    };\n    var enforcePixels = function (table) {\n      set$1(Element.fromDom(table), 'width', getPixelWidth$1(table).toString() + 'px');\n    };\n\n    var getResizeHandler = function (editor) {\n      var selectionRng = Option.none();\n      var resize = Option.none();\n      var wire = Option.none();\n      var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var getRawWidth = function (elm) {\n        var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n        return Option.from(raw).filter(function (s) {\n          return s.length > 0;\n        });\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(Element.fromDom(editor.getBody())));\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          TableWire.remove(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var direction = TableDirection(Direction.directionAt);\n        var rawWire = TableWire.get(editor);\n        wire = Option.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var sz = TableResize.create(rawWire, direction);\n          sz.on();\n          sz.events.startDrag.bind(function (event) {\n            selectionRng = Option.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table().dom();\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table();\n            var rawTable = table.dom();\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n            editor.undoManager.add();\n          });\n          resize = Option.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var tableHasPercentage = getRawWidth(targetElm).map(function (w) {\n            return percentageBasedSizeRegex.test(w);\n          }).getOr(false);\n          if (tableHasPercentage && isPixelsForced(editor)) {\n            enforcePixels(targetElm);\n          } else if (!tableHasPercentage && isPercentagesForced(editor)) {\n            enforcePercentage(targetElm);\n          }\n          startW = e.width;\n          startRawW = getRawWidth(targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = targetElm;\n          if (percentageBasedSizeRegex.test(startRawW)) {\n            var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n            var targetPercentW = e.width * percentW / startW;\n            editor.dom.setStyle(table, 'width', targetPercentW + '%');\n          } else {\n            var newCellSizes_1 = [];\n            global$1.each(table.rows, function (row) {\n              global$1.each(row.cells, function (cell) {\n                var width = editor.dom.getStyle(cell, 'width', true);\n                newCellSizes_1.push({\n                  cell: cell,\n                  width: width\n                });\n              });\n            });\n            global$1.each(newCellSizes_1, function (newCellSize) {\n              editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n              editor.dom.setAttrib(newCellSize.cell, 'width', null);\n            });\n          }\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.readonly) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$1 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$1.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$1), { none: none$1 });\n\n    var detect$4 = function (current, isRoot) {\n      return TableLookup.table(current, isRoot).bind(function (table) {\n        var all = TableLookup.cells(table);\n        var index = findIndex(all, function (x) {\n          return eq(current, x);\n        });\n        return index.map(function (ind) {\n          return {\n            index: constant(ind),\n            all: constant(all)\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index() + 1 < info.all().length ? CellLocation.middle(current, info.all()[info.index() + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index() - 1 >= 0 ? CellLocation.middle(current, info.all()[info.index() - 1]) : CellLocation.first(current);\n      });\n    };\n    var CellNavigation = {\n      next: next,\n      prev: prev\n    };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$2.before;\n    var on = adt$2.on;\n    var after$2 = adt$2.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$3 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$3.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$3.domRange;\n    var relative = adt$3.relative;\n    var exact = adt$3.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      rng.selectNodeContents(element.dom());\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$3(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Option.none();\n        }\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return Element.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n    var fromPoint$1 = function (win, x, y) {\n      var doc = Element.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return Selection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return Selection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = Element.fromDom(rng.startContainer);\n          var finish = Element.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var doSetNativeRange = function (win, rng) {\n      Option.from(win.getSelection()).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom(), soffset);\n      selection.extend(finish.dom(), foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var selection = win.getSelection();\n          if (selection.setBaseAndExtent) {\n            selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n          } else if (selection.extend) {\n            try {\n              setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n            } catch (e) {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          } else {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = Selection.getWin(selection).dom();\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$3(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$a = function (win) {\n      return getExact(win).map(function (range) {\n        return Selection.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      var selection = win.getSelection();\n      selection.removeAllRanges();\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.next(cell), lazyWire);\n    };\n    var backward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.prev(cell), lazyWire);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = Selection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions, lazyWire) {\n      return cell.fold(Option.none, Option.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return TableLookup.table(current, isRoot).bind(function (table) {\n          var targets = TableTargets.noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions, lazyWire) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = Element.fromDom(rng.startContainer);\n          TableLookup.cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n    var TabContext = { handle: handle$1 };\n\n    var create$4 = Immutable('selection', 'kill');\n    var Response = { create: create$4 };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: constant(Situ.on(start, soffset)),\n        finish: constant(Situ.on(finish, foffset))\n      };\n    };\n    var Situs = { create: create$5 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n    var Util = {\n      convertToRange: convertToRange,\n      makeSitus: makeSitus\n    };\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$5(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var detect$5 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq(start, finish)) {\n        return CellSelection.identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes().getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start(), cellSel.finish());\n            return Option.some(Response.create(Option.some(Util.makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Option.none();\n          }\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n        return newSels.boxes();\n      };\n      return CellSelection.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n    };\n    var KeySelection = {\n      sync: sync,\n      detect: detect$5,\n      update: update\n    };\n\n    var traverse = Immutable('item', 'mode');\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Option.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Option.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Option.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[0]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item())) {\n          return Option.none();\n        } else {\n          return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$2 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$2, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$2, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$2, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$2, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var point = Immutable('element', 'offset');\n    var delta = Immutable('element', 'deltaOffset');\n    var range$2 = Immutable('element', 'start', 'finish');\n    var points = Immutable('begin', 'end');\n    var text = Immutable('element', 'text');\n\n    var adt$5 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq(afterCell, beforeCell)) {\n            return DomParent.sharedOne(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$5.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$5.none('in same cell');\n          }\n        });\n      }).getOr(adt$5.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$5), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n    var inParent = Immutable('parent', 'children', 'element', 'index');\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$3(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent(), info.index());\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: constant(tgt),\n          finish: constant(tgt)\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (message) {\n        return Option.none();\n      }, function () {\n        return Option.none();\n      }, function (cell) {\n        return Option.some(point(cell, 0));\n      }, function (cell) {\n        return Option.some(point(cell, getEnd(cell)));\n      });\n    };\n    var BrTags = {\n      tryBr: tryBr,\n      process: process\n    };\n\n    var nu$3 = MixedBag([\n      'left',\n      'top',\n      'right',\n      'bottom'\n    ], []);\n    var moveDown = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() + amount,\n        right: caret.right(),\n        bottom: caret.bottom() + amount\n      });\n    };\n    var moveUp = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() - amount,\n        right: caret.right(),\n        bottom: caret.bottom() - amount\n      });\n    };\n    var moveBottomTo = function (caret, bottom) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: bottom - height,\n        right: caret.right(),\n        bottom: bottom\n      });\n    };\n    var moveTopTo = function (caret, top) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: top,\n        right: caret.right(),\n        bottom: top + height\n      });\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return nu$3({\n        left: caret.left() + xDelta,\n        top: caret.top() + yDelta,\n        right: caret.right() + xDelta,\n        bottom: caret.bottom() + yDelta\n      });\n    };\n    var getTop$1 = function (caret) {\n      return caret.top();\n    };\n    var getBottom = function (caret) {\n      return caret.bottom();\n    };\n    var toString = function (caret) {\n      return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n    };\n    var Carets = {\n      nu: nu$3,\n      moveUp: moveUp,\n      moveDown: moveDown,\n      moveBottomTo: moveBottomTo,\n      moveTopTo: moveTopTo,\n      getTop: getTop$1,\n      getBottom: getBottom,\n      translate: translate,\n      toString: toString\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Option.none();\n    };\n    var toCaret = function (rect) {\n      return Carets.nu({\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      });\n    };\n    var getElemBox = function (bridge, element) {\n      return Option.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var Rectangles = {\n      getBoxAt: getBoxAt,\n      getEntireBox: getEntireBox\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$6 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, DomStructure.isBlock).fold(constant(false), function (cell) {\n        return Rectangles.getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = Carets.moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom() - original.bottom()) < 1) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() > caret.bottom()) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() === caret.bottom()) {\n        return adt$6.retry(Carets.moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(lowerCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = Carets.moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top() - original.top()) < 1) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() < caret.top()) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() === caret.top()) {\n        return adt$6.retry(Carets.moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(higherCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var upMovement = {\n      point: Carets.getTop,\n      adjuster: adjustUp,\n      move: Carets.moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: Carets.getBottom,\n      adjuster: adjustDown,\n      move: Carets.moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Option.some(caret);\n      }\n      if (isAtTable(bridge, caret.left(), movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n        return guess.start().fold(Option.none, function (element) {\n          return Rectangles.getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Option.some(caret);\n          });\n        }, Option.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Option.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Option.some(-movement.point(adjusted));\n      } else {\n        return Option.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var platform$2 = detect$3();\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return BrTags.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n          return Option.some(point(sel.finish(), sel.foffset()));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n          return BrTags.process(analysis);\n        });\n      });\n    };\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Option.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Option.none();\n        }, function () {\n          return Option.some(situs);\n        }, function (cell) {\n          if (eq(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, Carets.moveUp, direction);\n          } else {\n            return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, Carets.moveDown, direction);\n          } else {\n            return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      if (platform$2.browser.isChrome() || platform$2.browser.isSafari() || platform$2.browser.isFirefox() || platform$2.browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (platform$2.browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Option.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n    var TableKeys = { handle: handle$2 };\n\n    var detection = detect$3();\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Option.none();\n          }\n          return TableKeys.handle(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish(), 'td,th', isRoot).map(function (finish) {\n              return {\n                start: constant(start),\n                finish: constant(finish),\n                range: constant(range)\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detection.browser.isIE()) {\n        return Option.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range();\n            return Response.create(Option.some(Util.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Option.some(Util.makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Option.some(Util.makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return KeySelection.detect(container, isRoot, info.start(), info.finish(), selectRange);\n      });\n    };\n    var VerticalMovement = {\n      navigate: navigate,\n      select: select,\n      firstUpCheck: firstUpCheck,\n      lastDownCheck: lastDownCheck\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    function MouseSelection (bridge, container, isRoot, annotations) {\n      var cursor = Option.none();\n      var clearState = function () {\n        cursor = Option.none();\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        cursor = findCell(event.target(), isRoot);\n      };\n      var mouseover = function (event) {\n        cursor.each(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target(), isRoot).each(function (finish) {\n            CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes().getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mouseup = function (_event) {\n        cursor.each(clearState);\n      };\n      return {\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    }\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n    var KeyDirection = {\n      down: down,\n      up: up\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var SelectionKeys = {\n      ltr: {\n        isBackward: isKey(37),\n        isForward: isKey(39)\n      },\n      rtl: {\n        isBackward: isKey(39),\n        isForward: isKey(37)\n      },\n      isUp: isUp,\n      isDown: isDown,\n      isNavigation: isNavigation\n    };\n\n    var toRaw = function (sr) {\n      return {\n        left: sr.left(),\n        top: sr.top(),\n        right: sr.right(),\n        bottom: sr.bottom(),\n        width: sr.width(),\n        height: sr.height()\n      };\n    };\n    var Rect = { toRaw: toRaw };\n\n    var isSafari = detect$3().browser.isSafari();\n    var get$b = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollBy(x, y);\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return Element.fromPoint(Element.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom().getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = Selection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel).map(Rect.toRaw);\n      };\n      var getSelection = function () {\n        return get$a(win).map(function (exactAdt) {\n          return Util.convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = Selection.relative(situs.start(), situs.finish());\n        return Util.convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start(), exact.soffset(), exact.finish(), exact.foffset());\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$a(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$b(Element.fromDom(win.document));\n        return pos.top();\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, Element.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = Immutable('rows', 'cols');\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Option.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw();\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.down, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.up, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isDown(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.down, finish, start, VerticalMovement.lastDownCheck);\n          } else if (SelectionKeys.isUp(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.up, finish, start, VerticalMovement.firstUpCheck);\n          } else {\n            return Option.none;\n          }\n        }, function (selected) {\n          var update = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return KeySelection.update(delta.rows(), delta.cols(), container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return CellSelection.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                  var relative = SelectionKeys.isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first(), 0), relative(edges.table()));\n                  annotations.clear(container);\n                  return Response.create(Option.none(), true);\n                });\n              }, function (_) {\n                return Option.some(Response.create(Option.none(), true));\n              });\n            };\n          };\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return update([rc(+1, 0)]);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return update([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (SelectionKeys.isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Option.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          var realEvent = event.raw();\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Option.none();\n          }\n          if (SelectionKeys.isNavigation(keycode)) {\n            return KeySelection.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Option.none();\n          }\n        }, Option.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes().getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n    var InputHandlers = {\n      mouse: mouse,\n      keyboard: keyboard,\n      external: external\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$2(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected());\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected(),\n        ephemera.lastSelected(),\n        ephemera.firstSelected()\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$2(start, ephemera.firstSelected());\n        add$2(finish, ephemera.lastSelected());\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected());\n        remove(element, ephemera.firstSelected());\n        remove(element, ephemera.lastSelected());\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected(), '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected(), '1');\n        set(finish, ephemera.lastSelected(), '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells, generators) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row() + 1);\n      var upDetails = toDetailList(upGrid, generators);\n      return bind(upDetails, function (detail) {\n        var slicedCells = detail.cells().slice(0, selectedCells[selectedCells.length - 1].column() + 1);\n        return map(slicedCells, function (cell) {\n          return cell.element();\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells, generators) {\n      var downGrid = grid.slice(selectedCells[0].row() + selectedCells[0].rowspan() - 1, grid.length);\n      var downDetails = toDetailList(downGrid, generators);\n      return bind(downDetails, function (detail) {\n        var slicedCells = detail.cells().slice(selectedCells[0].column() + selectedCells[0].colspan() - 1, +detail.cells().length);\n        return map(slicedCells, function (cell) {\n          return cell.element();\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var details = onCells(house, target);\n      return details.map(function (selectedCells) {\n        var grid = Transitions.toGrid(house, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells, generators);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells, generators);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n    var OtherCells = { getOtherCells: getOtherCells };\n\n    var hasInternalTarget = function (e) {\n      return has$2(Element.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection$1 (editor, lazyResize, selectionTargets) {\n      var handlerStruct = MixedBag([\n        'mousedown',\n        'mouseover',\n        'mouseup',\n        'keyup',\n        'keydown'\n      ], []);\n      var handlers = Option.none();\n      var cloneFormats = getCloneElements(editor);\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = TableLookup.table(start);\n          tableOpt.each(function (table) {\n            var doc = Element.fromDom(editor.getDoc());\n            var generators = TableFill.cellOperations(noop, doc, cloneFormats);\n            var otherCells = OtherCells.getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(Ephemera, onSelection, onClear);\n      editor.on('init', function (e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = Element.fromDom(sel.getStart());\n          var end = Element.fromDom(sel.getEnd());\n          var shared = DomParent.sharedOne(TableLookup.table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = InputHandlers.mouse(win, body, isRoot, annotations);\n        var keyHandlers = InputHandlers.keyboard(win, body, isRoot, annotations);\n        var external = InputHandlers.external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw().shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          external(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill()) {\n            event.kill();\n          }\n          response.selection().each(function (ns) {\n            var relative = Selection.relative(ns.start(), ns.finish());\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          if (wrappedEvent.raw().shiftKey && SelectionKeys.isNavigation(wrappedEvent.raw().which)) {\n            var rng = editor.selection.getRng();\n            var start = Element.fromDom(rng.startContainer);\n            var end = Element.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          lazyResize().each(function (resize) {\n            resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var startContainer = Element.fromDom(editor.selection.getStart());\n          var start = Element.fromDom(rng.startContainer);\n          var end = Element.fromDom(rng.endContainer);\n          var direction = Direction.directionAt(startContainer).isRtl() ? SelectionKeys.rtl : SelectionKeys.ltr;\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            resize.showBars();\n          });\n        };\n        var isMouseEvent = function (event) {\n          return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n        };\n        var wrapEvent = function (event) {\n          var target = Element.fromDom(event.target);\n          var stop = function () {\n            event.stopPropagation();\n          };\n          var prevent = function () {\n            event.preventDefault();\n          };\n          var kill = compose(prevent, stop);\n          return {\n            target: constant(target),\n            x: constant(isMouseEvent(event) ? event.x : null),\n            y: constant(isMouseEvent(event) ? event.y : null),\n            stop: stop,\n            prevent: prevent,\n            kill: kill,\n            raw: constant(event)\n          };\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(wrapEvent(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(wrapEvent(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(wrapEvent(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(Element.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = Element.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n        handlers = Option.some(handlerStruct({\n          mousedown: mouseDown,\n          mouseover: mouseOver,\n          mouseup: mouseUp,\n          keyup: keyup,\n          keydown: keydown\n        }));\n      });\n      var destroy = function () {\n        handlers.each(function (handlers) {\n        });\n      };\n      return {\n        clear: annotations.clear,\n        destroy: destroy\n      };\n    }\n\n    var Selections = function (editor) {\n      var get = function () {\n        var body = getBody$1(editor);\n        return TableSelection.retrieve(body, Ephemera.selectedSelector()).fold(function () {\n          if (editor.selection.getStart() === undefined) {\n            return SelectionTypes.none();\n          } else {\n            return SelectionTypes.single(editor.selection);\n          }\n        }, function (cells) {\n          return SelectionTypes.multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Option.none());\n      var changeHandlers = Cell([]);\n      var findTargets = function () {\n        return getSelectionStartCellOrCaption(editor).bind(function (cellOrCaption) {\n          var table = TableLookup.table(cellOrCaption);\n          return table.map(function (table) {\n            if (name(cellOrCaption) === 'caption') {\n              return TableTargets.notCell(cellOrCaption);\n            } else {\n              return TableTargets.forMenu(selections, table, cellOrCaption);\n            }\n          });\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        each(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var onSetup = function (api, isDisabled) {\n        var handler = function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        };\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return name(targets.element()) === 'caption';\n        });\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (targets) {\n          return targets.mergable().isNone();\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (targets) {\n          return targets.unmergable().isNone();\n        });\n      };\n      editor.on('NodeChange TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        targets: function () {\n          return targets.get();\n        }\n      };\n    };\n\n    var addButtons = function (editor, selectionTargets) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        onAction: cmd('mceTableCutRow'),\n        icon: 'temporary-placeholder',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        onAction: cmd('mceTableCopyRow'),\n        icon: 'temporary-placeholder',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        icon: 'temporary-placeholder',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        icon: 'temporary-placeholder',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n    var Buttons = {\n      addButtons: addButtons,\n      addToolbars: addToolbars\n    };\n\n    var addMenuItems = function (editor, selectionTargets) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (_a) {\n        var numRows = _a.numRows, numColumns = _a.numColumns;\n        editor.undoManager.transact(function () {\n          InsertTable.insert(editor, numColumns, numRows);\n        });\n        editor.addVisual();\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      var rowItems = [\n        {\n          type: 'menuitem',\n          text: 'Insert row before',\n          icon: 'table-insert-row-above',\n          onAction: cmd('mceTableInsertRowBefore'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Insert row after',\n          icon: 'table-insert-row-after',\n          onAction: cmd('mceTableInsertRowAfter'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Delete row',\n          icon: 'table-delete-row',\n          onAction: cmd('mceTableDeleteRow'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Row properties',\n          icon: 'table-row-properties',\n          onAction: cmd('mceTableRowProps'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        { type: 'separator' },\n        {\n          type: 'menuitem',\n          text: 'Cut row',\n          onAction: cmd('mceTableCutRow'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Copy row',\n          onAction: cmd('mceTableCopyRow'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Paste row before',\n          onAction: cmd('mceTablePasteRowBefore'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Paste row after',\n          onAction: cmd('mceTablePasteRowAfter'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        }\n      ];\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: function () {\n          return rowItems;\n        }\n      };\n      var columnItems = [\n        {\n          type: 'menuitem',\n          text: 'Insert column before',\n          icon: 'table-insert-column-before',\n          onAction: cmd('mceTableInsertColBefore'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Insert column after',\n          icon: 'table-insert-column-after',\n          onAction: cmd('mceTableInsertColAfter'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Delete column',\n          icon: 'table-delete-column',\n          onAction: cmd('mceTableDeleteCol'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        }\n      ];\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: function () {\n          return columnItems;\n        }\n      };\n      var cellItems = [\n        {\n          type: 'menuitem',\n          text: 'Cell properties',\n          icon: 'table-cell-properties',\n          onAction: cmd('mceTableCellProps'),\n          onSetup: selectionTargets.onSetupCellOrRow\n        },\n        {\n          type: 'menuitem',\n          text: 'Merge cells',\n          icon: 'table-merge-cells',\n          onAction: cmd('mceTableMergeCells'),\n          onSetup: selectionTargets.onSetupMergeable\n        },\n        {\n          type: 'menuitem',\n          text: 'Split cell',\n          icon: 'table-split-cells',\n          onAction: cmd('mceTableSplitCells'),\n          onSetup: selectionTargets.onSetupUnmergeable\n        }\n      ];\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: function () {\n          return cellItems;\n        }\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(function () {\n            return '';\n          }, function (targets) {\n            if (name(targets.element()) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n    };\n    var MenuItems = { addMenuItems: addMenuItems };\n\n    var getClipboardRows = function (clipboardRows) {\n      return clipboardRows.get().fold(function () {\n        return;\n      }, function (rows) {\n        return map(rows, function (row) {\n          return row.dom();\n        });\n      });\n    };\n    var setClipboardRows = function (rows, clipboardRows) {\n      var sugarRows = map(rows, Element.fromDom);\n      clipboardRows.set(Option.from(sugarRows));\n    };\n    var getApi = function (editor, clipboardRows, resizeHandler, selectionTargets) {\n      return {\n        insertTable: function (columns, rows) {\n          return InsertTable.insert(editor, columns, rows);\n        },\n        setClipboardRows: function (rows) {\n          return setClipboardRows(rows, clipboardRows);\n        },\n        getClipboardRows: function () {\n          return getClipboardRows(clipboardRows);\n        },\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    function Plugin(editor) {\n      var selections = Selections(editor);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, resizeHandler.lazyWire);\n      var clipboardRows = Cell(Option.none());\n      Commands.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n      Clipboard.registerEvents(editor, selections, actions, cellSelection);\n      MenuItems.addMenuItems(editor, selectionTargets);\n      Buttons.addButtons(editor, selectionTargets);\n      Buttons.addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(Ephemera.firstSelected());\n        editor.serializer.addTempAttr(Ephemera.lastSelected());\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          TabContext.handle(e, editor, actions, resizeHandler.lazyWire);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n        cellSelection.destroy();\n      });\n      return getApi(editor, clipboardRows, resizeHandler, selectionTargets);\n    }\n    function Plugin$1 () {\n      global.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}(window));\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var Settings = {\n      assumeExternalTargets: assumeExternalTargets,\n      hasContextToolbar: hasContextToolbar,\n      getLinkList: getLinkList,\n      getDefaultLinkTarget: getDefaultLinkTarget,\n      getTargetList: getTargetList,\n      getRelList: getRelList,\n      getLinkClassList: getLinkClassList,\n      shouldShowLinkTitle: shouldShowLinkTitle,\n      allowUnsafeLinkTarget: allowUnsafeLinkTarget,\n      useQuickLink: useQuickLink\n    };\n\n    var appendClickRemove = function (link, evt) {\n      domGlobals.document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      domGlobals.document.body.removeChild(link);\n    };\n    var open = function (url) {\n      var link = domGlobals.document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = domGlobals.document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n    var OpenUrl = { open: open };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$3.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$3.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var isLink = function (elm) {\n      return elm && elm.nodeName === 'A' && !!elm.href;\n    };\n    var hasLinks = function (elements) {\n      return global$3.grep(elements, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (html) {\n      if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n        return false;\n      }\n      return true;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      return foldl([\n        'title',\n        'rel',\n        'class',\n        'target'\n      ], function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(Settings.getRelList(editor).length > 0) && Settings.allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Option.from(newLinkAttrs.target).isNone() && Settings.getTargetList(editor) === false) {\n        newLinkAttrs.target = Settings.getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, Settings.assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (anchorElm.hasOwnProperty('innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var link = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlink = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          var anchorElm = editor.dom.getParent(node, 'a[href]', editor.getBody());\n          if (anchorElm) {\n            editor.dom.remove(anchorElm, true);\n          }\n        }\n        editor.focus();\n      });\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n    var Utils = {\n      link: link,\n      unlink: unlink,\n      isLink: isLink,\n      hasLinks: hasLinks,\n      getHref: getHref,\n      isOnlyTextSelected: isOnlyTextSelected,\n      getAnchorElement: getAnchorElement,\n      getAnchorText: getAnchorText,\n      applyRelTargetRules: applyRelTargetRules,\n      hasProtocol: hasProtocol\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$3.each(list, function (item) {\n        var text = isString(item.text) ? item.text : isString(item.title) ? item.title : '';\n        if (item.menu !== undefined) ; else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Option.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'selectbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        return Option.some(item).filter(function (i) {\n          return i.value === value;\n        });\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Option.none();\n    };\n    var findCatalog = function (settings, fieldName) {\n      if (fieldName === 'link') {\n        return settings.catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return settings.catalogs.anchor;\n      } else {\n        return Option.none();\n      }\n    };\n    var init = function (initialData, linkSettings) {\n      var persistentText = Cell(initialData.text);\n      var onUrlChange = function (data) {\n        if (persistentText.get().length <= 0) {\n          var urlText = data.url.meta.text !== undefined ? data.url.meta.text : data.url.value;\n          return Option.some({ text: urlText });\n        } else {\n          return Option.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkSettings, change.name).getOr([]);\n        return getDelta(persistentText.get(), change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        if (change.name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], change.name)) {\n          return onCatalogChange(getData(), change);\n        } else if (change.name === 'text') {\n          persistentText.set(getData().text);\n          return Option.none();\n        } else {\n          return Option.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$4.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('//') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Option.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Option.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !Utils.hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www[\\.|\\d\\.]/i.test(url);\n        return suggestProtocol ? Option.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required http:// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: 'http://' + url });\n          }\n        }) : Option.none();\n      };\n    };\n    var preprocess = function (editor, assumeExternalTargets, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets)\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return Future.pure(data);\n      }, function (transform) {\n        return Future.nu(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Option.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Option.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = Settings.getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Option.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Option.some(JSON.parse(text));\n      } catch (err) {\n        return Option.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = Settings.getLinkList(editor);\n      return Future.nu(function (callback) {\n        if (isString(linkList)) {\n          global$5.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Option.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Option.some(output));\n          });\n        } else {\n          callback(Option.from(linkList));\n        }\n      }).map(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            return [{\n                text: 'None',\n                value: ''\n              }].concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = Settings.getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = initialTarget.is('_blank');\n        var enforceSafe = Settings.allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return Utils.applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Option.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = Settings.getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Option.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Option.none();\n      }\n      return Option.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Option.some(val) : Option.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = Utils.isOnlyTextSelected(editor.selection.getContent());\n      var text = onlyText ? Option.some(Utils.getAnchorText(editor.selection, anchor)) : Option.none();\n      var url = anchor ? Option.some(dom.getAttrib(anchor, 'href')) : Option.none();\n      var target = anchor ? Option.from(dom.getAttrib(anchor, 'target')) : Option.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).map(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Option.from(linkNode),\n          flags: { titleEnabled: Settings.shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info, assumeExternalTargets) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          Utils.unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Option.from(data[key]).filter(function (value) {\n            return !info.anchor[key].is(value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : function () {\n          }\n        };\n        DialogConfirms.preprocess(editor, assumeExternalTargets, changedData).get(function (pData) {\n          Utils.link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = Utils.getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      return {\n        url: {\n          value: info.anchor.url.getOr(''),\n          meta: {\n            attach: function () {\n            },\n            text: info.anchor.url.fold(function () {\n              return '';\n            }, function () {\n              return info.anchor.text.getOr('');\n            }),\n            original: { value: info.anchor.url.getOr('') }\n          }\n        },\n        text: info.anchor.text.getOr(''),\n        title: info.anchor.title.getOr(''),\n        anchor: info.anchor.url.getOr(''),\n        link: info.anchor.url.getOr(''),\n        rel: info.anchor.rel.getOr(''),\n        target: info.anchor.target.or(defaultTarget).getOr(''),\n        linkClass: info.anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Option.from(Settings.getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var dialogDelta = DialogChanges.init(initialData, settings);\n      var catalogs = settings.catalogs;\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.map(function (info) {\n        var onSubmit = handleSubmit(editor, info, Settings.assumeExternalTargets(editor));\n        return makeDialog(info, onSubmit, editor);\n      }).get(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n    var Dialog = { open: open$1 };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = Utils.getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          OpenUrl.open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        Dialog.open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var leftClickedOnAHref = function (editor) {\n      return function (elm) {\n        var sel, rng, node;\n        if (Settings.hasContextToolbar(editor) && Utils.isLink(elm)) {\n          sel = editor.selection;\n          rng = sel.getRng();\n          node = rng.startContainer;\n          if (node.nodeType === 3 && sel.isCollapsed() && rng.startOffset > 0 && rng.startOffset < node.data.length) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$2.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var nodeChangeHandler = function (e) {\n          return api.setActive(!editor.readonly && !!Utils.getAnchorElement(editor, e.element));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        api.setDisabled(!Utils.hasLinks(editor.dom.getParents(editor.selection.getStart())));\n        var nodeChangeHandler = function (e) {\n          return api.setDisabled(!Utils.hasLinks(e.parents));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var Actions = {\n      openDialog: openDialog,\n      gotoSelectedLink: gotoSelectedLink,\n      leftClickedOnAHref: leftClickedOnAHref,\n      setupGotoLinks: setupGotoLinks,\n      toggleActiveState: toggleActiveState,\n      toggleEnabledState: toggleEnabledState\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (Settings.useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          Actions.openDialog(editor)();\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n    var Keyboard = { setup: setup };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: Actions.openDialog(editor),\n        onSetup: Actions.toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: Actions.gotoSelectedLink(editor),\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return Utils.unlink(editor);\n        },\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: Actions.gotoSelectedLink(editor),\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: Actions.openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return Utils.unlink(editor);\n        },\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return Utils.hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!Utils.getAnchorElement(editor, node));\n        return function () {\n        };\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: Actions.toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!Utils.getAnchorElement(editor, node) && Settings.hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = Utils.getAnchorElement(editor);\n          return !!elm ? Utils.getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!Utils.getAnchorElement(editor, node));\n              return Actions.toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var anchor = Utils.getAnchorElement(editor);\n              var value = formApi.getValue();\n              if (!anchor) {\n                var attachState = {\n                  href: value,\n                  attach: function () {\n                  }\n                };\n                var onlyText = Utils.isOnlyTextSelected(editor.selection.getContent());\n                var text = onlyText ? Option.some(Utils.getAnchorText(editor.selection, anchor)).filter(function (t) {\n                  return t.length > 0;\n                }).or(Option.from(value)) : Option.none();\n                Utils.link(editor, attachState, {\n                  href: value,\n                  text: text,\n                  title: Option.none(),\n                  rel: Option.none(),\n                  target: Option.none(),\n                  class: Option.none()\n                });\n                formApi.hide();\n              } else {\n                editor.dom.setAttrib(anchor, 'href', value);\n                collapseSelectionToEnd(editor);\n                formApi.hide();\n              }\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              Utils.unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              Actions.gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n    var Controls = {\n      setupButtons: setupButtons,\n      setupMenuItems: setupMenuItems,\n      setupContextMenu: setupContextMenu,\n      setupContextToolbars: setupContextToolbars\n    };\n\n    function Plugin () {\n      global$1.add('link', function (editor) {\n        Controls.setupButtons(editor);\n        Controls.setupMenuItems(editor);\n        Controls.setupContextMenu(editor);\n        Controls.setupContextToolbars(editor);\n        Actions.setupGotoLinks(editor);\n        Commands.register(editor);\n        Keyboard.setup(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var wrap = function (delegate) {\n      var toCached = function () {\n        return wrap(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = domGlobals.setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              domGlobals.clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$2 = function (worker) {\n      return wrap(Future.nu(worker));\n    };\n    var value$1 = function (value) {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    var fromResult = function (result) {\n      return wrap(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$2(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$2,\n      wrap: wrap,\n      pure: value$1,\n      value: value$1,\n      error: error$1,\n      fromResult: fromResult,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var makeItems = function (info) {\n      var imageUrl = {\n        name: 'src',\n        type: 'urlinput',\n        filetype: 'image',\n        label: 'Source'\n      };\n      var imageList = info.imageList.map(function (items) {\n        return {\n          name: 'images',\n          type: 'selectbox',\n          label: 'Image list',\n          items: items\n        };\n      });\n      var imageDescription = {\n        name: 'alt',\n        type: 'input',\n        label: 'Image description'\n      };\n      var imageTitle = {\n        name: 'title',\n        type: 'input',\n        label: 'Image title'\n      };\n      var imageDimensions = {\n        name: 'dimensions',\n        type: 'sizeinput'\n      };\n      var classList = info.classList.map(function (items) {\n        return {\n          name: 'classes',\n          type: 'selectbox',\n          label: 'Class',\n          items: items\n        };\n      });\n      var caption = {\n        type: 'label',\n        label: 'Caption',\n        items: [{\n            type: 'checkbox',\n            name: 'caption',\n            label: 'Show caption'\n          }]\n      };\n      return flatten([\n        [imageUrl],\n        imageList.toArray(),\n        info.hasDescription ? [imageDescription] : [],\n        info.hasImageTitle ? [imageTitle] : [],\n        info.hasDimensions ? [imageDimensions] : [],\n        [{\n            type: 'grid',\n            columns: 2,\n            items: flatten([\n              classList.toArray(),\n              info.hasImageCaption ? [caption] : []\n            ])\n          }]\n      ]);\n    };\n    var makeTab = function (info) {\n      return {\n        title: 'General',\n        name: 'general',\n        items: makeItems(info)\n      };\n    };\n    var MainTab = {\n      makeTab: makeTab,\n      makeItems: makeItems\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var hasDimensions = function (editor) {\n      return editor.getParam('image_dimensions', true, 'boolean');\n    };\n    var hasAdvTab = function (editor) {\n      return editor.getParam('image_advtab', false, 'boolean');\n    };\n    var hasUploadTab = function (editor) {\n      return editor.getParam('image_uploadtab', true, 'boolean');\n    };\n    var getPrependUrl = function (editor) {\n      return editor.getParam('image_prepend_url', '', 'string');\n    };\n    var getClassList = function (editor) {\n      return editor.getParam('image_class_list');\n    };\n    var hasDescription = function (editor) {\n      return editor.getParam('image_description', true, 'boolean');\n    };\n    var hasImageTitle = function (editor) {\n      return editor.getParam('image_title', false, 'boolean');\n    };\n    var hasImageCaption = function (editor) {\n      return editor.getParam('image_caption', false, 'boolean');\n    };\n    var getImageList = function (editor) {\n      return editor.getParam('image_list', false);\n    };\n    var hasUploadUrl = function (editor) {\n      return !!getUploadUrl(editor);\n    };\n    var hasUploadHandler = function (editor) {\n      return !!getUploadHandler(editor);\n    };\n    var getUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', undefined, 'function');\n    };\n    var getUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', undefined, 'string');\n    };\n    var getUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var Settings = {\n      hasDimensions: hasDimensions,\n      hasUploadTab: hasUploadTab,\n      hasAdvTab: hasAdvTab,\n      getPrependUrl: getPrependUrl,\n      getClassList: getClassList,\n      hasDescription: hasDescription,\n      hasImageTitle: hasImageTitle,\n      hasImageCaption: hasImageCaption,\n      getImageList: getImageList,\n      hasUploadUrl: hasUploadUrl,\n      hasUploadHandler: hasUploadHandler,\n      getUploadUrl: getUploadUrl,\n      getUploadHandler: getUploadHandler,\n      getUploadBasePath: getUploadBasePath,\n      getUploadCredentials: getUploadCredentials\n    };\n\n    var parseIntAndGetMax = function (val1, val2) {\n      return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    };\n    var getImageSize = function (url, callback) {\n      var img = domGlobals.document.createElement('img');\n      var done = function (dimensions) {\n        if (img.parentNode) {\n          img.parentNode.removeChild(img);\n        }\n        callback(dimensions);\n      };\n      img.onload = function () {\n        var width = parseIntAndGetMax(img.width, img.clientWidth);\n        var height = parseIntAndGetMax(img.height, img.clientHeight);\n        var dimensions = {\n          width: width,\n          height: height\n        };\n        done(Result.value(dimensions));\n      };\n      img.onerror = function () {\n        done(Result.error('Failed to get image dimensions for: ' + url));\n      };\n      var style = img.style;\n      style.visibility = 'hidden';\n      style.position = 'fixed';\n      style.bottom = style.left = '0px';\n      style.width = style.height = 'auto';\n      domGlobals.document.body.appendChild(img);\n      img.src = url;\n    };\n    var removePixelSuffix = function (value) {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    var addPixelSuffix = function (value) {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    var mergeMargins = function (css) {\n      if (css.margin) {\n        var splitMargin = String(css.margin).split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    var createImageList = function (editor, callback) {\n      var imageList = Settings.getImageList(editor);\n      if (typeof imageList === 'string') {\n        global$4.send({\n          url: imageList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else if (typeof imageList === 'function') {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    var waitLoadImage = function (editor, data, imgElm) {\n      var selectImage = function () {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      };\n      imgElm.onload = function () {\n        if (!data.width && !data.height && Settings.hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: String(imgElm.clientWidth),\n            height: String(imgElm.clientHeight)\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    var blobToDataUri = function (blob) {\n      return new global$3(function (resolve, reject) {\n        var reader = new domGlobals.FileReader();\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n        reader.onerror = function () {\n          reject(reader.error.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var isPlaceholderImage = function (imgElm) {\n      return imgElm.nodeName === 'IMG' && (imgElm.hasAttribute('data-mce-object') || imgElm.hasAttribute('data-mce-placeholder'));\n    };\n    var Utils = {\n      getImageSize: getImageSize,\n      removePixelSuffix: removePixelSuffix,\n      addPixelSuffix: addPixelSuffix,\n      mergeMargins: mergeMargins,\n      createImageList: createImageList,\n      waitLoadImage: waitLoadImage,\n      blobToDataUri: blobToDataUri,\n      isPlaceholderImage: isPlaceholderImage\n    };\n\n    var DOM = global$2.DOM;\n    var getHspace = function (image) {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return Utils.removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    var getVspace = function (image) {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return Utils.removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    var getBorder = function (image) {\n      if (image.style.borderWidth) {\n        return Utils.removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    var getAttrib = function (image, name) {\n      if (image.hasAttribute(name)) {\n        return image.getAttribute(name);\n      } else {\n        return '';\n      }\n    };\n    var getStyle = function (image, name) {\n      return image.style[name] ? image.style[name] : '';\n    };\n    var hasCaption = function (image) {\n      return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    };\n    var setAttrib = function (image, name, value) {\n      image.setAttribute(name, value);\n    };\n    var wrapInFigure = function (image) {\n      var figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    var removeFigure = function (image) {\n      var figureElm = image.parentNode;\n      DOM.insertAfter(image, figureElm);\n      DOM.remove(figureElm);\n    };\n    var toggleCaption = function (image) {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    var normalizeStyle = function (image, normalizeCss) {\n      var attrValue = image.getAttribute('style');\n      var value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    var setSize = function (name, normalizeCss) {\n      return function (image, name, value) {\n        if (image.style[name]) {\n          image.style[name] = Utils.addPixelSuffix(value);\n          normalizeStyle(image, normalizeCss);\n        } else {\n          setAttrib(image, name, value);\n        }\n      };\n    };\n    var getSize = function (image, name) {\n      if (image.style[name]) {\n        return Utils.removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    var setHspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    var setVspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    var setBorder = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    var setBorderStyle = function (image, value) {\n      image.style.borderStyle = value;\n    };\n    var getBorderStyle = function (image) {\n      return getStyle(image, 'borderStyle');\n    };\n    var isFigure = function (elm) {\n      return elm.nodeName === 'FIGURE';\n    };\n    var isImage = function (elm) {\n      return elm.nodeName === 'IMG';\n    };\n    var defaultData = function () {\n      return {\n        src: '',\n        alt: '',\n        title: '',\n        width: '',\n        height: '',\n        class: '',\n        style: '',\n        caption: false,\n        hspace: '',\n        vspace: '',\n        border: '',\n        borderStyle: ''\n      };\n    };\n    var getStyleValue = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      setAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss(image.getAttribute('style'));\n    };\n    var create = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      write(normalizeCss, merge(data, { caption: false }), image);\n      setAttrib(image, 'alt', data.alt);\n      if (data.caption) {\n        var figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    var read = function (normalizeCss, image) {\n      return {\n        src: getAttrib(image, 'src'),\n        alt: getAttrib(image, 'alt'),\n        title: getAttrib(image, 'title'),\n        width: getSize(image, 'width'),\n        height: getSize(image, 'height'),\n        class: getAttrib(image, 'class'),\n        style: normalizeCss(getAttrib(image, 'style')),\n        caption: hasCaption(image),\n        hspace: getHspace(image),\n        vspace: getVspace(image),\n        border: getBorder(image),\n        borderStyle: getStyle(image, 'borderStyle')\n      };\n    };\n    var updateProp = function (image, oldData, newData, name, set) {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, newData[name]);\n      }\n    };\n    var normalized = function (set, normalizeCss) {\n      return function (image, name, value) {\n        set(image, value);\n        normalizeStyle(image, normalizeCss);\n      };\n    };\n    var write = function (normalizeCss, newData, image) {\n      var oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n        return toggleCaption(image);\n      });\n      updateProp(image, oldData, newData, 'src', setAttrib);\n      updateProp(image, oldData, newData, 'alt', setAttrib);\n      updateProp(image, oldData, newData, 'title', setAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', setAttrib);\n      updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n        return setAttrib(image, 'style', value);\n      }, normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n    };\n\n    var normalizeCss = function (editor, cssText) {\n      var css = editor.dom.styles.parse(cssText);\n      var mergedCss = Utils.mergeMargins(css);\n      var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    var getSelectedImage = function (editor) {\n      var imgElm = editor.selection.getNode();\n      var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || Utils.isPlaceholderImage(imgElm))) {\n        return null;\n      }\n      return imgElm;\n    };\n    var splitTextBlock = function (editor, figure) {\n      var dom = editor.dom;\n      var textBlock = dom.getParent(figure.parentNode, function (node) {\n        return editor.schema.getTextBlockElements()[node.nodeName];\n      }, editor.getBody());\n      if (textBlock) {\n        return dom.split(textBlock, figure);\n      } else {\n        return figure;\n      }\n    };\n    var readImageDataFromSelection = function (editor) {\n      var image = getSelectedImage(editor);\n      return image ? read(function (css) {\n        return normalizeCss(editor, css);\n      }, image) : defaultData();\n    };\n    var insertImageAtCaret = function (editor, data) {\n      var elm = create(function (css) {\n        return normalizeCss(editor, css);\n      }, data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        var figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    var syncSrcAttr = function (editor, image) {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    var deleteImage = function (editor, image) {\n      if (image) {\n        var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    var writeImageDataToSelection = function (editor, data) {\n      var image = getSelectedImage(editor);\n      write(function (css) {\n        return normalizeCss(editor, css);\n      }, data, image);\n      syncSrcAttr(editor, image);\n      if (isFigure(image.parentNode)) {\n        var figure = image.parentNode;\n        splitTextBlock(editor, figure);\n        editor.selection.select(image.parentNode);\n      } else {\n        editor.selection.select(image);\n        Utils.waitLoadImage(editor, data, image);\n      }\n    };\n    var insertOrUpdateImage = function (editor, data) {\n      var image = getSelectedImage(editor);\n      if (image) {\n        if (data.src) {\n          writeImageDataToSelection(editor, data);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (data.src) {\n        insertImageAtCaret(editor, data);\n      }\n    };\n\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = isString(item.text) ? item.text : isString(item.title) ? item.title : '';\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizer = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        if (list) {\n          return Option.from(list).map(function (list) {\n            return sanitizeList(list, extracter);\n          });\n        } else {\n          return Option.none();\n        }\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizer(getValue)(list);\n    };\n    var isGroup = function (item) {\n      return Object.prototype.hasOwnProperty.call(item, 'items');\n    };\n    var findEntryDelegate = function (list, value) {\n      return findMap(list, function (item) {\n        if (isGroup(item)) {\n          return findEntryDelegate(item.items, value);\n        } else if (item.value === value) {\n          return Option.some(item);\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var findEntry = function (optList, value) {\n      return optList.bind(function (list) {\n        return findEntryDelegate(list, value);\n      });\n    };\n    var ListUtils = {\n      sanitizer: sanitizer,\n      sanitize: sanitize,\n      findEntry: findEntry\n    };\n\n    var pathJoin = function (path1, path2) {\n      if (path1) {\n        return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n      }\n      return path2;\n    };\n    function Uploader (settings) {\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = new domGlobals.XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var uploadBlob = function (blobInfo, handler) {\n        return new global$3(function (resolve, reject) {\n          try {\n            handler(blobInfo, resolve, reject, noop);\n          } catch (ex) {\n            reject(ex.message);\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var upload = function (blobInfo) {\n        return !settings.url && isDefaultHandler(settings.handler) ? global$3.reject('Upload url missing from the settings.') : uploadBlob(blobInfo, settings.handler);\n      };\n      settings = global$5.extend({\n        credentials: false,\n        handler: defaultHandler\n      }, settings);\n      return { upload: upload };\n    }\n\n    var makeTab$1 = function (info) {\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: [\n          {\n            type: 'input',\n            label: 'Style',\n            name: 'style'\n          },\n          {\n            type: 'grid',\n            columns: 2,\n            items: [\n              {\n                type: 'input',\n                label: 'Vertical space',\n                name: 'vspace',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'input',\n                label: 'Horizontal space',\n                name: 'hspace',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'input',\n                label: 'Border width',\n                name: 'border',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'selectbox',\n                name: 'borderstyle',\n                label: 'Border style',\n                items: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var AdvTab = { makeTab: makeTab$1 };\n\n    var collect = function (editor) {\n      var urlListSanitizer = ListUtils.sanitizer(function (item) {\n        return editor.convertURL(item.value || item.url, 'src');\n      });\n      var futureImageList = Future.nu(function (completer) {\n        Utils.createImageList(editor, function (imageList) {\n          completer(urlListSanitizer(imageList).map(function (items) {\n            return flatten([\n              [{\n                  text: 'None',\n                  value: ''\n                }],\n              items\n            ]);\n          }));\n        });\n      });\n      var classList = ListUtils.sanitize(Settings.getClassList(editor));\n      var hasAdvTab = Settings.hasAdvTab(editor);\n      var hasUploadTab = Settings.hasUploadTab(editor);\n      var hasUploadUrl = Settings.hasUploadUrl(editor);\n      var hasUploadHandler = Settings.hasUploadHandler(editor);\n      var image = readImageDataFromSelection(editor);\n      var hasDescription = Settings.hasDescription(editor);\n      var hasImageTitle = Settings.hasImageTitle(editor);\n      var hasDimensions = Settings.hasDimensions(editor);\n      var hasImageCaption = Settings.hasImageCaption(editor);\n      var url = Settings.getUploadUrl(editor);\n      var basePath = Settings.getUploadBasePath(editor);\n      var credentials = Settings.getUploadCredentials(editor);\n      var handler = Settings.getUploadHandler(editor);\n      var prependURL = Option.some(Settings.getPrependUrl(editor)).filter(function (preUrl) {\n        return isString(preUrl) && preUrl.length > 0;\n      });\n      return futureImageList.map(function (imageList) {\n        return {\n          image: image,\n          imageList: imageList,\n          classList: classList,\n          hasAdvTab: hasAdvTab,\n          hasUploadTab: hasUploadTab,\n          hasUploadUrl: hasUploadUrl,\n          hasUploadHandler: hasUploadHandler,\n          hasDescription: hasDescription,\n          hasImageTitle: hasImageTitle,\n          hasDimensions: hasDimensions,\n          hasImageCaption: hasImageCaption,\n          url: url,\n          basePath: basePath,\n          credentials: credentials,\n          handler: handler,\n          prependURL: prependURL\n        };\n      });\n    };\n\n    var makeTab$2 = function (info) {\n      var items = [{\n          type: 'dropzone',\n          name: 'fileinput'\n        }];\n      return {\n        title: 'Upload',\n        name: 'upload',\n        items: items\n      };\n    };\n    var UploadTab = { makeTab: makeTab$2 };\n\n    var createState = function (info) {\n      return {\n        prevImage: ListUtils.findEntry(info.imageList, info.image.src),\n        prevAlt: info.image.alt,\n        open: true\n      };\n    };\n    var fromImageData = function (image) {\n      return {\n        src: {\n          value: image.src,\n          meta: {}\n        },\n        images: image.src,\n        alt: image.alt,\n        title: image.title,\n        dimensions: {\n          width: image.width,\n          height: image.height\n        },\n        classes: image.class,\n        caption: image.caption,\n        style: image.style,\n        vspace: image.vspace,\n        border: image.border,\n        hspace: image.hspace,\n        borderstyle: image.borderStyle,\n        fileinput: []\n      };\n    };\n    var toImageData = function (data) {\n      return {\n        src: data.src.value,\n        alt: data.alt,\n        title: data.title,\n        width: data.dimensions.width,\n        height: data.dimensions.height,\n        class: data.classes,\n        style: data.style,\n        caption: data.caption,\n        hspace: data.hspace,\n        vspace: data.vspace,\n        border: data.border,\n        borderStyle: data.borderstyle\n      };\n    };\n    var addPrependUrl2 = function (info, srcURL) {\n      if (!/^(?:[a-zA-Z]+:)?\\/\\//.test(srcURL)) {\n        return info.prependURL.bind(function (prependUrl) {\n          if (srcURL.substring(0, prependUrl.length) !== prependUrl) {\n            return Option.some(prependUrl + srcURL);\n          }\n          return Option.none();\n        });\n      }\n      return Option.none();\n    };\n    var addPrependUrl = function (info, api) {\n      var data = api.getData();\n      addPrependUrl2(info, data.src.value).each(function (srcURL) {\n        api.setData({\n          src: {\n            value: srcURL,\n            meta: data.src.meta\n          }\n        });\n      });\n    };\n    var formFillFromMeta2 = function (info, data, meta) {\n      if (info.hasDescription && isString(meta.alt)) {\n        data.alt = meta.alt;\n      }\n      if (info.hasImageTitle && isString(meta.title)) {\n        data.title = meta.title;\n      }\n      if (info.hasDimensions) {\n        if (isString(meta.width)) {\n          data.dimensions.width = meta.width;\n        }\n        if (isString(meta.height)) {\n          data.dimensions.height = meta.height;\n        }\n      }\n      if (isString(meta.class)) {\n        ListUtils.findEntry(info.classList, meta.class).each(function (entry) {\n          data.classes = entry.value;\n        });\n      }\n      if (info.hasImageCaption) {\n        if (isBoolean(meta.caption)) {\n          data.caption = meta.caption;\n        }\n      }\n      if (info.hasAdvTab) {\n        if (isString(meta.vspace)) {\n          data.vspace = meta.vspace;\n        }\n        if (isString(meta.border)) {\n          data.border = meta.border;\n        }\n        if (isString(meta.hspace)) {\n          data.hspace = meta.hspace;\n        }\n        if (isString(meta.borderstyle)) {\n          data.borderstyle = meta.borderstyle;\n        }\n      }\n    };\n    var formFillFromMeta = function (info, api) {\n      var data = api.getData();\n      var meta = data.src.meta;\n      if (meta !== undefined) {\n        var newData = deepMerge({}, data);\n        formFillFromMeta2(info, newData, meta);\n        api.setData(newData);\n      }\n    };\n    var calculateImageSize = function (helpers, info, state, api) {\n      var data = api.getData();\n      var url = data.src.value;\n      var meta = data.src.meta || {};\n      if (!meta.width && !meta.height && info.hasDimensions) {\n        helpers.imageSize(url).get(function (result) {\n          result.each(function (size) {\n            if (state.open) {\n              api.setData({ dimensions: size });\n            }\n          });\n        });\n      }\n    };\n    var updateImagesDropdown = function (info, state, api) {\n      var data = api.getData();\n      var image = ListUtils.findEntry(info.imageList, data.src.value);\n      state.prevImage = image;\n      api.setData({\n        images: image.map(function (entry) {\n          return entry.value;\n        }).getOr('')\n      });\n    };\n    var changeSrc = function (helpers, info, state, api) {\n      addPrependUrl(info, api);\n      formFillFromMeta(info, api);\n      calculateImageSize(helpers, info, state, api);\n      updateImagesDropdown(info, state, api);\n    };\n    var changeImages = function (helpers, info, state, api) {\n      var data = api.getData();\n      var image = ListUtils.findEntry(info.imageList, data.images);\n      image.each(function (img) {\n        var updateAlt = data.alt === '' || state.prevImage.map(function (image) {\n          return image.text === data.alt;\n        }).getOr(false);\n        if (updateAlt) {\n          if (img.value === '') {\n            api.setData({\n              src: img,\n              alt: state.prevAlt\n            });\n          } else {\n            api.setData({\n              src: img,\n              alt: img.text\n            });\n          }\n        } else {\n          api.setData({ src: img });\n        }\n      });\n      state.prevImage = image;\n      changeSrc(helpers, info, state, api);\n    };\n    var calcVSpace = function (css) {\n      var matchingTopBottom = css['margin-top'] && css['margin-bottom'] && css['margin-top'] === css['margin-bottom'];\n      return matchingTopBottom ? Utils.removePixelSuffix(String(css['margin-top'])) : '';\n    };\n    var calcHSpace = function (css) {\n      var matchingLeftRight = css['margin-right'] && css['margin-left'] && css['margin-right'] === css['margin-left'];\n      return matchingLeftRight ? Utils.removePixelSuffix(String(css['margin-right'])) : '';\n    };\n    var calcBorderWidth = function (css) {\n      return css['border-width'] ? Utils.removePixelSuffix(String(css['border-width'])) : '';\n    };\n    var calcBorderStyle = function (css) {\n      return css['border-style'] ? String(css['border-style']) : '';\n    };\n    var calcStyle = function (parseStyle, serializeStyle, css) {\n      return serializeStyle(parseStyle(serializeStyle(css)));\n    };\n    var changeStyle2 = function (parseStyle, serializeStyle, data) {\n      var css = Utils.mergeMargins(parseStyle(data.style));\n      var dataCopy = deepMerge({}, data);\n      dataCopy.vspace = calcVSpace(css);\n      dataCopy.hspace = calcHSpace(css);\n      dataCopy.border = calcBorderWidth(css);\n      dataCopy.borderstyle = calcBorderStyle(css);\n      dataCopy.style = calcStyle(parseStyle, serializeStyle, css);\n      return dataCopy;\n    };\n    var changeStyle = function (helpers, api) {\n      var data = api.getData();\n      var newData = changeStyle2(helpers.parseStyle, helpers.serializeStyle, data);\n      api.setData(newData);\n    };\n    var changeAStyle = function (helpers, info, api) {\n      var data = deepMerge(fromImageData(info.image), api.getData());\n      var style = getStyleValue(helpers.normalizeCss, toImageData(data));\n      api.setData({ style: style });\n    };\n    var changeFileInput = function (helpers, info, state, api) {\n      var data = api.getData();\n      api.block('Uploading image');\n      head(data.fileinput).fold(function () {\n        api.unblock();\n      }, function (file) {\n        var blobUri = domGlobals.URL.createObjectURL(file);\n        var uploader = Uploader({\n          url: info.url,\n          basePath: info.basePath,\n          credentials: info.credentials,\n          handler: info.handler\n        });\n        var finalize = function () {\n          api.unblock();\n          domGlobals.URL.revokeObjectURL(blobUri);\n        };\n        Utils.blobToDataUri(file).then(function (dataUrl) {\n          var blobInfo = helpers.createBlobCache(file, blobUri, dataUrl);\n          uploader.upload(blobInfo).then(function (url) {\n            api.setData({\n              src: {\n                value: url,\n                meta: {}\n              }\n            });\n            api.showTab('general');\n            changeSrc(helpers, info, state, api);\n            finalize();\n          }).catch(function (err) {\n            finalize();\n            helpers.alertErr(api, err);\n          });\n        });\n      });\n    };\n    var changeHandler = function (helpers, info, state) {\n      return function (api, evt) {\n        if (evt.name === 'src') {\n          changeSrc(helpers, info, state, api);\n        } else if (evt.name === 'images') {\n          changeImages(helpers, info, state, api);\n        } else if (evt.name === 'alt') {\n          state.prevAlt = api.getData().alt;\n        } else if (evt.name === 'style') {\n          changeStyle(helpers, api);\n        } else if (evt.name === 'vspace' || evt.name === 'hspace' || evt.name === 'border' || evt.name === 'borderstyle') {\n          changeAStyle(helpers, info, api);\n        } else if (evt.name === 'fileinput') {\n          changeFileInput(helpers, info, state, api);\n        }\n      };\n    };\n    var closeHandler = function (state) {\n      return function () {\n        state.open = false;\n      };\n    };\n    var makeDialogBody = function (info) {\n      if (info.hasAdvTab || info.hasUploadUrl || info.hasUploadHandler) {\n        var tabPanel = {\n          type: 'tabpanel',\n          tabs: flatten([\n            [MainTab.makeTab(info)],\n            info.hasAdvTab ? [AdvTab.makeTab(info)] : [],\n            info.hasUploadTab && (info.hasUploadUrl || info.hasUploadHandler) ? [UploadTab.makeTab(info)] : []\n          ])\n        };\n        return tabPanel;\n      } else {\n        var panel = {\n          type: 'panel',\n          items: MainTab.makeItems(info)\n        };\n        return panel;\n      }\n    };\n    var makeDialog = function (helpers) {\n      return function (info) {\n        var state = createState(info);\n        return {\n          title: 'Insert/Edit Image',\n          size: 'normal',\n          body: makeDialogBody(info),\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: fromImageData(info.image),\n          onSubmit: helpers.onSubmit(info),\n          onChange: changeHandler(helpers, info, state),\n          onClose: closeHandler(state)\n        };\n      };\n    };\n    var submitHandler = function (editor) {\n      return function (info) {\n        return function (api) {\n          var data = deepMerge(fromImageData(info.image), api.getData());\n          editor.undoManager.transact(function () {\n            insertOrUpdateImage(editor, toImageData(data));\n          });\n          editor.editorUpload.uploadImagesAuto();\n          api.close();\n        };\n      };\n    };\n    var imageSize = function (editor) {\n      return function (url) {\n        return FutureResult.nu(function (completer) {\n          Utils.getImageSize(editor.documentBaseURI.toAbsolute(url), function (data) {\n            var result = data.map(function (dimensions) {\n              return {\n                width: String(dimensions.width),\n                height: String(dimensions.height)\n              };\n            });\n            completer(result);\n          });\n        });\n      };\n    };\n    var createBlobCache = function (editor) {\n      return function (file, blobUri, dataUrl) {\n        return editor.editorUpload.blobCache.create({\n          blob: file,\n          blobUri: blobUri,\n          name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n          base64: dataUrl.split(',')[1]\n        });\n      };\n    };\n    var alertErr = function (editor) {\n      return function (api, message) {\n        editor.windowManager.alert(message, api.close);\n      };\n    };\n    var normalizeCss$1 = function (editor) {\n      return function (cssText) {\n        return normalizeCss(editor, cssText);\n      };\n    };\n    var parseStyle = function (editor) {\n      return function (cssText) {\n        return editor.dom.parseStyle(cssText);\n      };\n    };\n    var serializeStyle = function (editor) {\n      return function (stylesArg, name) {\n        return editor.dom.serializeStyle(stylesArg, name);\n      };\n    };\n    var Dialog = function (editor) {\n      var helpers = {\n        onSubmit: submitHandler(editor),\n        imageSize: imageSize(editor),\n        createBlobCache: createBlobCache(editor),\n        alertErr: alertErr(editor),\n        normalizeCss: normalizeCss$1(editor),\n        parseStyle: parseStyle(editor),\n        serializeStyle: serializeStyle(editor)\n      };\n      var open = function () {\n        return collect(editor).map(makeDialog(helpers)).get(function (spec) {\n          editor.windowManager.open(spec);\n        });\n      };\n      return { open: open };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceImage', Dialog(editor).open);\n    };\n    var Commands = { register: register };\n\n    var hasImageClass = function (node) {\n      var className = node.attr('class');\n      return className && /\\bimage\\b/.test(className);\n    };\n    var toggleContentEditableState = function (state) {\n      return function (nodes) {\n        var i = nodes.length;\n        var toggleContentEditable = function (node) {\n          node.attr('contenteditable', state ? 'true' : null);\n        };\n        while (i--) {\n          var node = nodes[i];\n          if (hasImageClass(node)) {\n            node.attr('contenteditable', state ? 'false' : null);\n            global$5.each(node.getAll('figcaption'), toggleContentEditable);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addToggleButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onAction: Dialog(editor).open,\n        onSetup: function (buttonApi) {\n          return editor.selection.selectorChangedWithUnbind('img:not([data-mce-object],[data-mce-placeholder]),figure.image', buttonApi.setActive).unbind;\n        }\n      });\n      editor.ui.registry.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image...',\n        onAction: Dialog(editor).open\n      });\n      editor.ui.registry.addContextMenu('image', {\n        update: function (element) {\n          return isFigure(element) || isImage(element) && !Utils.isPlaceholderImage(element) ? ['image'] : [];\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global$1.add('image', function (editor) {\n        FilterContent.setup(editor);\n        Buttons.register(editor);\n        Commands.register(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"noneditable\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/noneditable')\n//   ES2015:\n//     import 'tinymce/plugins/noneditable'\nrequire('./plugin.js');","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.4 (2019-12-11)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var editorContent = Content.getContent(editor);\n      editor.windowManager.open({\n        title: 'Source Code',\n        size: 'large',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'textarea',\n              name: 'code'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: { code: editorContent },\n        onSubmit: function (api) {\n          Content.setContent(editor, api.getData().code);\n          api.close();\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('code', {\n        icon: 'sourcecode',\n        tooltip: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n      editor.ui.registry.addMenuItem('code', {\n        icon: 'sourcecode',\n        text: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('code', function (editor) {\n        Commands.register(editor);\n        Buttons.register(editor);\n        return {};\n      });\n    }\n\n    Plugin();\n\n}());\n","import tinymce from 'tinymce/tinymce';\nwindow.tinymce = tinymce;\nimport 'tinymce/themes/silver';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/table';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/paste';\nimport 'tinymce/plugins/media';\nimport 'tinymce/plugins/noneditable';\nimport {getInitConfig} from '../libs/tinymce_extensions';\n\nconst ENHANCED = window.VERIFIED || window.SUP;\n\nfunction initRichTextEditor(element, code=false) {\n  // Vue rebuilds the whole dom in between the call to init and tinymce actually doing the init\n  // so we use a selector here until we use vue to init tinymce\n  const selector=`${element.type}#${element.id}`;\n  let config = getInitConfig(selector, ENHANCED, code);\n\n  return tinymce.init(config);\n}\n\nfor (const textArea of document.querySelectorAll('.richtext-editor'))\n  initRichTextEditor(textArea);\n\nfor (const textArea of document.querySelectorAll('.richtext-editor-src'))\n  initRichTextEditor(textArea, true);\n\nglobal.initRichTextEditor = initRichTextEditor;\n"],"sourceRoot":""}